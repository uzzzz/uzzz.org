<!DOCTYPE html>
<html amp lang="en-US">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1">
	<script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://uzzz.org/#website","url":"https://uzzz.org/","name":"\u6709\u7ec4\u7ec7\u5728!","potentialAction":{"@type":"SearchAction","target":"https://uzzz.org/?s={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"ImageObject","@id":"https://uzzz.org/article/2900/#primaryimage","url":"https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190108202335934.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3MjYzNjM3,size_16,color_FFFFFF,t_70"},{"@type":"WebPage","@id":"https://uzzz.org/article/2900/#webpage","url":"https://uzzz.org/article/2900/","inLanguage":"en-US","name":"Traceroute\u547d\u4ee4\u539f\u7406\u53ca\u4f7f\u7528(\u8def\u7531\u8ddf\u8e2a) - \u6709\u7ec4\u7ec7\u5728!","isPartOf":{"@id":"https://uzzz.org/#website"},"primaryImageOfPage":{"@id":"https://uzzz.org/article/2900/#primaryimage"},"datePublished":"2019-01-08T12:27:29+00:00","dateModified":"2019-01-08T12:27:29+00:00","author":{"@id":"https://uzzz.org/#/schema/person/29673f1347b0abda5882803c72ee5a3f"}},{"@type":["Person"],"@id":"https://uzzz.org/#/schema/person/29673f1347b0abda5882803c72ee5a3f","name":"fandyvon","sameAs":[]}]}</script>
	<title>Traceroute命令原理及使用(路由跟踪) - 有组织在!</title>
		<link rel="canonical" href="https://uzzz.org/article/2900/">
	<script type="text/javascript" src="https://cdn.ampproject.org/v0.js" async></script>
<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
	<style amp-custom>
		/* Generic WP styling */

.alignright {
	float: right;
}

.alignleft {
	float: left;
}

.aligncenter {
	display: block;
	text-align: center;
	margin-left: auto;
	margin-right: auto;
}

.amp-wp-enforced-sizes {
	/** Our sizes fallback is 100vw, and we have a padding on the container; the max-width here prevents the element from overflowing. **/
	max-width: 100%;
	margin: 0 auto;
}


/*
 * Prevent cases of amp-img converted from img to appear with stretching by using object-fit to scale.
 * See <https://github.com/ampproject/amphtml/issues/21371#issuecomment-475443219>.
 * Also use object-fit:contain in worst case scenario when we can't figure out dimensions for an image.
 * Additionally, in side of \AMP_Img_Sanitizer::determine_dimensions() it could $amp_img->setAttribute( 'object-fit', 'contain' )
 * so that the following rules wouldn't be needed.
 */
amp-img.amp-wp-enforced-sizes[layout="intrinsic"] > img,
amp-anim.amp-wp-enforced-sizes[layout="intrinsic"] > img {
	object-fit: contain;
}

amp-fit-text blockquote,
amp-fit-text h1,
amp-fit-text h2,
amp-fit-text h3,
amp-fit-text h4,
amp-fit-text h5,
amp-fit-text h6 {
	font-size: inherit;
}

/**
 * Override a style rule in Twenty Sixteen and Twenty Seventeen.
 * It set display:none for audio elements.
 * This selector is the same, though it adds body and uses amp-audio instead of audio.
 */
body amp-audio:not([controls]) {
	display: inline-block;
	height: auto;
}

/*
 * Style the default template messages for submit-success, submit-error, and submitting. These elements are inserted
 * by the form sanitizer when a POST form lacks the action-xhr attribute.
 */
.amp-wp-default-form-message > p {
	margin: 1em 0;
	padding: 0.5em;
}

.amp-wp-default-form-message[submitting] > p,
.amp-wp-default-form-message[submit-success] > p.amp-wp-form-redirecting {
	font-style: italic;
}

.amp-wp-default-form-message[submit-success] > p:not(.amp-wp-form-redirecting) {
	border: solid 1px #008000;
	background-color: #90ee90;
	color: #000;
}

.amp-wp-default-form-message[submit-error] > p {
	border: solid 1px #f00;
	background-color: #ffb6c1;
	color: #000;
}

/* Prevent showing empty success message in the case of an AMP-Redirect-To response header. */
.amp-wp-default-form-message[submit-success] > p:empty {
	display: none;
}

amp-carousel .amp-wp-gallery-caption {
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	text-align: center;
	background-color: rgba(0, 0, 0, 0.5);
	color: #fff;
	padding: 1rem;
}

.wp-block-gallery[data-amp-carousel="true"] {
	display: block;
	flex-wrap: unset;
}

/* Template Styles */

.amp-wp-content,
.amp-wp-title-bar div {
		margin: 0 auto;
	max-width: 840px;
	}

html {
	background: #0a89c0;
}

body {
	background: #fff;
	color: #353535;
	font-family: Georgia, 'Times New Roman', Times, Serif;
	font-weight: 300;
	line-height: 1.75em;
}

p,
ol,
ul,
figure {
	margin: 0 0 1em;
	padding: 0;
}

a,
a:visited {
	color: #0a89c0;
}

a:hover,
a:active,
a:focus {
	color: #353535;
}

/* Quotes */

blockquote {
	color: #353535;
	background: rgba(127,127,127,.125);
	border-left: 2px solid #0a89c0;
	margin: 8px 0 24px 0;
	padding: 16px;
}

blockquote p:last-child {
	margin-bottom: 0;
}

/* UI Fonts */

.amp-wp-meta,
.amp-wp-header div,
.amp-wp-title,
.wp-caption-text,
.amp-wp-tax-category,
.amp-wp-tax-tag,
.amp-wp-comments-link,
.amp-wp-footer p,
.back-to-top {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen-Sans", "Ubuntu", "Cantarell", "Helvetica Neue", sans-serif;
}

/* Header */

.amp-wp-header {
	background-color: #0a89c0;
}

.amp-wp-header div {
	color: #fff;
	font-size: 1em;
	font-weight: 400;
	margin: 0 auto;
	max-width: calc(840px - 32px);
	padding: .875em 16px;
	position: relative;
}

.amp-wp-header a {
	color: #fff;
	text-decoration: none;
}


.amp-wp-header .amp-wp-site-icon {
	/** site icon is 32px **/
	background-color: #fff;
	border: 1px solid #fff;
	border-radius: 50%;
	position: absolute;
	right: 18px;
	top: 10px;
}

/* Article */

.amp-wp-article {
	color: #353535;
	font-weight: 400;
	margin: 1.5em auto;
	max-width: 840px;
	overflow-wrap: break-word;
	word-wrap: break-word;
}

/* Article Header */

.amp-wp-article-header {
	align-items: center;
	align-content: stretch;
	display: flex;
	flex-wrap: wrap;
	justify-content: space-between;
	margin: 1.5em 16px 0;
}

.amp-wp-title {
	color: #353535;
	display: block;
	flex: 1 0 100%;
	font-weight: 900;
	margin: 0 0 .625em;
	width: 100%;
}

/* Article Meta */

.amp-wp-meta {
	color: #696969;
	display: inline-block;
	flex: 2 1 50%;
	font-size: .875em;
	line-height: 1.5em;
	margin: 0 0 1.5em;
	padding: 0;
}

.amp-wp-article-header .amp-wp-meta:last-of-type {
	text-align: right;
}

.amp-wp-article-header .amp-wp-meta:first-of-type {
	text-align: left;
}

.amp-wp-byline amp-img,
.amp-wp-byline .amp-wp-author {
	display: inline-block;
	vertical-align: middle;
}

.amp-wp-byline amp-img {
	border: 1px solid #0a89c0;
	border-radius: 50%;
	position: relative;
	margin-right: 6px;
}

.amp-wp-posted-on {
	text-align: right;
}

/* Featured image */

.amp-wp-article-featured-image {
	margin: 0 0 1em;
}
.amp-wp-article-featured-image amp-img {
	margin: 0 auto;
}
.amp-wp-article-featured-image.wp-caption .wp-caption-text {
	margin: 0 18px;
}

/* Article Content */

.amp-wp-article-content {
	margin: 0 16px;
}

.amp-wp-article-content ul,
.amp-wp-article-content ol {
	margin-left: 1em;
}

.amp-wp-article-content .wp-caption {
	max-width: 100%;
}

.amp-wp-article-content amp-img {
	margin: 0 auto;
}

.amp-wp-article-content amp-img.alignright {
	margin: 0 0 1em 16px;
}

.amp-wp-article-content amp-img.alignleft {
	margin: 0 16px 1em 0;
}

/* Captions */

.wp-caption {
	padding: 0;
}

.wp-caption.alignleft {
	margin-right: 16px;
}

.wp-caption.alignright {
	margin-left: 16px;
}

.wp-caption .wp-caption-text {
	border-bottom: 1px solid #c2c2c2;
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	margin: 0;
	padding: .66em 10px .75em;
}

/* AMP Media */

.alignwide,
.alignfull {
	clear: both;
}

amp-carousel {
	background: #c2c2c2;
	margin: 0 -16px 1.5em;
}
amp-iframe,
amp-youtube,
amp-instagram,
amp-vine {
	background: #c2c2c2;
	margin: 0 -16px 1.5em;
}

.amp-wp-article-content amp-carousel amp-img {
	border: none;
}

amp-carousel > amp-img > img {
	object-fit: contain;
}

.amp-wp-iframe-placeholder {
	background: #c2c2c2 url( https://uzzz.org/wp-content/plugins/amp/assets/images/placeholder-icon.png ) no-repeat center 40%;
	background-size: 48px 48px;
	min-height: 48px;
}

/* Article Footer Meta */

.amp-wp-article-footer .amp-wp-meta {
	display: block;
}

.amp-wp-tax-category,
.amp-wp-tax-tag {
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	margin: 1.5em 16px;
}

.amp-wp-comments-link {
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	text-align: center;
	margin: 2.25em 0 1.5em;
}

.amp-wp-comments-link a {
	border-style: solid;
	border-color: #c2c2c2;
	border-width: 1px 1px 2px;
	border-radius: 4px;
	background-color: transparent;
	color: #0a89c0;
	cursor: pointer;
	display: block;
	font-size: 14px;
	font-weight: 600;
	line-height: 18px;
	margin: 0 auto;
	max-width: 200px;
	padding: 11px 16px;
	text-decoration: none;
	width: 50%;
	-webkit-transition: background-color 0.2s ease;
			transition: background-color 0.2s ease;
}

/* AMP Footer */

.amp-wp-footer {
	border-top: 1px solid #c2c2c2;
	margin: calc(1.5em - 1px) 0 0;
}

.amp-wp-footer div {
	margin: 0 auto;
	max-width: calc(840px - 32px);
	padding: 1.25em 16px 1.25em;
	position: relative;
}

.amp-wp-footer h2 {
	font-size: 1em;
	line-height: 1.375em;
	margin: 0 0 .5em;
}

.amp-wp-footer p {
	color: #696969;
	font-size: .8em;
	line-height: 1.5em;
	margin: 0 85px 0 0;
}

.amp-wp-footer a {
	text-decoration: none;
}

.back-to-top {
	bottom: 1.275em;
	font-size: .8em;
	font-weight: 600;
	line-height: 2em;
	position: absolute;
	right: 16px;
}
		/* Inline stylesheets */
:root:not(#_):not(#_):not(#_):not(#_):not(#_):not(#_):not(#_) .markdown_views{word-break:break-word}.markdown_views pre code{display:block;font-size:14px;line-height:22px;overflow-x:auto;white-space:pre;word-wrap:normal;background-color:#f6f8fa;border-radius:4px}@media screen and (-webkit-min-device-pixel-ratio:0){.markdown_views pre code{min-width:94%}}:root:not(#_):not(#_):not(#_):not(#_):not(#_):not(#_):not(#_):not(#_) .markdown_views pre code{padding:0}.markdown_views.prism-github-gist pre code{background-color:#f3f4f5}@font-face{font-family:KaTeX_AMS;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_AMS-Regular.e78e28b.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_AMS-Regular.7f06b4e.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_AMS-Regular.aaf4eee.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Caligraphic;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Caligraphic-Bold.4ec58be.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Caligraphic-Bold.1e802ca.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Caligraphic-Bold.021dd4d.ttf") format("truetype");font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Caligraphic;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Caligraphic-Regular.7edb53b.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Caligraphic-Regular.d3b46c3.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Caligraphic-Regular.d49f2d5.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Fraktur;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Fraktur-Bold.d5b59ec.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Fraktur-Bold.c4c8cab.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Fraktur-Bold.a31e7cb.ttf") format("truetype");font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Fraktur;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Fraktur-Regular.32a5339.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Fraktur-Regular.b7d9c46.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Fraktur-Regular.a48dad4.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Main;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-Bold.8e1e01c.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-Bold.22086eb.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-Bold.9ceff51.ttf") format("truetype");font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Main;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-BoldItalic.284a17f.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-BoldItalic.4c57dbc.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-BoldItalic.e8b44b9.ttf") format("truetype");font-weight:700;font-style:italic}@font-face{font-family:KaTeX_Main;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-Italic.e533d5a.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-Italic.99be0e1.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-Italic.29c8639.ttf") format("truetype");font-weight:400;font-style:italic}@font-face{font-family:KaTeX_Main;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-Regular.5c734d7.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-Regular.b741441.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Main-Regular.5c94aef.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Math;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Math-BoldItalic.d747bd1.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Math-BoldItalic.b13731e.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Math-BoldItalic.9a2834a.ttf") format("truetype");font-weight:700;font-style:italic}@font-face{font-family:KaTeX_Math;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Math-Italic.4ad08b8.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Math-Italic.f030390.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Math-Italic.291e76b.ttf") format("truetype");font-weight:400;font-style:italic}@font-face{font-family:KaTeX_SansSerif;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_SansSerif-Bold.6e0830b.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_SansSerif-Bold.3fb4195.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_SansSerif-Bold.7dc027c.ttf") format("truetype");font-weight:700;font-style:normal}@font-face{font-family:KaTeX_SansSerif;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_SansSerif-Italic.fba01c9.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_SansSerif-Italic.727a9b0.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_SansSerif-Italic.4059868.ttf") format("truetype");font-weight:400;font-style:italic}@font-face{font-family:KaTeX_SansSerif;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_SansSerif-Regular.d929cd6.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_SansSerif-Regular.2555754.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_SansSerif-Regular.5c58d16.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Script;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Script-Regular.755e249.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Script-Regular.d524c9a.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Script-Regular.d12ea9e.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size1;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size1-Regular.048c39c.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size1-Regular.08b5f00.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size1-Regular.7342d45.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size2;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size2-Regular.81d6b8d.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size2-Regular.af24b0e.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size2-Regular.eb130dc.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size3;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size3-Regular.b311ca0.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size3-Regular.0d89264.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size3-Regular.7e02a40.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size4;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size4-Regular.6a3255d.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size4-Regular.68895bb.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Size4-Regular.ad76725.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Typewriter;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Typewriter-Regular.6cc31ea.woff2") format("woff2"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Typewriter-Regular.3fe216d.woff") format("woff"),url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/KaTeX_Typewriter-Regular.2570235.ttf") format("truetype");font-weight:400;font-style:normal}@font-face{font-family:Roboto Mono;font-style:normal;font-weight:400;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/RobotoMono-Regular.0b6a547.woff") format("woff")}@font-face{font-family:Roboto Mono;font-style:normal;font-weight:600;src:url("https://csdnimg.cn/release/phoenix/mdeditor/fonts/RobotoMono-Bold.819f3b2.woff") format("woff")}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}.markdown_views *{box-sizing:border-box}code,pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}amp-img{border-style:none}svg:not(:root){overflow:hidden}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.markdown_views,body,html{font-family:-apple-system,SF UI Text,Arial,PingFang SC,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,sans-serif}[hidden]{display:none}body,html{color:rgba(0,0,0,.75);font-variant-ligatures:common-ligatures;line-height:1.625;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;tab-size:4;-moz-tab-size:4;-o-tab-size:4}.markdown_views p,.markdown_views pre,.markdown_views ul{margin:1.2em 0}.markdown_views ul ul{margin:0}.markdown_views code *,.markdown_views pre *{font-size:inherit}.markdown_views code{padding:2px 4px}.markdown_views pre>code{background-color:rgba(0,0,0,.05);display:block;padding:.5em;-webkit-text-size-adjust:none;overflow-x:auto;white-space:pre}.markdown_views .toc ul{list-style-type:none;padding-left:20px}.markdown_views amp-img[src*="#pic_center"]{display:block;margin:auto}.markdown_views p{font-size:16px;color:#4d4d4d;font-weight:400;line-height:26px;margin:0 0 16px}.markdown_views h1,.markdown_views h3{color:#4f4f4f;margin:8px 0 16px;font-weight:700}.markdown_views ul{margin:0 0 24px;padding:0;font-size:16px}.markdown_views ul li{list-style-type:disc;margin:8px 0 0 32px}.markdown_views amp-img{margin:24px 0;max-width:100%}.markdown_views h1{font-size:28px;line-height:36px}.markdown_views h3{font-size:22px;line-height:30px}.markdown_views h1 code{font-size:28px}.markdown_views h3 code{font-size:22px}.markdown_views pre{margin-bottom:24px}.markdown_views pre code{color:unset}.markdown_views code,.markdown_views pre{font-family:Source Code Pro,DejaVu Sans Mono,Ubuntu Mono,Anonymous Pro,Droid Sans Mono,Menlo,Monaco,Consolas,Inconsolata,Courier,monospace,PingFang SC,Microsoft YaHei,sans-serif;font-size:14px;line-height:22px;color:#000}.markdown_views code{color:#c7254e;background-color:#f9f2f4;border-radius:2px}.markdown_views a{text-decoration-skip:ink;color:#4ea1db;text-decoration:none}.markdown_views a:focus,.markdown_views a:hover{text-decoration:none;color:#ca0c16}.markdown_views a:visited{color:#6795b5}.markdown_views .toc{font-size:16px;line-height:24px;margin:0 0 24px;padding:0}.markdown_views .toc ul{margin:0 0 8px;padding:0}.markdown_views .toc ul ul{padding-left:24px}.markdown_views .toc ul li{list-style-type:none;margin:8px 0 0 24px}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-224b51a{display:none}:root:not(#_):not(#_):not(#_):not(#_):not(#_) .amp-wp-7874ad7{-webkit-tap-highlight-color:rgba(0,0,0,0)}	</style>
</head>

<body class="">

<header id="top" class="amp-wp-header">
	<div>
		<a href="https://uzzz.org/">
										<amp-img src="https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png" width="32" height="32" class="amp-wp-site-icon"></amp-img>
						<span class="amp-site-title">
				有组织在!			</span>
		</a>

					</div>
</header>

<article class="amp-wp-article">
	<header class="amp-wp-article-header">
		<h1 class="amp-wp-title">Traceroute命令原理及使用(路由跟踪)</h1>
			<div class="amp-wp-meta amp-wp-byline">
					<amp-img src="https://secure.gravatar.com/avatar/e786821a74ef0467825a7d60183307bc?s=24&d=mm&r=g" alt="fandyvon" width="24" height="24" layout="fixed"></amp-img>
				<span class="amp-wp-author author vcard">fandyvon</span>
	</div>
<div class="amp-wp-meta amp-wp-posted-on">
	<time datetime="2019-01-08T20:27:29+00:00">
		1 year ago	</time>
</div>
	</header>

	
	<div class="amp-wp-article-content">
		<div id="article_content" class="article_content clearfix">
 <br>
 
 
<div id="content_views" class="markdown_views prism-github-gist">
  <br>
  <svg xmlns="http://www.w3.org/2000/svg" class="amp-wp-224b51a">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" class="amp-wp-7874ad7"></path>
  </svg> 
<p>traceroute，现代Linux系统称为tracepath，Windows系统称为tracert，是一种计算机网络工具。它可显示数据包在IP网络经过的路由器的IP地址。我们可以用这个命令来查看数据包途径的网络节点和ISP,从而排除一部分网络问题。<br> 本文基于Linux环境</p>

<div class="toc">
<h3>文章目录</h3>
<ul>
<li><a href="#1__4" rel="nofollow" data-token="f0008a9934eff02c1962fcc2e0976c4e">1 原理</a></li>
<li><a href="#2__12" rel="nofollow" data-token="993ebc88d6230689eb366693d69252c5">2 命令</a></li>
<li><a href="#3__39" rel="nofollow" data-token="cff25535283e349eac66844aefcd32ef">3 举例</a></li>
<li><a href="#4__98" rel="nofollow" data-token="edb970cff9f1dd3943c899166834be81">4 参考链接</a></li>
</ul></div>

<h1><a id="1__4"></a>1 原理</h1>
<p>程序是利用增加存活时间（TTL）值来实现其功能的。每当数据包经过一个路由器，其存活时间就会减1。当其存活时间是0时，主机便取消数据包，并发送一个ICMP TTL数据包给原数据包的发出者。程序发出的首3个数据包TTL值是1，之后3个是2，如此类推，它便得到一连串数据包路径。注意IP不保证每个数据包走的路径都一样。</p>
<p>实现：<br> 主叫方首先发出 TTL=1 的数据包，第一个路由器将 TTL 减1得0后就不再继续转发此数据包，而是返回一个 ICMP 逾时报文，主叫方从逾时报文中即可提取出数据包所经过的第一个网关地址。然后又发出一个 TTL=2 的 ICMP 数据包，可获得第二个网关地址，依次递增 TTL 便获取了沿途所有网关地址。</p>
<p>需要注意的是，并不是所有网关都会如实返回 ICMP 超时报文。出于安全性考虑，大多数防火墙以及启用了防火墙功能的路由器缺省配置为不返回各种 ICMP 报文，其余路由器或交换机也可被管理员主动修改配置变为不返回 ICMP 报文。因此 Traceroute 程序不一定能拿全所有的沿途网关地址。所以，当某个 TTL 值的数据包得不到响应时，并不能停止这一追踪过程，程序仍然会把 TTL 递增而发出下一个数据包。一直达到默认或用参数指定的追踪限制（maximum_hops）才结束追踪。</p>
<h1><a id="2__12"></a>2 命令</h1>
<p>traceroute [参数][ 主机]</p>
<pre><code>-m 
Max_ttl 设置用于输出探测信息包的最大存活时间（最大的跳跃数）。缺省值为 30 个跳跃（TCP 连接也使用相同的缺省值）。
-n 	
以数字方式而不以符号加数字的方式显示跳跃地址。该标志为在路径上找到的每个网关保存名称服务器的“地址到姓名”查询。
-p 
Port 设置用于探测的基本 UDP 端口号。缺省值为 33434。traceroute 命令取决于目标主机的开放式 UDP 端口范围，base 至 base + nhops - 1。如果 UDP 端口不可用，那么该选项可以用于选择一个未曾使用的端口范围。
-q  
Nqueries 指定 traceroute 命令在每个 Max_ttl 设定值处发出的探测数目。缺省值为三次探测。
-r 
忽略正常的路由表，并直接发送探测信息包至已链接网络上的主机。如果指定的主机不在直接连接的网络上，那么返回一个错误。该选项可以用于通过 routed 守护程序路由表中未注册的接口向本地主机发出 ping命令。
-s SRC_Addr
以数字格式将下一 IP 地址用作输出探测信息包的源地址。在具有不止一个 IP 地址的主机上，可以使用 -s 标志强制将源地址转变成与发送探测包的接口的 IP 地址不同的地址。如果下一个 IP 地址不是机器接口地址之一，那么返回一个错误且不发送任何内容。
-t 
TypeOfService 将探测信息包中的 TypeOfService 变量设置为 0 至 255 范围内的一个十进制整数。缺省值为 0。该标志可用于调查不同的服务类型是否产生了不同的路径。有关更多信息，请参阅Performance Tools Guide and Reference中的 TCP/IP 协议。有用的数值为 -t 16（低延迟）和 -t 8（高吞吐量）。
-v 	
接收除 TIME_EXCEEDED 和 PORT_UNREACHABLE 以外的信息包（详细输出）。
-w
WaitTime 设置等待探测响应的时间（以秒为单位）。 缺省值为 3 秒。
</code></pre>
<p>关于更多参数可以man traceroute 查看</p>
<p>通过使用 -q 标志，可以增加发送的探测数目。如果探测的回答来自不同的网关，那么命令会显示各个响应系统的地址。如果在 3 秒的超时时间间隔中没有来自探测的应答，那么会针对该探测显示出 *（星号）。</p>
<h1><a id="3__39"></a>3 举例</h1>
<p>上面是traceroute的原理 下面直接使用一个AWS 北加州的网关地址（54.176.64.1）作为说明：<br> <amp-img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190108202335934.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3MjYzNjM3,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" width="1016" height="396" class="amp-wp-enforced-sizes" layout="intrinsic"><noscript><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190108202335934.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3MjYzNjM3,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" width="1016" height="396" class=""></noscript></amp-img></p>
<p>traceroute 54.176.64.1</p>
<pre><code>traceroute to 54.176.64.1 (54.176.64.1), 30 hops max, 60 byte packets
 1  _gateway (172.28.31.253)  0.506 ms  0.706 ms  0.935 ms
 2  172.28.253.248 (172.28.253.248)  4.188 ms  4.179 ms  4.159 ms
 3  * * *
 4 xxx.xxx.xxx.xxx  7.633 ms  8.530 ms  8.549 ms
 5  202.98.114.89 (202.98.114.89)  27.187 ms  27.182 ms  27.155 ms
 6  171.208.203.73 (171.208.203.73)  9.873 ms 171.208.203.77 (171.208.203.77)  7.593 ms 171.208.197.137 (171.208.197.137)  9.369 ms
 7  202.97.36.221 (202.97.36.221)  41.338 ms  41.306 ms  41.265 ms
 8  202.97.94.150 (202.97.94.150)  37.287 ms  37.283 ms  37.254 ms
 9  202.97.38.166 (202.97.38.166)  118.693 ms 202.97.94.98 (202.97.94.98)  49.134 ms 202.97.94.118 (202.97.94.118)  37.517 ms
10  202.97.51.154 (202.97.51.154)  262.064 ms  265.948 ms 202.97.27.242 (202.97.27.242)  188.980 ms
11  202.97.50.78 (202.97.50.78)  202.017 ms  202.010 ms  201.127 ms
12  218.30.53.6 (218.30.53.6)  192.909 ms  191.283 ms  190.876 ms
	1. 13  54.240.242.205 (54.240.242.205)  207.128 ms 54.240.242.213 (54.240.242.213)  265.886 ms 54.240.242.211 (54.240.242.211)  195.121 ms
14  54.240.242.107 (54.240.242.107)  204.093 ms 54.240.242.87 (54.240.242.87)  268.111 ms 54.240.242.107 (54.240.242.107)  204.026 ms
15  205.251.229.158 (205.251.229.158)  199.881 ms 72.21.222.17 (72.21.222.17)  267.152 ms 205.251.229.158 (205.251.229.158)  198.199 ms
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  ec2-54-176-64-1.us-west-1.compute.amazonaws.com (54.176.64.1)  192.958 ms  193.747 ms  191.026 ms
</code></pre>
<p>对结果进行说明：<br> traceroute to 54.176.64.1 (54.176.64.1), 30 hops max, 60 byte packets<br> 第一行表示目标地址，最大30 个跳跃（-m设置），数据包大小为60byte。<br> 后续每行的 序号就标识经过了的第几个路由，而每行第二列即为路由的ip地址（域名），第三列(ip地址后有三个时间)单位为三个数据包后，网关响应后返回的时间。<br> 有时我们traceroute 一台主机时，会看到有一些行是以星号表示的（* * *）。如果在 3 秒的超时时间间隔中没有来自探测的应答，那么会针对该探测显示出 *（星号）。出现这样的情况，可能是防火墙封掉了ICMP的返回信息，所以我们得不到什么相关的数据包返回数据。</p>
<p>得到这些数据又什么好处呢，比如服务器在美国，我们就可以通过这个命令找到出中国出海线路，如果发现这条线路网络掉包较高可以切云服务器的地点。<br> 这里有ip查询网站感觉查的还比较准：<a href="https://tool.lu/ip/" rel="nofollow" data-token="3c4b50e12b4fba634b988186f959ddbb">https://tool.lu/ip/</a></p>
<p>如：<br> 这里有ip查询网站感觉查的还比较准：<a href="https://tool.lu/ip/" rel="nofollow" data-token="3c4b50e12b4fba634b988186f959ddbb">https://tool.lu/ip/</a><br> 我们可以得到上结果中大致节点：</p>
<pre><code>5 202.98.114.89 这个成都电信
7 202.97.36.221 广东广州
10 202.97.51.154 上海
12  218.30.53.6  美国
13 54.240.242.205 美国旧金山
</code></pre>
<p>得出网络访问的路径是成都-广州-上海-美国-美国旧金山</p>
<p>而有些时段的部分线路是很容易拥堵掉包的比如，成都联通到北京到日本线路。下午掉包率40%多非常恶心。</p>
<p>全球海底光缆图可参考：<br> <a href="https://blog.csdn.net/m0_37263637/article/details/85054485" rel="nofollow" data-token="a16a403feeca70dfdd1c15ae422651ab">https://blog.csdn.net/m0_37263637/article/details/85054485</a></p>
<h1><a id="4__98"></a>4 参考链接</h1>
<p><a href="http://www.cnblogs.com/peida/archive/2013/03/07/2947326.html" rel="nofollow" data-token="cae7c0ffbf0b1ff63b04d0e590bca944">http://www.cnblogs.com/peida/archive/2013/03/07/2947326.html</a><br> <a href="https://zh.wikipedia.org/wiki/Traceroute" rel="nofollow" data-token="161ee549cdf13107664eede4fa5db392">https://zh.wikipedia.org/wiki/Traceroute</a></p>
</div>

</div>
	</div>

	<footer class="amp-wp-article-footer">
			<div class="amp-wp-meta amp-wp-tax-category">
		Categories: <a href="https://uzzz.org/category/gongju/" rel="category tag">工具</a>	</div>

	</footer>
</article>

<footer class="amp-wp-footer">
	<div>
		<h2>有组织在!</h2>
		<a href="#top" class="back-to-top">Back to top</a>
	</div>
</footer>



</body>
</html>
