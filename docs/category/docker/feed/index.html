<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Docker &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/docker/feed" rel="self" type="application/rss+xml" />
	<link>https://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Wed, 03 Jul 2019 02:53:26 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>Docker &#8211; 有组织在!</title>
	<link>https://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>docker启动redis、并加载配置文件</title>
		<link>https://uzzz.org/article/2328.html</link>
				<pubDate>Wed, 03 Jul 2019 02:53:26 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[Docker]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2328.html</guid>
				<description><![CDATA[&#160; docker以配置文件的方式启动Redis，看似简单，其实暗藏杀机、填坑无数，let us look look. &#160; ◆◆Step：准备 redis.conf redis官网：https://redis.io/ 进入官网，直接下载 redis-xxx.tar.gz，然后解压得到redis.conf 杀机：请保持官网和docker中redis版本一致，不同版本redis的配置文件可能不一样。 &#160; &#160; ◆◆Step：本机上创建redis目录，放入配置文件和创建数据目录备用，并修改配置文件 1：创建redis目录 # cd /usr # 进入/usr目录 # mkdir redis # 创建redis目录 # cd redis # 进入redis目录 # 将准备好的redis.conf放进reids目录 # mkdir data # 创建redis数据目录 2：修改配置文件 开启redis验证&#160; &#160;&#160;requirepass 123 允许redis外地连接 杀机：务必将 daemonize yes注释起来，因为该配置和docker run中-d参数冲突，会导致容器一直启动失败 开启redis数据持久化&#160; appendonly yes &#160; &#160; ◆◆Step：docker下载redis镜像 因为准备的redis.conf是5.0.5版本的&#160; 所有docker下载镜像的版本也是5.0.5 # docker pull redis:5.0.5 查看下载好的redis镜像 # docker images &#160; &#160; ◆◆Step：启动redis&#160; # docker run -d -p 6379:6379 -v /usr/redis/redis.conf:/etc/redis/redis.conf -v /usr/redis/data:/data --name myredis redis:5.0.5 redis-server /etc/redis/redis.conf -d：容器后台运行，并返回容器ID -p：指定端口映射，格式为：主机（宿主）端口：容器端口 -v：绑定一个卷，资源映射 &#8211;name：给容器命名 redis-server&#160; /etc/redis/redis.conf：指定容器启动时执行的命令 &#160; &#160; ◆◆Step：进入容器，检验配置文件是否生效 查看容器ID # docker ps -a # 这个命令是查看所有容器，包括已停止的，如果redis容器是停止的，请仔细检查问题 # docker ps # 查看正在运行的容器 进入容器 # docker exec -it aed124a0ca6d /bin/bash &#160; 连接redis，检验redis是否开启了验证，若开启，说明配置文件起作用了，恭喜你成功了，否则，找问题吧 最后查看一下redis的数据目录映射有没有效果吧 &#160; tip：讲真，过程艰辛，技术并不难，但是坑实在太多了，希望你们可以顺利拿下]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p>&nbsp;</p>
<p id="docker%E4%BB%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E5%BC%8F%E5%90%AF%E5%8A%A8Redis%EF%BC%8C%E7%9C%8B%E4%BC%BC%E7%AE%80%E5%8D%95%EF%BC%8C%E5%85%B6%E5%AE%9E%E6%9A%97%E8%97%8F%E6%9D%80%E6%9C%BA%E3%80%81%E5%A1%AB%E5%9D%91%E6%97%A0%E6%95%B0%EF%BC%8Clet%20us%20look%20look.-toc" style="margin-left:80px;"><a href="#docker%E4%BB%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E5%BC%8F%E5%90%AF%E5%8A%A8Redis%EF%BC%8C%E7%9C%8B%E4%BC%BC%E7%AE%80%E5%8D%95%EF%BC%8C%E5%85%B6%E5%AE%9E%E6%9A%97%E8%97%8F%E6%9D%80%E6%9C%BA%E3%80%81%E5%A1%AB%E5%9D%91%E6%97%A0%E6%95%B0%EF%BC%8Clet%20us%20look%20look." rel="nofollow" data-token="43aa395e21ca5ede5ad9ec87e85b7d78">docker以配置文件的方式启动Redis，看似简单，其实暗藏杀机、填坑无数，let us look look.</a></p>
<hr>
<p>&nbsp;</p>
<p><strong>◆◆Step：准备 redis.conf</strong></p>
<p>redis官网：<a href="https://redis.io/" rel="nofollow" data-token="6743e7852a3486c68197a2ee7838acdf">https://redis.io/</a></p>
<p>进入官网，直接下载 redis-xxx.tar.gz，然后解压得到redis.conf</p>
<p><img alt="" class="has" height="186" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703100020319.png" width="317"></p>
<p><span style="color:#f33b45;">杀机：请保持官网和docker中redis版本一致，不同版本redis的配置文件可能不一样。</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>◆◆Step：本机上创建redis目录，放入配置文件和创建数据目录备用，并修改配置文件</strong></p>
<p>1：创建redis目录</p>
<pre class="has">
<code># cd /usr           # 进入/usr目录
# mkdir redis       # 创建redis目录
# cd redis          # 进入redis目录
                    # 将准备好的redis.conf放进reids目录
# mkdir data        # 创建redis数据目录</code></pre>
<p>2：修改配置文件</p>
<p>开启redis验证&nbsp; &nbsp;&nbsp;requirepass 123</p>
<p><img alt="" class="has" height="82" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703101256140.png" width="295"></p>
<p>允许redis外地连接</p>
<p><img alt="" class="has" height="57" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703101623984.png" width="367"></p>
<p><span style="color:#f33b45;">杀机：务必将 daemonize yes注释起来，因为该配置和docker run中-d参数冲突，会导致容器一直启动失败</span></p>
<p><img alt="" class="has" height="49" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703101750491.png" width="292"></p>
<p>开启redis数据持久化&nbsp; appendonly yes</p>
<p><img alt="" class="has" height="59" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703102040917.png" width="354"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>◆◆Step：docker下载redis镜像</strong></p>
<p>因为准备的redis.conf是5.0.5版本的&nbsp; 所有docker下载镜像的版本也是5.0.5</p>
<pre class="has">
<code># docker pull redis:5.0.5</code></pre>
<p>查看下载好的redis镜像</p>
<pre class="has">
<code># docker images</code></pre>
<p><img alt="" class="has" height="63" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/201907031031226.png" width="660"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>◆◆Step：启动redis&nbsp;</strong></p>
<pre class="has">
<code># docker run -d -p 6379:6379 -v /usr/redis/redis.conf:/etc/redis/redis.conf -v /usr/redis/data:/data --name myredis redis:5.0.5 redis-server /etc/redis/redis.conf</code></pre>
<p>-d：容器后台运行，并返回容器ID</p>
<p>-p：指定端口映射，格式为：主机（宿主）端口：容器端口</p>
<p>-v：绑定一个卷，资源映射</p>
<p>&#8211;name：给容器命名</p>
<p>redis-server&nbsp; /etc/redis/redis.conf：指定容器启动时执行的命令</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>◆◆Step：进入容器，检验配置文件是否生效</strong></p>
<p>查看容器ID</p>
<pre class="has">
<code># docker ps -a  # 这个命令是查看所有容器，包括已停止的，如果redis容器是停止的，请仔细检查问题
# docker ps     # 查看正在运行的容器</code></pre>
<p><img alt="" class="has" height="49" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703104209739.png" width="969"></p>
<p>进入容器</p>
<pre class="has">
<code># docker exec -it aed124a0ca6d /bin/bash</code></pre>
<p>&nbsp;<img alt="" class="has" height="52" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/2019070310460889.png" width="468"></p>
<p>连接redis，检验redis是否开启了验证，若开启，说明配置文件起作用了，恭喜你成功了，否则，找问题吧</p>
<p><img alt="" class="has" height="209" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703105030252.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3OTM2NTQy,size_16,color_FFFFFF,t_70" width="556"></p>
<p>最后查看一下redis的数据目录映射有没有效果吧</p>
<p><img alt="" class="has" height="303" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190703105934656.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3OTM2NTQy,size_16,color_FFFFFF,t_70" width="431"></p>
<p>&nbsp;</p>
<p>tip：讲真，过程艰辛，技术并不难，但是坑实在太多了，希望你们可以顺利拿下</p>
<hr id="hr-toc">
 </div>
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
