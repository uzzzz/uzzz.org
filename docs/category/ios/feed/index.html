<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>iOS &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/ios/feed" rel="self" type="application/rss+xml" />
	<link>https://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Sat, 15 Jun 2019 15:08:26 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>iOS &#8211; 有组织在!</title>
	<link>https://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>WWDC2019 &#8212;&#8212;iOS13适配（持续更新）</title>
		<link>https://uzzz.org/article/1333.html</link>
				<pubDate>Sat, 15 Jun 2019 15:08:26 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[iOS]]></category>
		<category><![CDATA[移动开发]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1333.html</guid>
				<description><![CDATA[第一、Web Content适配 https://developer.apple.com/videos/play/wwdc2019/511/ https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme 问题展示 先看两张图： 如上图所示，如果h5未适配dark模式，则在dark模式下原来的页面内容展示就就存在问题。 适配方法 这里主要介绍基于CSS样式的修改来适配web内容 首先，一定要声明当前支持的color-scheme有两种样式，这一句很重要，用东北话说就是“必须的” :root { color-scheme: light dark; } 适配的策略就是为两种color-scheme设置不同的颜色样式。 1、文本适配 如图一，它的CSS描述为 body { color: black; } h1 { color: #333; } .header { background-color: #593a78; color: white; } 这里相关的颜色样式都是写死的，所以dark模式下才会出现图二的情况。现在我们来看如何适配下面这段代码： h1 { color: #333; } .header { background-color: #593a78; color: white; } 然后可用如下方式改造： :root { color-scheme: light dark; --post-title-color: #333; --header-bg-color: #593a78; --header-txt-color: white; } h1 { color: var(--post-title-color); } .header { background-color: var(--header-bg-color); color: var(--header-txt-color); } 这里所做的工作实际上是抽象了颜色的值的setter和getter，即不同模式下的值统一定义，然后使用时通过var()去自动获取。 而结合@media与prefers-color-scheme,颜色值的定义可以更加清晰： @media (prefers-color-scheme: dark) { :root { --post-title-color: white; --header-bg-color: #513d66; --header-txt-color: #eee; } } 同理可以定义light模式下的色值。 2、图片适配 假设原文件有一幅图片资源，其CSS描述如下： &#60;img src="mojave-day.jpg"&#62; 那么，可以通过下面的方式来达到适配两种模式的目的： &#60;picture&#62; &#60;source srcset="mojave-night.jpg" media="(prefers-color-scheme: dark)"&#62; &#60;img src="mojave-day.jpg"&#62; &#60;/picture&#62; 3、动态内容适配 动态内容适配需要注意：WebKit提供了获取指定模式下需要适配的多媒体项的能力，以及不同模式间切换的通知，一般情况下，通过下面的方式可以完成适配： // Adapting dynamic content to dark mode with JavaScript let darkModeMediaQuery = window.matchMedia("(prefers-color-scheme: dark)"); function updateForDarkModeChange() { if (darkModeMediaQuery.matches) { ... } else { ... } } darkModeMediaQuery.addListener(updateForDarkModeChange); updateForDarkModeChange(); // Handle if Dark Mode is already active. 所以，这里很显然要处理light2dark和dark2light等情形。&#160; &#160; 如果需要更深度的定制，需h5与客户端评估是否需要注入js变量来判断当前模式。如果涉及服务端的直接适配，则可考虑在UA中添加识别信息。 4、小结： 使用 color-scheme 来声明支持的模式； 利用prefers-color-scheme来设置不同模式下的配置； 利用&#60;picture&#62; 标签设置不同模式下的图片； 利用var() 方法来适配不同模式下的变量取值； 动态内容适配视具体情况而定。 &#160;]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<h1>第一、Web Content适配</h1>
<p><a href="https://developer.apple.com/videos/play/wwdc2019/511/" rel="nofollow" data-token="db1a7093653219e7a45ee0938eb01598">https://developer.apple.com/videos/play/wwdc2019/511/</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme" rel="nofollow" data-token="ccdd9b15b3cc1cafc76ae55f1420d3e1">https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme</a></p>
<h2>问题展示</h2>
<p>先看两张图：</p>
<p><img alt="" class="has" height="500" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190615223143824.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTI0MTM5NTU=,size_16,color_FFFFFF,t_70" width="300"><img alt="" class="has" height="500" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190615223309706.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTI0MTM5NTU=,size_16,color_FFFFFF,t_70" width="300"></p>
<p>如上图所示，如果h5未适配dark模式，则在dark模式下原来的页面内容展示就就存在问题。</p>
<h2>适配方法</h2>
<p>这里主要介绍基于CSS样式的修改来适配web内容</p>
<p>首先，一定要声明当前支持的color-scheme有两种样式，这一句很重要，用东北话说就是“必须的”</p>
<pre class="has">
<code class="language-css">:root {
    color-scheme: light dark;
}</code></pre>
<p>适配的策略就是为两种color-scheme设置不同的颜色样式。</p>
<h3>1、文本适配</h3>
<p>如图一，它的CSS描述为</p>
<pre class="has">
<code class="language-css"> body {
     color: black;
 }
 h1 {
     color: #333;
 }
 .header {
    background-color: #593a78;
    color: white;
 }</code></pre>
<p>这里相关的颜色样式都是写死的，所以dark模式下才会出现图二的情况。现在我们来看如何适配下面这段代码：</p>
<pre class="has">
<code class="language-css">
h1 {
    color: #333;
}
.header {
    background-color: #593a78;
    color: white;
}</code></pre>
<p>然后可用如下方式改造：</p>
<pre class="has">
<code class="language-css">:root {
    color-scheme: light dark; 
    --post-title-color: #333;
    --header-bg-color: #593a78;
    --header-txt-color: white;
}


h1 {
    color: var(--post-title-color);
}
.header {
    background-color: var(--header-bg-color);
    color: var(--header-txt-color);
}</code></pre>
<p>这里所做的工作实际上是抽象了颜色的值的setter和getter，即不同模式下的值统一定义，然后使用时通过var()去自动获取。</p>
<p>而结合@media与prefers-color-scheme,颜色值的定义可以更加清晰：</p>
<pre class="has">
<code class="language-css">@media (prefers-color-scheme: dark) {
    :root {
        --post-title-color: white;
        --header-bg-color: #513d66;
        --header-txt-color: #eee;
    }
}</code></pre>
<p>同理可以定义light模式下的色值。</p>
<h3>2、图片适配</h3>
<p>假设原文件有一幅图片资源，其CSS描述如下：</p>
<pre class="has">
<code class="language-css">&lt;img src="mojave-day.jpg"&gt;</code></pre>
<p>那么，可以通过下面的方式来达到适配两种模式的目的：</p>
<pre class="has">
<code class="language-css">&lt;picture&gt;
    &lt;source srcset="mojave-night.jpg" media="(prefers-color-scheme: dark)"&gt;
    &lt;img src="mojave-day.jpg"&gt;
&lt;/picture&gt;</code></pre>
<h3>3、动态内容适配</h3>
<p>动态内容适配需要注意：WebKit提供了获取指定模式下需要适配的多媒体项的能力，以及不同模式间切换的通知，一般情况下，通过下面的方式可以完成适配：</p>
<pre class="has">
<code class="language-css">// Adapting dynamic content to dark mode with JavaScript
let darkModeMediaQuery = window.matchMedia("(prefers-color-scheme: dark)");
function updateForDarkModeChange() {
    if (darkModeMediaQuery.matches) {
        ...
    } else {
        ...
    }
}
darkModeMediaQuery.addListener(updateForDarkModeChange);
updateForDarkModeChange(); // Handle if Dark Mode is already active.</code></pre>
<p>所以，这里很显然要处理light2dark和dark2light等情形。&nbsp; &nbsp;</p>
<p>如果需要更深度的定制，需h5与客户端评估是否需要注入js变量来判断当前模式。如果涉及服务端的直接适配，则可考虑在UA中添加识别信息。</p>
<h3>4、小结：</h3>
<ul>
<li>使用 color-scheme 来声明支持的模式；</li>
<li>利用prefers-color-scheme来设置不同模式下的配置；</li>
<li>利用&lt;picture&gt; 标签设置不同模式下的图片；</li>
<li>利用var() 方法来适配不同模式下的变量取值；</li>
<li>动态内容适配视具体情况而定。</li>
</ul>
<p>&nbsp;</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>彻底解决IOS HTML页面上光标跳行、光标不跟随页面问题</title>
		<link>https://uzzz.org/article/3146.html</link>
				<pubDate>Wed, 05 Dec 2018 03:59:29 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[iOS]]></category>
		<category><![CDATA[前端]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/3146.html</guid>
				<description><![CDATA[&#160; 继：修复IOS上滑动HTML界面光标乱跳 声明：这里只是说明一种处理方法 继上一篇文章，处理IOS滑动时，光标不跟随页面滚动，处理方法是，监听touchmove事件，获取当focus的元素，使之失去光标；但是这种方法并不能真正的解决问题，比如，你进入页面，并不滑动页面，而是去点击屏幕可见区域最底下的输入框时，问题就出来了，如图： 这里说一下，网络上大多说是IOS上fixed定位，修改定位为absolute；或者是添加fastclick.js库，加速手机上tap事件的响应； 问题就出在这里，你确定你的页面是定位的因素？你确定添加了fastclick库就可以了？如果尝试了上面两种方法还不行，你可以接着往下看； 仔细观察页面，当你点击最后一行输入框时、滑动页面时，或者是弹框；你可以看到页面上的活动元素先聚焦再滚动；也就是说，activate元素的聚焦事件在页面滚动之前或者滚动完成之前就已经完成了，所以这时候页面滚动，而光标又不跟随滚动，就造成了光标跳行、错乱的问题。 解决方法： 一、输入框在聚焦的时候，会弹起软键盘；所以，我们监听软键盘弹起事件，在弹起事件后，进行dom重绘，但是这种必须要加延时，代码如下： document.body.addEventListener('focusin', function () { //软键盘弹起事件 var node = document.activeElement; //当前focus的dom元素 setTimeout(function () { if (node) { if (node.nodeName == "TEXTAREA" &#124;&#124; node.nodeName == 'INPUT') { //如果是input或textarea if (node.style.textShadow === '') { node.style.textShadow = 'rgba(0,0,0,0) 0 0 0'; //改变某个不可见样式，触发dom重绘 } else { node.style.textShadow = ''; } } } }, 1000); }); 二、监听屏幕滚动事件；是屏幕滚动，不是手指滑动的事件，因为我这里使用的是sencha Touch移动端框架，所以，可能会不适应，但是道理是一样的；代码如下： initialize: function () { var me = this; me.callParent(); me.element.on({ submit: 'onSubmit', scope: me }); var scrollable = this.getInitialConfig().scrollable; if (scrollable == null &#124;&#124; scrollable == false) { this.isScrollable = false; } else { this.isScrollable = true; } //添加scroll事件监听 me.getScrollable().getScroller().on({ scroll: 'onScroll', scope: me }); }, //添加scroll事件响应函数 onScroll: function () { var node = document.activeElement; //当前focus的dom元素 if (node) { if (node.nodeName == "TEXTAREA" &#124;&#124; node.nodeName == 'INPUT') { //如果是input或textarea if (node.style.textShadow === '') { node.style.textShadow = 'rgba(0,0,0,0) 0 0 0'; //改变某个不可见样式，触发dom重绘 } else { node.style.textShadow = ''; } } } }, 这里是修改sencha Touch formpanel容器的源码，添加了事件的监听 对于第二个方法，如果你使用的是其他的框架，同样的你需要做一些修改。但是道理是一样的 三、理论，未实现；同样是监听屏幕滚动事件，使用定时器，实时监听该页面scrollTop，如果scrollTop在改变，那么就说明页面在滚动，如果在滚动，就获取当前页面activate元素，使之重绘 最后说一下，为什么不能监听touchmove事件，因为我们在滑动屏幕时，并不是手指离开了屏幕，屏幕就停止滚动了，屏幕还会有一个关心滚动存在；所以，单单是监听touchmove并不能解决光标错乱、跳行问题。除非，当你手指离开时，屏幕立马停止滚动。所以还是监听屏幕滚动最为靠谱 补充：如果你在touchmove中处理了光标不跟随，也就是move时取消光标聚焦；这里你可以将touchmove注释掉，因为监听scroll处理后，光标便会跟随页面滚动]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p>&nbsp;</p>
<p>继：<a href="https://blog.csdn.net/qq_33571718/article/details/83512247" rel="nofollow" data-token="6b0953835e18cd4655e6c9f752e796e0">修复IOS上滑动HTML界面光标乱跳</a></p>
<p>声明：这里只是说明一种处理方法</p>
<p>继上一篇文章，处理IOS滑动时，光标不跟随页面滚动，处理方法是，监听touchmove事件，获取当focus的元素，使之失去光标；但是这种方法并不能真正的解决问题，比如，你进入页面，并不滑动页面，而是去点击屏幕可见区域最底下的输入框时，问题就出来了，如图：</p>
<p><img alt="" class="has" height="318" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20181205112000782.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzNTcxNzE4,size_16,color_FFFFFF,t_70" width="179"></p>
<p>这里说一下，网络上大多说是IOS上fixed定位，修改定位为absolute；或者是添加fastclick.js库，加速手机上tap事件的响应；</p>
<p>问题就出在这里，你确定你的页面是定位的因素？你确定添加了fastclick库就可以了？如果尝试了上面两种方法还不行，你可以接着往下看；</p>
<p>仔细观察页面，当你点击最后一行输入框时、滑动页面时，或者是弹框；你可以看到页面上的活动元素先聚焦再滚动；也就是说，activate元素的聚焦事件在页面滚动之前或者滚动完成之前就已经完成了，所以这时候页面滚动，而光标又不跟随滚动，就造成了光标跳行、错乱的问题。</p>
<p>解决方法：</p>
<p>一、输入框在聚焦的时候，会弹起软键盘；所以，我们监听软键盘弹起事件，在弹起事件后，进行dom重绘，但是这种必须要加延时，代码如下：</p>
<pre class="has">
<code class="language-javascript">            document.body.addEventListener('focusin', function () {  //软键盘弹起事件
                var node = document.activeElement; //当前focus的dom元素
                setTimeout(function () {
                    if (node) {
                        if (node.nodeName == "TEXTAREA" || node.nodeName == 'INPUT') { //如果是input或textarea
                            if (node.style.textShadow === '') {
                                node.style.textShadow = 'rgba(0,0,0,0) 0 0 0'; //改变某个不可见样式，触发dom重绘
                            } else {
                                node.style.textShadow = '';
                            }
                        }
                    }
                }, 1000);
            });</code></pre>
<p>二、监听屏幕滚动事件；是屏幕滚动，不是手指滑动的事件，因为我这里使用的是sencha Touch移动端框架，所以，可能会不适应，但是道理是一样的；代码如下：</p>
<pre class="has">
<code class="language-javascript">initialize: function () {
        var me = this;
        me.callParent();

        me.element.on({
            submit: 'onSubmit',
            scope: me
        });

        var scrollable = this.getInitialConfig().scrollable;
        if (scrollable == null || scrollable == false) {
            this.isScrollable = false;
        } else {
            this.isScrollable = true;
        }
        //添加scroll事件监听
        me.getScrollable().getScroller().on({
            scroll: 'onScroll',
            scope: me
        });
    },
    //添加scroll事件响应函数
    onScroll: function () {
        var node = document.activeElement; //当前focus的dom元素
        if (node) {
            if (node.nodeName == "TEXTAREA" || node.nodeName == 'INPUT') { //如果是input或textarea
                if (node.style.textShadow === '') {
                    node.style.textShadow = 'rgba(0,0,0,0) 0 0 0'; //改变某个不可见样式，触发dom重绘
                } else {
                    node.style.textShadow = '';
                }
            }
        }
    },</code></pre>
<p>这里是修改sencha Touch formpanel容器的源码，添加了事件的监听</p>
<p>对于第二个方法，如果你使用的是其他的框架，同样的你需要做一些修改。但是道理是一样的</p>
<p>三、理论，未实现；同样是监听屏幕滚动事件，使用定时器，实时监听该页面scrollTop，如果scrollTop在改变，那么就说明页面在滚动，如果在滚动，就获取当前页面activate元素，使之重绘</p>
<p>最后说一下，为什么不能监听touchmove事件，因为我们在滑动屏幕时，并不是手指离开了屏幕，屏幕就停止滚动了，屏幕还会有一个关心滚动存在；所以，单单是监听touchmove并不能解决光标错乱、跳行问题。除非，当你手指离开时，屏幕立马停止滚动。所以还是监听屏幕滚动最为靠谱</p>
<p><span style="color:#f33b45;">补充：如果你在touchmove中处理了光标不跟随，也就是move时取消光标聚焦；这里你可以将touchmove注释掉，因为监听scroll处理后，光标便会跟随页面滚动</span></p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>iOS9系统下使用UITextField的一个坑——内容从不可见到可见会多出一个空格</title>
		<link>https://uzzz.org/article/3495.html</link>
				<pubDate>Thu, 23 Feb 2017 09:15:39 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[iOS]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/3495.html</guid>
				<description><![CDATA[最近项目测试，在产品经理手机上发现一个问题——在UITextField输入密码后点击可见会发现光标往后移了一位即输入的内容多出一个空格。效果图如下： 然而我在自己测试过程中却没有发现这个问题，于是再次在我的测试机和模拟器上进行测试，在测试完所有模拟器和测试机后问题仍没有复现。于是想，可能是系统的问题，我的模拟器以及测试机都是iOS10.0的系统，而产品经理的手机系统是iOS9.2的，于是就又上网下载了9.0模拟器进行测试。果然，在9.0的模拟器上问题复现了。在上网查资料之后也找到了解决问题的方法，代码如下： &#160;NSString * text = _passwordField.text; &#160; &#160; _passwordField.text = @&#8221; &#8220;; &#160; &#160; _passwordField.text = text; &#160; &#160; _passwordField.secureTextEnt &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 在点击显示按钮的时候先将一个为空格的字符串赋值给textfield，再将textfield原来的内容赋值给textfield。]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p><span></span>最近项目测试，在产品经理手机上发现一个问题——在UITextField输入密码后点击可见会发现光标往后移了一位即输入的内容多出一个空格。效果图如下：</p>
<p><span><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20170223171251590?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDEwNTk2OQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></span></p>
<p><span><span><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20170223171313070?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMDEwNTk2OQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></span></span></p>
<p><span></span>然而我在自己测试过程中却没有发现这个问题，于是再次在我的测试机和模拟器上进行测试，在测试完所有模拟器和测试机后问题仍没有复现。于是想，可能是系统的问题，我的模拟器以及测试机都是iOS10.0的系统，而产品经理的手机系统是iOS9.2的，于是就又上网下载了9.0模拟器进行测试。果然，在9.0的模拟器上问题复现了。在上网查资料之后也找到了解决问题的方法，代码如下：</p>
<p><span></span></p>
<p style="font-size:11px;line-height:normal;font-family:'Microsoft YaHei';color:rgb(8,250,149);"> <span style="color:#ffffff;">&nbsp;</span><span style="color:#00b1ff;">NSString</span><span style="color:#ffffff;"> * text = </span><span>_passwordField</span><span style="color:#ffffff;">.</span><span style="color:#00b1ff;">text</span><span style="color:#ffffff;">;</span></p>
<p style="font-size:11px;line-height:normal;font-family:'Microsoft YaHei';color:rgb(8,250,149);"> <span style="color:#ffffff;">&nbsp; &nbsp; </span><span>_passwordField</span><span style="color:#ffffff;">.</span><span style="color:#00b1ff;">text</span><span style="color:#ffffff;"> = </span><span style="color:#ff4647;">@&#8221; &#8220;</span><span style="color:#ffffff;">;</span></p>
<p style="font-size:11px;line-height:normal;font-family:'Microsoft YaHei';color:rgb(8,250,149);"> <span style="color:#ffffff;">&nbsp; &nbsp; </span><span>_passwordField</span><span style="color:#ffffff;">.</span><span style="color:#00b1ff;">text</span><span style="color:#ffffff;"> = text;</span></p>
<p style="font-size:11px;line-height:normal;font-family:'Microsoft YaHei';color:rgb(0,177,255);"> <span style="color:#ffffff;">&nbsp; &nbsp; </span><span style="color:#08fa95;">_passwordField</span><span style="color:#ffffff;">.</span><span>secureTextEnt &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span> </span></span></p>
<p><span></span>在点击显示按钮的时候先将一个为空格的字符串赋值给textfield，再将textfield原来的内容赋值给textfield。</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>状态栏（UIStatus）的使用</title>
		<link>https://uzzz.org/article/2997.html</link>
				<pubDate>Mon, 22 Aug 2016 13:56:45 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[iOS]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2997.html</guid>
				<description><![CDATA[状态栏（UIStatus）的使用 状态栏（UIStatus）是指iPhone、iPad、iPod的顶部用于显示网络、时间、电量等的部分，它是高度为20的控件，状态栏的windowLevel为UIWindowLevelStatusBar，而window的windowLevel为UIWindowLevelNormal。所以一般情况下，状态栏位于window之上。 状态栏字体颜色设置 在老版的iOS中，状态栏永远都是白色风格。而在iOS7中我们可以根据需求修改每个viewController中状态栏的外观。 iOS中使用UIStatusBarStyle控制状态栏的字体颜色。在iOS7中，支持两种样式：暗色和亮色，默认情况下，状态栏显示是暗色。也就是说状态栏上的时间、电池指示器和Wi-Fi信号吸纳事为暗色。 UIStatusBarStyleDefault UIStatusBarStyleLightContent 对于状态栏字体颜色设置有三种方法： [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault]; 第一种方法（需单个设置）： —————》MainNavigationController.m - (UIStatusBarStyle)preferredStatusBarStyle { // return self.visibleViewController.preferredStatusBarStyle;此句要和下句一同使用才能改变状态栏的样式，注意只能改变单个； } ————》MovieViewController.m //修改状态栏的样式 1. (UIStatusBarStyle)preferredStatusBarStyle { return UIStatusBarStyleLightContent; } 第二种方法（全局）： 我们也可以使用UIApplication的statusBarStyle方法来设置状态栏，不过，首先需要停止使用View controller-base status bar appearance 。在info.plist文件中进行修改，添加一个新的key,名字为View controller-base status bar appearance，并将其值设置为NO。 然后可以使用下面的代码来设置状态栏德 风格了： [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleLightContent]; 第三种方法： 可以在info中Status bar style(UIStatusBarStyle)对应的Value设置为UIStatusBarStyleLightContent。 也可以在General中将Status Bar Style选择为Light。 状态栏的显示与隐藏 [[UIApplication sharedApplication] setStatusBarHidden:NO]; 可以在Info中将Status bar is initially hidden(UIStatusBarHidden)对应的Value设置为Yes。 也可以在General中将Hide status bar勾选：]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<h2 id="状态栏uistatus的使用">状态栏（UIStatus）的使用</h2>
<p>状态栏（UIStatus）是指iPhone、iPad、iPod的顶部用于显示网络、时间、电量等的部分，它是高度为20的控件，状态栏的windowLevel为UIWindowLevelStatusBar，而window的windowLevel为UIWindowLevelNormal。所以一般情况下，状态栏位于window之上。</p>
<ol>
<li>
<p>状态栏字体颜色设置 <br /> 在老版的iOS中，状态栏永远都是白色风格。而在iOS7中我们可以根据需求修改每个viewController中状态栏的外观。 <br /> iOS中使用UIStatusBarStyle控制状态栏的字体颜色。在iOS7中，支持两种样式：暗色和亮色，默认情况下，状态栏显示是暗色。也就是说状态栏上的时间、电池指示器和Wi-Fi信号吸纳事为暗色。</p>
<ul>
<li>UIStatusBarStyleDefault</li>
<li>UIStatusBarStyleLightContent <br /> 对于状态栏字体颜色设置有三种方法：</li>
</ul>
</li>
</ol>
<pre class="prettyprint"><code class=" hljs css"><span class="hljs-attr_selector">[[UIApplication sharedApplication]</span> <span class="hljs-tag">setStatusBarStyle</span><span class="hljs-pseudo">:UIStatusBarStyleDefault</span>];</code></pre>
<p>第一种方法（需单个设置）：</p>
<pre class="prettyprint"><code class=" hljs avrasm">—————》MainNavigationController<span class="hljs-preprocessor">.m</span>
- (UIStatusBarStyle)preferredStatusBarStyle
{
//    return self<span class="hljs-preprocessor">.visibleViewController</span><span class="hljs-preprocessor">.preferredStatusBarStyle</span><span class="hljs-comment">;此句要和下句一同使用才能改变状态栏的样式，注意只能改变单个；</span>
}

————》MovieViewController<span class="hljs-preprocessor">.m</span>
//修改状态栏的样式
 <span class="hljs-number">1.</span> (UIStatusBarStyle)preferredStatusBarStyle
{
    return UIStatusBarStyleLightContent<span class="hljs-comment">;</span>
}</code></pre>
<p>第二种方法（全局）： <br /> 我们也可以使用UIApplication的statusBarStyle方法来设置状态栏，不过，首先需要停止使用View controller-base status bar appearance 。在info.plist文件中进行修改，添加一个新的key,名字为View controller-base status bar appearance，并将其值设置为NO。 <br /> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20160822213510214" alt="这里写图片描述" title=""> <br /> 然后可以使用下面的代码来设置状态栏德 风格了：</p>
<pre class="prettyprint"><code class=" hljs css"><span class="hljs-attr_selector">[[UIApplication sharedApplication]</span>
<span class="hljs-tag">setStatusBarStyle</span><span class="hljs-pseudo">:UIStatusBarStyleLightContent</span>];
</code></pre>
<p>第三种方法： <br /> 可以在info中Status bar style(UIStatusBarStyle)对应的Value设置为UIStatusBarStyleLightContent。 <br /> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20160822214528210" alt="这里写图片描述" title=""></p>
<p>也可以在General中将Status Bar Style选择为Light。 <br /> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20160822214713726" alt="这里写图片描述" title=""></p>
<ol>
<li>状态栏的显示与隐藏</li>
</ol>
<pre class="prettyprint"><code class=" hljs css"><span class="hljs-attr_selector">[[UIApplication sharedApplication]</span> <span class="hljs-tag">setStatusBarHidden</span><span class="hljs-pseudo">:NO</span>];</code></pre>
<p>可以在Info中将Status bar is initially hidden(UIStatusBarHidden)对应的Value设置为Yes。 <br /> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20160822214956040" alt="这里写图片描述" title=""> <br /> 也可以在General中将Hide status bar勾选： <br /> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20160822215033970" alt="这里写图片描述" title=""></p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-526ced5128.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>iOS 彩色图片置灰，灰度图片</title>
		<link>https://uzzz.org/article/2721.html</link>
				<pubDate>Mon, 08 Aug 2016 10:14:36 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[iOS]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2721.html</guid>
				<description><![CDATA[理论依据： 所谓颜色或灰度级指黑白显示器中显示像素点的亮暗差别，在彩色显示器中表现为颜色的不同，灰度级越多，图像层次越清楚逼真。灰度级取决于每个像素对应的刷新 存储单元的位数和显示器本身的性能。如每个象素的颜色用16位 二进制数表示，我们就叫它16位图，它可以表达2的16次方即65536种颜色。如每一个象素采用24位二进制数表示，我们就叫它24位图，它可以表达2的24次方即16777216种颜色。 灰度就是没有色彩，RGB色彩分量全部相等。如果是一个二值灰度图象，它的象素值只能为0或1，我们说它的灰度级为2。用个例子来说明吧:一个256级灰度的图象，如果RGB三个量相同时，如：RGB(100,100,100)就代表灰度为100,RGB(50,50,50)代表灰度为50。 彩色图象的灰度其实在转化为黑白图像后的像素值（是一种广义的提法），转化的方法看应用的领域而定，一般按加权的方法转换，R， G，B 的比一般为3：6：1。 任何颜色都由红、绿、蓝 三原色组成，假如原来某点的颜色为RGB(R，G，B)，那么，我们可以通过下面几种方法，将其转换为灰度： 1. 浮点 算法：Gray=R*0.3+G*0.59+B*0.11 2.整数方法：Gray=(R*30+G*59+B*11)/100 3.移位方法：Gray =(R*77+G*151+B*28)&#62;&#62;8; 4. 平均值法：Gray=（R+G+B）/3; 5.仅取绿色：Gray=G； 通过上述任一种方法求得Gray后，将原来的RGB(R,G,B)中的R,G,B统一用Gray替换，形成新的颜色RGB(Gray,Gray,Gray)，用它替换原来的RGB(R,G,B)就是灰度图了。 综上所述，就有了面两种方法，其实也就算一种吧，仅供大家参考。 方法1： //UIImage: 去色功能的实现（图片灰色显示） &#8211; ( UIImage *)grayImage:( UIImage *)sourceImage { &#160;&#160;&#160; int width = sourceImage. size . width ; &#160;&#160;&#160; int height = sourceImage. size . height ; &#160;&#160;&#160; CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray (); &#160;&#160;&#160; CGContextRef context = CGBitmapContextCreate ( nil , width, height, 8 , 0 , colorSpace, kCGImageAlphaNone ); &#160;&#160;&#160; CGColorSpaceRelease (colorSpace); &#160;&#160;&#160; if (context == NULL ) { &#160;&#160;&#160;&#160;&#160;&#160;&#160; return nil ; &#160;&#160;&#160; } &#160;&#160;&#160; CGContextDrawImage (context, CGRectMake ( 0 , 0 , width, height), sourceImage. CGImage ); &#160;&#160;&#160; UIImage *grayImage = [ UIImage imageWithCGImage : CGBitmapContextCreateImage (context)]; &#160;&#160;&#160; CGContextRelease (context); &#160;&#160;&#160; return grayImage; } 方法2： &#8211; ( UIImage *)grayscaleImageForImage:( UIImage *)image { &#160;&#160;&#160; // Adapted from this thread: http://stackoverflow.com/questions/1298867/convert-image-to-grayscale &#160;&#160;&#160; const int RED = 1 ; &#160;&#160;&#160; const int GREEN = 2 ; &#160;&#160;&#160; const int BLUE = 3 ; &#160;&#160;&#160; &#160;&#160;&#160; // Create image rectangle with current image width/height &#160;&#160;&#160; CGRect imageRect = CGRectMake ( 0 , 0 , image. size . width *]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<div style="font-family:'Helvetica Neue';font-size:14px;">
   <span style="font-size:24px;"><span style="font-family:'Heiti SC Light';color:rgb(0,132,0);"></span></span>
  </div>
<div>
   <span style="font-family:'Heiti SC Light';font-size:24px;color:#008400;">理论依据：</span>
  </div>
<div>
   <span style="font-family:'Heiti SC Light';font-size:24px;color:#008400;"></span> </p>
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
      所谓颜色或灰度级指黑白显示器中显示像素点的亮暗差别，在彩色显示器中表现为颜色的不同，灰度级越多，图像层次越清楚逼真。灰度级取决于每个像素对应的刷新<br />
     <a href="http://baike.baidu.com/view/1223079.htm" rel="nofollow" style="color:rgb(19,110,194);text-decoration:none;" data-token="adf9fd6d102d2d5af96151c458c5abcc">存储单元</a>的位数和显示器本身的性能。如每个象素的颜色用16位<br />
     <a href="http://baike.baidu.com/view/1349.htm" rel="nofollow" style="color:rgb(19,110,194);text-decoration:none;" data-token="0a1876f830cf9e1170cfec65aa6b9198">二进制数</a>表示，我们就叫它16位图，它可以表达2的16次方即65536种颜色。如每一个象素采用24位二进制数表示，我们就叫它24位图，它可以表达2的24次方即16777216种颜色。
    </div>
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
      灰度就是没有色彩，RGB色彩分量全部相等。如果是一个二值灰度图象，它的象素值只能为0或1，我们说它的灰度级为2。用个例子来说明吧:一个256级灰度的图象，如果RGB三个量相同时，如：RGB(100,100,100)就代表灰度为100,RGB(50,50,50)代表灰度为50。
    </div>
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
      彩色图象的灰度其实在转化为黑白图像后的像素值（是一种广义的提法），转化的方法看应用的领域而定，一般按加权的方法转换，R， G，B 的比一般为3：6：1。
    </div>
<p> 任何颜色都由红、绿、蓝<br />
    <a href="http://baike.baidu.com/view/41629.htm" rel="nofollow" style="color:rgb(19,110,194);text-decoration:none;" data-token="652fa2841639f6e0ee0d7f068387b965">三原色</a>组成，假如原来某点的颜色为RGB(R，G，B)，那么，我们可以通过下面几种方法，将其转换为灰度：
   </div>
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
    <span style="text-indent:2em;">1.</span><br />
    <a href="http://baike.baidu.com/view/924477.htm" rel="nofollow" style="text-indent:2em;color:rgb(19,110,194);text-decoration:none;" data-token="7f7cdaa1ce286237f54fd3f87a29bed8">浮点</a><br />
    <span style="text-indent:2em;">算法：Gray=R*0.3+G*0.59+B*0.11</span>
   </div>
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
     2.整数方法：Gray=(R*30+G*59+B*11)/100
   </div>
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
     3.移位方法：Gray =(R*77+G*151+B*28)&gt;&gt;8;
   </div>
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
     4.<br />
    <a href="http://baike.baidu.com/view/1098098.htm" rel="nofollow" style="color:rgb(19,110,194);text-decoration:none;" data-token="00e4eaa9048ae832df0cf586785b2a64">平均值法</a>：Gray=（R+G+B）/3;
   </div>
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
     5.仅取绿色：Gray=G；
   </div>
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
     通过上述任一种方法求得Gray后，将原来的RGB(R,G,B)中的R,G,B统一用Gray替换，形成新的颜色RGB(Gray,Gray,Gray)，用它替换原来的RGB(R,G,B)就是灰度图了。
   </div>
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
    
   </div>
<div class="para" style="font-size:14px;color:rgb(51,51,51);text-indent:2em;line-height:24px;font-family:arial, '宋体', sans-serif;">
     综上所述，就有了面两种方法，其实也就算一种吧，仅供大家参考。
   </div>
<p>
  </div>
<div style="font-family:'Helvetica Neue';font-size:14px;">
   <span style="font-size:24px;"><span style="font-family:'Heiti SC Light';color:rgb(0,132,0);"><br /></span></span>
  </div>
<div style="font-family:'Helvetica Neue';font-size:14px;">
   <span style="font-size:24px;"><span style="font-family:'Heiti SC Light';color:rgb(0,132,0);">方法</span><span style="font-family:Menlo;color:rgb(0,132,0);">1</span><span style="font-family:'Heiti SC Light';color:rgb(0,132,0);">：</span></span>
  </div>
<div style="font-family:'Helvetica Neue';font-size:14px;">
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);">//UIImage:</span><br />
   <span style="font-size:12px;line-height:normal;font-family:'PingFang SC';color:rgb(0,132,0);">去色功能的实现（图片灰色显示）</span>
  </div>
<div style="font-family:'Helvetica Neue';font-size:14px;">
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">&#8211; (</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">UIImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">*)grayImage:(</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">UIImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">*)sourceImage {<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> int</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">width = sourceImage.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">size</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">width</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> int</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">height = sourceImage.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">size</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">height</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);"> CGColorSpaceRef</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> colorSpace =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGColorSpaceCreateDeviceGray</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">();<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);"> CGContextRef</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> context =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGBitmapContextCreate</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> (</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);">nil</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">, width, height,</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">8</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">,</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">0</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">, colorSpace,</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);">kCGImageAlphaNone</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">);<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGColorSpaceRelease</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(colorSpace);<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> if</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(context ==</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);">NULL</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">) {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> return</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> nil</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">;<br /> &nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGContextDrawImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(context,</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);">CGRectMake</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">0</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">,</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">0</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">, width, height), sourceImage.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">CGImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">);<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);"> UIImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> *grayImage = [</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">UIImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);">imageWithCGImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">:</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);">CGBitmapContextCreateImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(context)];<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGContextRelease</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(context);<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> return</span><br />
   <span><span style="font-size:12px;"><span style="font-family:Menlo;">grayImage;</span></span></span>
  </div>
<p>  <span style="font-family:'Helvetica Neue';font-size:14px;"></span> </p>
<div>
   <span style="font-size:12px;"><span style="font-family:Menlo;">}</span></span>
  </div>
<div>
   <span style="font-size:12px;"><span style="font-family:Menlo;"><br /></span></span>
  </div>
<div>
   <span style="font-size:24px;"><span style="font-family:'Heiti SC Light';color:rgb(0,132,0);">方法<span style="font-family:Menlo;">2</span></span><span style="font-family:'Heiti SC Light';color:rgb(0,132,0);">：</span></span>
  </div>
<div>
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">&#8211; (</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">UIImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">*)grayscaleImageForImage:(</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">UIImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">*)image {<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // Adapted from this thread: <a href="http://stackoverflow.com/questions/1298867/convert-image-to-grayscale" rel="nofollow" data-token="47e7bbfc0486860cd4c91cf497033f3c"> <span style="color:#1337ff;">http://stackoverflow.com/questions/1298867/convert-image-to-grayscale</span></a></span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> const</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> int</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">RED =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">1</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> const</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> int</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">GREEN =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">2</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> const</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> int</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">BLUE =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">3</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">;<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // Create image rectangle with current image width/height</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);"> CGRect</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> imageRect =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGRectMake</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">0</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">,</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">0</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">, image.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">size</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">width</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">* image.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">scale</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">, image.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">size</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">height</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">* image.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">scale</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">);<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> int</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">width = imageRect.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">size</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">width</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> int</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">height = imageRect.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">size</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">height</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">;<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // the pixels will be painted to this array</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);"> uint32_t</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> *pixels = (</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">uint32_t</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">*)</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> malloc</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(width * height *</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);">sizeof</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">uint32_t</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">));<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // clear the pixels so any transparency is preserved</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> memset</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(pixels,</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">0</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">, width * height *</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);">sizeof</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">uint32_t</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">));<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);"> CGColorSpaceRef</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> colorSpace =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGColorSpaceCreateDeviceRGB</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">();<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // create a context with RGBA pixels</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);"> CGContextRef</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> context =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGBitmapContextCreate</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(pixels, width, height,</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">8</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">, width *</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);">sizeof</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">uint32_t</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">), colorSpace,</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> kCGBitmapByteOrder32Little</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> |</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> kCGImageAlphaPremultipliedLast</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">);<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // paint the bitmap to our context which will fill in the pixels array</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGContextDrawImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(context,</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);">CGRectMake</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">0</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">,</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">0</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">, width, height), [image</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);">CGImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">]);<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> for</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);">int</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">y =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);"> 0</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">; y &lt; height; y++) {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> for</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);">int</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">x =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);"> 0</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">; x &lt; width; x++) {<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);"> uint8_t</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> *rgbaPixel = (</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">uint8_t</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">*) &amp;pixels[y * width + x];<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // convert to grayscale using recommended method: <a href="http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale" rel="nofollow" data-token="c22179a47b774047cc2a612bf2a73d1b"> <span style="color:#1337ff;">http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale</span></a></span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);"> uint32_t</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> gray =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);"> 0.3</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">* rgbaPixel[RED] +</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">0.59</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">* rgbaPixel[GREEN] +</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(39,42,216);">0.11</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">* rgbaPixel[BLUE];<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // set the pixels to gray</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rgbaPixel[RED] = gray;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rgbaPixel[GREEN] = gray;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rgbaPixel[BLUE] = gray;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp; }<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // create a new CGImageRef from our context with the modified pixels</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);"> CGImageRef</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> imageRef =</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGBitmapContextCreateImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(context);<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // we&#8217;re done with the context, color space, and pixels</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGContextRelease</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(context);<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGColorSpaceRelease</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(colorSpace);<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> free</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(pixels);<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // make a new UIImage to return</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);"> UIImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"> *resultUIImage = [</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">UIImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);">imageWithCGImage</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">:imageRef</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);">scale</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">:image.</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(112,61,170);">scale</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);">orientation</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">:</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);">UIImageOrientationUp</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">];<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(0,132,0);"> // we&#8217;re done with image now too</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;"><br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(61,29,129);"> CGImageRelease</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;">(imageRef);<br /> &nbsp;&nbsp;&nbsp;<br /> &nbsp;&nbsp;&nbsp;</span><br />
   <span style="font-size:12px;line-height:normal;font-family:Menlo;color:rgb(187,44,162);"> return</span><br />
   <span><span style="font-size:12px;"><span style="font-family:Menlo;">resultUIImage;</span></span></span>
  </div>
<div style="font-family:Menlo;font-size:12px;">
   }
  </div>
<div style="font-family:Menlo;font-size:12px;">
   <span style="line-height:normal;"></span>
  </div>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>SpriteBuilder实现2D精灵光影明暗反射效果(一)</title>
		<link>https://uzzz.org/article/2778.html</link>
				<pubDate>Tue, 17 Nov 2015 08:50:08 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[iOS]]></category>
		<category><![CDATA[游戏开发]]></category>
		<category><![CDATA[移动开发]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2778.html</guid>
				<description><![CDATA[其实不用3D建模,用2D的图像就可以模拟3D场景中光照反射的效果. 这里我们不得不提到一个normalMap(法线图)的概念,请各位童鞋自己度娘吧,简单来说它可以使得2D表面生成一定细节程度的光照方向和反射效果. 我们首先要制作精灵的法线贴图,至于怎么做,懂3D制图的童鞋应该都知道,有专门的软件.不过对于本猫猪这种图痴来说,也有简单容易上手的工具,名字为SpriteIlluminator,可以到其官网下载: https://www.codeandweb.com/spriteilluminator 软件非常不错,可惜要收费 ;( 不过有7天的试用期限,以下是软件运行界面: 至于怎么用,大家可以看其简明教程: https://www.codeandweb.com/blog/2015/03/17/cocos2d-dynamic-lighting-tutorial 而在这里可以看到更多的教程: https://www.codeandweb.com/blog 以下就是其教程中,app完成后实际的效果: 还是相当不错的,我们在下篇中就来简单说说用SpriteBuilder如何完成类似效果.]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div id="content_views" class="markdown_views prism-dracula">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>其实不用3D建模,用2D的图像就可以模拟3D场景中光照反射的效果.</p>
<p>这里我们不得不提到一个normalMap(法线图)的概念,请各位童鞋自己度娘吧,简单来说它可以使得2D表面生成一定细节程度的光照方向和反射效果.</p>
<p>我们首先要制作精灵的法线贴图,至于怎么做,懂3D制图的童鞋应该都知道,有专门的软件.不过对于本猫猪这种图痴来说,也有简单容易上手的工具,名字为SpriteIlluminator,可以到其官网下载:</p>
<p><a href="https://www.codeandweb.com/spriteilluminator" rel="nofollow" data-token="1e74005d4cf607e4e9b0f0f7745e58cd">https://www.codeandweb.com/spriteilluminator</a></p>
<p>软件非常不错,可惜要收费 ;( 不过有7天的试用期限,以下是软件运行界面:</p>
<p><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20151117164426528" alt="这里写图片描述" title=""></p>
<p>至于怎么用,大家可以看其简明教程:</p>
<p><a href="https://www.codeandweb.com/blog/2015/03/17/cocos2d-dynamic-lighting-tutorial" rel="nofollow" data-token="ed028573a36428be7ecfcbe34eb315c4">https://www.codeandweb.com/blog/2015/03/17/cocos2d-dynamic-lighting-tutorial</a></p>
<p>而在这里可以看到更多的教程:</p>
<p><a href="https://www.codeandweb.com/blog" rel="nofollow" data-token="d118dbf668597ffcffa2d67665775aa9">https://www.codeandweb.com/blog</a></p>
<p>以下就是其教程中,app完成后实际的效果:</p>
<p><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20151117164805199" alt="这里写图片描述" title=""></p>
<p><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20151117164817118" alt="这里写图片描述" title=""></p>
<p>还是相当不错的,我们在下篇中就来简单说说用SpriteBuilder如何完成类似效果.</p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-526ced5128.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>IOS使用navigationController跳转到下一页面黑屏问题。</title>
		<link>https://uzzz.org/article/3255.html</link>
				<pubDate>Sun, 02 Aug 2015 14:29:08 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[iOS]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/3255.html</guid>
				<description><![CDATA[最近公司给公司做个ios项目，由于刚接触到oc，技术也比较菜，遇到问题，解决了好长时间，特此记下。 之前跳转使用如下语句，跳转成功后只有标题，下面是黑屏：&#160;&#160; &#160; &#160;&#160;QHProCatalogController *viewController = [[QHProCatalogControlleralloc]init]; &#160; &#160; self.navigationItem.title=@&#8221;返回&#8220;; &#160; &#160; NSLog(@&#8221;nav=%@&#8221;,self.navigationController); &#160; &#160; [self.navigationControllerpushViewController:viewController animated:YES]; 现在修改成如下语句解决问题： &#160; &#160;&#160;QHProCatalogController *view = [self.storyboardinstantiateViewControllerWithIdentifier:@&#8221;procatalog&#8221;]; &#160; &#160; self.navigationItem.title=@&#8221;返回&#8220;; &#160; &#160; [self.navigationControllerpushViewController:view animated:YES]; instantiateViewControllerWithIdentifier:@&#8221;procatalog&#8221;这里是storyboard id是procatalog。 如此问题即可解决。]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p>最近公司给公司做个ios项目，由于刚接触到oc，技术也比较菜，遇到问题，解决了好长时间，特此记下。</p>
<p>之前跳转使用如下语句，跳转成功后只有标题，下面是黑屏：<span style="color:rgb(0,143,0);font-family:Menlo;font-size:11px;">&nbsp;&nbsp;</span></p>
<p><span style="color:rgb(0,143,0);font-family:Menlo;font-size:11px;"></span></p>
<p style="font-size:11px;font-family:Menlo;color:rgb(52,149,175);"> <span style="color:#000000;">&nbsp; &nbsp;&nbsp;</span>QHProCatalogController<span style="color:#000000;"> *viewController = [[</span>QHProCatalogController<span style="color:#000000;"></span>alloc<span style="color:#000000;">]</span>init<span style="color:#000000;">];</span></p>
<p style="font-size:11px;font-family:Menlo;color:rgb(52,149,175);"> <span style="color:#000000;">&nbsp; &nbsp; </span><span style="color:#0433ff;">self</span><span style="color:#000000;">.</span>navigationItem<span style="color:#000000;">.</span>title<span style="color:#000000;">=</span><span style="color:#b4261a;">@&#8221;</span><span style="font-family:'Heiti SC Light';color:rgb(180,38,26);">返回</span><span style="color:#b4261a;">&#8220;</span><span style="color:#000000;">;</span></p>
<p style="font-size:11px;font-family:Menlo;color:rgb(52,149,175);"> <span style="color:#000000;">&nbsp; &nbsp; </span>NSLog<span style="color:#000000;">(</span><span style="color:#b4261a;">@&#8221;nav=%@&#8221;</span><span style="color:#000000;">,</span><span style="color:#0433ff;">self</span><span style="color:#000000;">.</span>navigationController<span style="color:#000000;">);</span></p>
<p style="font-size:11px;font-family:Menlo;color:rgb(52,149,175);"> <span style="color:#000000;">&nbsp; &nbsp; [</span><span style="color:#0433ff;">self</span><span style="color:#000000;">.</span>navigationController<span style="color:#000000;"></span>pushViewController<span style="color:#000000;">:viewController </span>animated<span style="color:#000000;">:</span><span style="color:#0433ff;">YES</span><span style="color:#000000;">];</span></p>
<p></p>
<p><span style="font-family:Menlo;color:#008f00;"><span style="font-size:11px;">现在修改成如下语句解决问题：</span></span></p>
<p><span style="font-family:Menlo;color:#008f00;"><span style="font-size:11px;"></span></span></p>
<p style="font-size:11px;font-family:Menlo;color:rgb(52,149,175);"> <span style="color:#000000;">&nbsp; &nbsp;&nbsp;</span>QHProCatalogController<span style="color:#000000;"> *view = [</span><span style="color:#0433ff;">self</span><span style="color:#000000;">.</span>storyboard<span style="color:#000000;"></span>instantiateViewControllerWithIdentifier<span style="color:#000000;">:</span><span style="color:#b4261a;">@&#8221;procatalog&#8221;</span><span style="color:#000000;">];</span></p>
<p style="font-size:11px;font-family:Menlo;color:rgb(52,149,175);"> <span style="color:#000000;">&nbsp; &nbsp; </span><span style="color:#0433ff;">self</span><span style="color:#000000;">.</span>navigationItem<span style="color:#000000;">.</span>title<span style="color:#000000;">=</span><span style="color:#b4261a;">@&#8221;</span><span style="font-family:'Heiti SC Light';color:rgb(180,38,26);">返回</span><span style="color:#b4261a;">&#8220;</span><span style="color:#000000;">;</span></p>
<p style="font-size:11px;font-family:Menlo;color:rgb(52,149,175);"> <span style="color:#000000;">&nbsp; &nbsp; [</span><span style="color:#0433ff;">self</span><span style="color:#000000;">.</span>navigationController<span style="color:#000000;"></span>pushViewController<span style="color:#000000;">:view </span>animated<span style="color:#000000;">:</span><span style="color:#0433ff;">YES</span><span style="color:#000000;">];</span></p>
<p></p>
<p><span style="font-family:Menlo;color:#008f00;"><span style="font-size:11px;"><br /></span></span></p>
<p><span style="color:rgb(52,149,175);font-family:Menlo;font-size:11px;">instantiateViewControllerWithIdentifier</span><span style="font-family:Menlo;font-size:11px;">:</span><span style="font-family:Menlo;font-size:11px;color:rgb(180,38,26);">@&#8221;procatalog&#8221;</span><span style="font-family:Menlo;font-size:11px;">这里是storyboard id是procatalog。</span></p>
<p><span style="font-family:Menlo;"><span style="font-size:11px;">如此问题即可解决。</span></span></p>
</p></div>
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
