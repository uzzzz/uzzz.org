<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>threejs &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/threejs/feed" rel="self" type="application/rss+xml" />
	<link>https://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Tue, 18 Dec 2018 02:41:03 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>threejs &#8211; 有组织在!</title>
	<link>https://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>threejs基本图形之网络模型</title>
		<link>https://uzzz.org/article/2538.html</link>
				<pubDate>Tue, 18 Dec 2018 02:41:03 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[threejs]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2538.html</guid>
				<description><![CDATA[现在就是若干的常用图形使用一览。 我们要记住一个核心点，那就是所有几何体都是由若干个三角形组成的。切记。非常核心！！！ &#60;!DOCTYPE html&#62; &#60;html&#62; &#160;&#160; &#160;&#60;head&#62; &#160;&#160; &#160;&#160;&#160; &#160;&#60;meta charset=&#8221;UTF-8&#8243;&#62; &#160;&#160; &#160;&#160;&#160; &#160;&#60;title&#62;threejs基本图形之网络模型&#60;/title&#62; &#160;&#160; &#160;&#160;&#160; &#160;&#60;script src=&#8221;../js/three.js&#8221;&#62;&#60;/script&#62; &#160;&#160; &#160;&#60;/head&#62; &#160;&#160; &#160;&#60;body&#62; &#160;&#160; &#160;&#160;&#160; &#160;&#60;!&#8211;&#160;&#160; &#160;点、线、面 &#160;&#160; &#160;&#160;&#160; &#160;首先，所有图形都是由点、线或面构成，所以有： &#160;&#160; &#160;&#160;&#160; &#160;Points：点或点云，可以用点或点云表示图形 &#160;&#160; &#160;&#160;&#160; &#160;Line/LineSegments：直线和虚线，可以用线或线团表示图形 &#160;&#160; &#160;&#160;&#160; &#160;Mesh：网格模型，可以用若干三角面表示图形 &#160;&#160; &#160;&#8211;&#62; &#160;&#160; &#160;&#160;&#160; &#160;&#60;!&#8211; &#160;&#160; &#160;&#160;&#160; &#160; &#160;&#160; &#160; &#160;&#160; &#160; &#160;&#160; &#160;&#8211;&#62; &#160;&#160; &#160;&#160;&#160; &#160;&#60;canvas id=&#8221;cc&#8221;&#62;&#60;/canvas&#62; &#160;&#160; &#160;&#160;&#160; &#160;&#60;script type=&#8221;text/javascript&#8221;&#62; &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;// 创建一个场景，它将保存我们所有的元素，如物体、照相机和灯光。 &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;var scene = new THREE.Scene(); &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;// 创建一个摄像机，它定义了我们所处的位置. &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000); &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;// 创建渲染并设置大小 指定渲染canvas对象 &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;var renderer = new THREE.WebGLRenderer({ &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;canvas: document.querySelector(&#8220;#cc&#8221;) &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;}); &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;renderer.setClearColor(0xEEEEEE); &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;renderer.setSize(window.innerWidth, window.innerHeight); &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;//创建一个xyz坐标轴，方便初学者理解三维坐标 &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;var axes = new THREE.AxesHelper(20); &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;scene.add(axes); &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;//创建网格模型 &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160; &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;var sphereGeometry = new THREE.CubeGeometry(10, 20, 20);//我们就创建个立方体。 &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;var material = new THREE.MeshBasicMaterial &#160;({color:Math.random()*0xffffff})//基础材质 &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;var cube = new THREE.Mesh(sphereGeometry,material) &#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160; &#160;&#160;]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p>现在就是若干的常用图形使用一览。</p>
<p>我们要记住一个核心点，那就是所有几何体都是由若干个三角形组成的。切记。非常核心！！！</p>
<p>&lt;!DOCTYPE html&gt;<br /> &lt;html&gt;</p>
<p>&nbsp;&nbsp; &nbsp;&lt;head&gt;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;meta charset=&#8221;UTF-8&#8243;&gt;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;title&gt;threejs基本图形之网络模型&lt;/title&gt;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;script src=&#8221;../js/three.js&#8221;&gt;&lt;/script&gt;<br /> &nbsp;&nbsp; &nbsp;&lt;/head&gt;</p>
<p>&nbsp;&nbsp; &nbsp;&lt;body&gt;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;!&#8211;&nbsp;&nbsp; &nbsp;点、线、面<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;首先，所有图形都是由点、线或面构成，所以有：<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Points：点或点云，可以用点或点云表示图形<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Line/LineSegments：直线和虚线，可以用线或线团表示图形<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Mesh：网格模型，可以用若干三角面表示图形<br /> &nbsp;&nbsp; &nbsp;&#8211;&gt;</p>
<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;!&#8211;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br /> &nbsp;&nbsp; &nbsp;<br /> &nbsp;&nbsp; &nbsp;<br /> &nbsp;&nbsp; &nbsp;&#8211;&gt;</p>
<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;canvas id=&#8221;cc&#8221;&gt;&lt;/canvas&gt;</p>
<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;script type=&#8221;text/javascript&#8221;&gt;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// 创建一个场景，它将保存我们所有的元素，如物体、照相机和灯光。<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var scene = new THREE.Scene();</p>
<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// 创建一个摄像机，它定义了我们所处的位置.<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);</p>
<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// 创建渲染并设置大小 指定渲染canvas对象<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var renderer = new THREE.WebGLRenderer({<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;canvas: document.querySelector(&#8220;#cc&#8221;)<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;});</p>
<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;renderer.setClearColor(0xEEEEEE);<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;renderer.setSize(window.innerWidth, window.innerHeight);</p>
<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//创建一个xyz坐标轴，方便初学者理解三维坐标<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var axes = new THREE.AxesHelper(20);<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;scene.add(axes);</p>
<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//创建网格模型<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var sphereGeometry = new THREE.CubeGeometry(10, 20, 20);//我们就创建个立方体。<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var material = new THREE.MeshBasicMaterial &nbsp;({color:Math.random()*0xffffff})//基础材质<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;var cube = new THREE.Mesh(sphereGeometry,material)<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;scene.add(cube)<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//我们的网格模型就搞成了。</p>
<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//设置相机位置<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;camera.position.x = -30;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;camera.position.y = 40;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;camera.position.z = 30;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;camera.lookAt(scene.position);</p>
<p>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// 执行一次渲染器，GPU渲染成图像，绘制到canvas里面呈现<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;const draw = function(){<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;requestAnimationFrame(draw)//不断绘制<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;renderer.render(scene, camera);//渲染<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;cube.rotation.y+=0.01//网格模型旋转<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;draw()<br /> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&lt;/script&gt;<br /> &nbsp;&nbsp; &nbsp;&lt;/body&gt;</p>
<p>&lt;/html&gt;</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Three.js &#8211; MeshLambertMaterial 用于暗淡不光亮表面的材质</title>
		<link>https://uzzz.org/article/2910.html</link>
				<pubDate>Tue, 07 Aug 2018 02:02:48 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[threejs]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2910.html</guid>
				<description><![CDATA[这种材质，可以创建看上去并不光亮（不具有光滑度）的表面，例如墙体等。该材质会对场景中的光源产生反应，并且该材质自身也会发出颜色，自身发出的颜色不受环境的影响。 示例：https://ithanmang.gitee.io/threejs/home/201808/20180807/01-meshLambertMaterial.html 基础材质中很多属性，它基本上都具有，不同的是，它具有一个自发光的属性emissive，可以设置自发光的颜色、强度、以及贴图属性。 它的color属性是漫反射的颜色，默认为白色。 示例代码 &#60;!DOCTYPE html&#62; &#60;html lang="en"&#62; &#60;head&#62; &#60;meta charset="UTF-8"&#62; &#60;title&#62;MeshLambertMaterial 暗淡并不光亮的材质&#60;/title&#62; &#60;style&#62; body { margin: 0; overflow: hidden; /*溢出隐藏*/ } &#60;/style&#62; &#60;script src="../../libs/build/three-r93.min.js"&#62;&#60;/script&#62; &#60;script src="../../libs/examples/js/controls/OrbitControls.js"&#62;&#60;/script&#62; &#60;script src="../../libs/examples/js/libs/dat.gui.min.js"&#62;&#60;/script&#62; &#60;script src="../../libs/examples/js/libs/stats.min.js"&#62;&#60;/script&#62; &#60;script src="../../libs/examples/js/Detector.js"&#62;&#60;/script&#62; &#60;/head&#62; &#60;body&#62; &#60;script&#62; let stats = initStats(); let scene, camera, renderer, controls, guiControls; let directionalLightHelper; // 场景 function initScene() { scene = new THREE.Scene(); scene.background = new THREE.Color(0xB0E2FF); scene.fog = new THREE.Fog(scene.background, 1, 5000); } // 相机 function initCamera() { camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 5000); camera.position.set(0, 0, 250); camera.lookAt(new THREE.Vector3(0, 0, 0)); } // 渲染器 function initRenderer() { renderer = new THREE.WebGLRenderer({antialias: true}); // 设置渲染器的像素比例，按照设备 renderer.setPixelRatio(window.devicePixelRatio); // 渲染范围 renderer.setSize(window.innerWidth, window.innerHeight); // 开启阴影支持 renderer.shadowMap.enabled = true; // 阴影类型 renderer.shadowMap.type = THREE.PCFSoftShadowMap; document.body.appendChild(renderer.domElement); } // 灯光 let ambientLight; let directionalLight; function initLight() { ambientLight = new THREE.AmbientLight(0xffffff); scene.add(ambientLight); directionalLight = new THREE.DirectionalLight(0xffffff, 0.2); directionalLight.position.set(-50, 50, 10); directionalLight.castShadow = true; directionalLight.shadow.mapSize.width = 1024; directionalLight.shadow.mapSize.height = 1024; // 为光线设置阴影属性 directionalLight.shadow.camera.left = -50; directionalLight.shadow.camera.right = 50; directionalLight.shadow.camera.top = 50; directionalLight.shadow.camera.bottom = -50; directionalLight.shadow.camera.far = 3500; // 偏差率 directionalLight.shadow.bias = -0.001; scene.add(directionalLight); directionalLightHelper = new THREE.DirectionalLightHelper(directionalLight, 10); scene.add(directionalLightHelper);]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>这种材质，可以创建看上去并不光亮（不具有光滑度）的表面，例如墙体等。该材质会对场景中的光源产生反应，并且该材质自身也会发出颜色，自身发出的颜色不受环境的影响。<br /> 示例：https://ithanmang.gitee.io/threejs/home/201808/20180807/01-meshLambertMaterial.html<br /> 基础材质中很多属性，它基本上都具有，不同的是，它具有一个自发光的属性<strong>emissive</strong>，可以设置自发光的颜色、强度、以及贴图属性。<br /> 它的<strong>color</strong>属性是漫反射的颜色，默认为白色。</p>
<h4><a id="_4"></a>示例代码</h4>
<pre><code class="prism language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>MeshLambertMaterial 暗淡并不光亮的材质<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
        body <span class="token punctuation">{</span>
            margin<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            overflow<span class="token punctuation">:</span> hidden<span class="token punctuation">;</span> <span class="token comment">/*溢出隐藏*/</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../../libs/build/three-r93.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../../libs/examples/js/controls/OrbitControls.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../../libs/examples/js/libs/dat.gui.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../../libs/examples/js/libs/stats.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../../libs/examples/js/Detector.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>

    <span class="token keyword">let</span> stats <span class="token operator">=</span> <span class="token function">initStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> scene<span class="token punctuation">,</span> camera<span class="token punctuation">,</span> renderer<span class="token punctuation">,</span> controls<span class="token punctuation">,</span> guiControls<span class="token punctuation">;</span>
    <span class="token keyword">let</span> directionalLightHelper<span class="token punctuation">;</span>

    <span class="token comment">// 场景</span>
    <span class="token keyword">function</span> <span class="token function">initScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scene<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token number">0xB0E2FF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scene<span class="token punctuation">.</span>fog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Fog</span><span class="token punctuation">(</span>scene<span class="token punctuation">.</span>background<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 相机</span>
    <span class="token keyword">function</span> <span class="token function">initCamera</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 渲染器</span>
    <span class="token keyword">function</span> <span class="token function">initRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置渲染器的像素比例，按照设备</span>
        renderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 渲染范围</span>
        renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 开启阴影支持</span>
        renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// 阴影类型</span>
        renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>PCFSoftShadowMap<span class="token punctuation">;</span>

        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 灯光</span>
    <span class="token keyword">let</span> ambientLight<span class="token punctuation">;</span>
    <span class="token keyword">let</span> directionalLight<span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">initLight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        ambientLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ambientLight<span class="token punctuation">)</span><span class="token punctuation">;</span>

        directionalLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>DirectionalLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        directionalLight<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        directionalLight<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span>
        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>mapSize<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span>

        <span class="token comment">// 为光线设置阴影属性</span>
        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">;</span>
        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">;</span>

        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>far <span class="token operator">=</span> <span class="token number">3500</span><span class="token punctuation">;</span>
        <span class="token comment">// 偏差率</span>
        directionalLight<span class="token punctuation">.</span>shadow<span class="token punctuation">.</span>bias <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.001</span><span class="token punctuation">;</span>
        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>directionalLight<span class="token punctuation">)</span><span class="token punctuation">;</span>

        directionalLightHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>DirectionalLightHelper</span><span class="token punctuation">(</span>directionalLight<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>directionalLightHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 控制器</span>
    <span class="token keyword">function</span> <span class="token function">initControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span>camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 添加惯性</span>
        controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// 最大偏移角度</span>
        controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> <span class="token number">0.49</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
        <span class="token comment">// 旋转速度</span>
        controls<span class="token punctuation">.</span>rotateSpeed <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">;</span>
        <span class="token comment">// 最大可视距离</span>
        controls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
        <span class="token comment">// 最小可视距离</span>
        controls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 调试插件</span>
    <span class="token keyword">function</span> <span class="token function">initGui</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        guiControls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">this</span><span class="token punctuation">.</span>ambientColor <span class="token operator">=</span> ambientLight<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>directionalLight <span class="token operator">=</span> directionalLight<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>opacity <span class="token operator">=</span> sphere<span class="token punctuation">.</span>material<span class="token punctuation">.</span>opacity<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>transparent <span class="token operator">=</span> sphere<span class="token punctuation">.</span>material<span class="token punctuation">.</span>transparent<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> sphere<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>emissive <span class="token operator">=</span> sphere<span class="token punctuation">.</span>material<span class="token punctuation">.</span>emissive<span class="token punctuation">.</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>wireframe <span class="token operator">=</span> sphere<span class="token punctuation">.</span>material<span class="token punctuation">.</span>wireframe<span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> gui <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">dat<span class="token punctuation">.</span>GUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        gui<span class="token punctuation">.</span><span class="token function">addColor</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'ambientColor'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            ambientLight<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        gui<span class="token punctuation">.</span><span class="token function">addColor</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'directionalLight'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            directionalLight<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> materialFolder <span class="token operator">=</span> gui<span class="token punctuation">.</span><span class="token function">addFolder</span><span class="token punctuation">(</span><span class="token string">'MeshLambertMaterial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        materialFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'opacity'</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            sphere<span class="token punctuation">.</span>material<span class="token punctuation">.</span>opacity <span class="token operator">=</span> e<span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        materialFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'transparent'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            sphere<span class="token punctuation">.</span>material<span class="token punctuation">.</span>transparent <span class="token operator">=</span> e<span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        materialFolder<span class="token punctuation">.</span><span class="token function">addColor</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'color'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            sphere<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        materialFolder<span class="token punctuation">.</span><span class="token function">addColor</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'emissive'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            sphere<span class="token punctuation">.</span>material<span class="token punctuation">.</span>emissive<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        materialFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'wireframe'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            sphere<span class="token punctuation">.</span>material<span class="token punctuation">.</span>wireframe <span class="token operator">=</span> e<span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        materialFolder<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 场景中的内容</span>
    <span class="token keyword">let</span> sphere<span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">initContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">let</span> groundGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneBufferGeometry</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> groundMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x6C7B8B</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> ground <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>groundGeometry<span class="token punctuation">,</span> groundMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ground<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">0.5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
        ground<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">80</span><span class="token punctuation">;</span>
        ground<span class="token punctuation">.</span>receiveShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ground<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> sphereGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>SphereGeometry</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> sphereMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x836FFF</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sphere <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>sphereGeometry<span class="token punctuation">,</span> sphereMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
        sphere<span class="token punctuation">.</span>castShadow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sphere<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 性能插件</span>
    <span class="token keyword">function</span> <span class="token function">initStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">let</span> stats <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        stats<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'absolute'</span><span class="token punctuation">;</span>
        stats<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">'0px'</span><span class="token punctuation">;</span>
        stats<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">'0px'</span><span class="token punctuation">;</span>

        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> stats<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 更新</span>
    <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        stats<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hemiLightHelper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 初始化</span>
    <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 兼容性判断，若不兼容会提示信息</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Detector<span class="token punctuation">.</span>webgl<span class="token punctuation">)</span> Detector<span class="token punctuation">.</span><span class="token function">addGetWebGLMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">initScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initCamera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initLight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initGui</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 窗口变动触发的方法</span>
    <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 重新设置相机的宽高比</span>
        camera<span class="token punctuation">.</span>aspect <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>

        <span class="token comment">// 更新相机投影矩阵</span>
        camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 更新渲染器大小</span>
        renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 循环渲染</span>
    <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 页面绘制完后加载</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-526ced5128.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Three.js &#8211; MeshBasicMaterial 材质</title>
		<link>https://uzzz.org/article/3020.html</link>
				<pubDate>Fri, 03 Aug 2018 09:33:35 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[threejs]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/3020.html</guid>
				<description><![CDATA[MeshBasicMaterial是一种非常简单的材质，继承自Material，这种材质不受光线的影响，可以显示模型的线框，对场景中的雾化会有反应。 通过操作示例可以对这种材质有一定的了解 示例：https://ithanmang.gitee.io/threejs/home/201808/20180802/02-meshBasicMaterial.html 构造函数 MeshBasicMaterial( parameters : Object ) 参数 parameters：可选参数一般指定为颜色，{color:0xffffff}，也可以添加别的从Material父类继承来的属性。 除却继承的属性外，MeshBasicMaterial也有自己独有的属性，以下是部分属性。 属性 简介 alphaMap alpha地图是一种灰度纹理，它控制着表面的不透明度（黑色：完全透明;白:完全不透明)。默认为null。 color 材料的颜色值，默认为白色 combine 将材质表面颜色与环境贴图相结合，默认为THREE.Multiply，如果选择混合模式，则反射率是用来混合两种颜色的 envMap 环境贴图，默认为null lightMap 灯光贴图，默认为null lightMapIntensity 灯光贴图的强度，默认为1 lights 材料是否受到光线影响，默认为false map 贴图，默认为null reflectivity 反射率，表面对环境的影响程度，有效范围在0 &#8211; 1之间，默认为1 wireframe 是否以线框模式呈现，默认为false 示例代码 &#60;!DOCTYPE html&#62; &#60;html lang="en"&#62; &#60;head&#62; &#60;meta charset="UTF-8"&#62; &#60;title&#62;MeshBasicMaterial 基础材质&#60;/title&#62; &#60;style&#62; body { margin: 0; overflow: hidden; /*溢出隐藏*/ } &#60;/style&#62; &#60;script src="../../libs/build/three.min.js"&#62;&#60;/script&#62; &#60;script src="../../libs/examples/js/controls/OrbitControls.js"&#62;&#60;/script&#62; &#60;script src="../../libs/examples/js/libs/dat.gui.min.js"&#62;&#60;/script&#62; &#60;script src="../../libs/examples/js/libs/stats.min.js"&#62;&#60;/script&#62; &#60;script src="../../libs/examples/js/Detector.js"&#62;&#60;/script&#62; &#60;/head&#62; &#60;body&#62; &#60;script&#62; let stats = initStats(); let scene, camera, renderer, light, controls, guiControls; // 场景 function initScene() { scene = new THREE.Scene(); scene.background = new THREE.Color(0x050505); } // 相机 function initCamera() { camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 5000); camera.position.set(0, 0, 250); camera.lookAt(new THREE.Vector3(0, 0, 0)); } // 渲染器 function initRenderer() { renderer = new THREE.WebGLRenderer({antialias: true, alpha: true}); // 设置渲染器的像素比例，按照设备 renderer.setPixelRatio(window.devicePixelRatio); // 渲染范围 renderer.setSize(window.innerWidth, window.innerHeight); // 开启阴影支持 renderer.shadowMap.enabled = true; // 阴影类型 renderer.shadowMap.type = THREE.PCFSoftShadowMap; document.body.appendChild(renderer.domElement); } let ambientLight; // 灯光 function initLight() { ambientLight = new THREE.AmbientLight({color: 0xDBDBDB}); scene.add(ambientLight); } // 控制器 function initControls() { controls = new THREE.OrbitControls(camera, renderer.domElement); // 添加惯性 controls.enableDamping = true; // 最大偏移角度 controls.maxPolarAngle =]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p><code>MeshBasicMaterial</code>是一种非常简单的材质，继承自<code>Material</code>，这种材质不受光线的影响，可以显示模型的线框，对场景中的雾化会有反应。<br /> 通过操作示例可以对这种材质有一定的了解<br /> 示例：https://ithanmang.gitee.io/threejs/home/201808/20180802/02-meshBasicMaterial.html</p>
<h4><a id="_3"></a>构造函数</h4>
<pre><code class="prism language-js"><span class="token function">MeshBasicMaterial</span><span class="token punctuation">(</span> parameters <span class="token punctuation">:</span> Object <span class="token punctuation">)</span>
</code></pre>
<h5><a id="_7"></a>参数</h5>
<p><strong>parameters</strong>：可选参数一般指定为颜色，<code>{color:0xffffff}</code>，也可以添加别的从<code>Material</code>父类继承来的属性。<br /> 除却继承的属性外，<strong>MeshBasicMaterial</strong>也有自己独有的属性，以下是部分属性。</p>
<table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">简介</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>alphaMap</strong></td>
<td align="center"><strong>alpha</strong>地图是一种灰度纹理，它控制着表面的不透明度（黑色：完全透明;白:完全不透明)。默认为<strong>null</strong>。</td>
</tr>
<tr>
<td align="center"><strong>color</strong></td>
<td align="center">材料的颜色值，默认为白色</td>
</tr>
<tr>
<td align="center"><strong>combine</strong></td>
<td align="center">将材质表面颜色与环境贴图相结合，默认为<strong>THREE.Multiply</strong>，如果选择混合模式，则反射率是用来混合两种颜色的</td>
</tr>
<tr>
<td align="center"><strong>envMap</strong></td>
<td align="center">环境贴图，默认为<strong>null</strong></td>
</tr>
<tr>
<td align="center"><strong>lightMap</strong></td>
<td align="center">灯光贴图，默认为<strong>null</strong></td>
</tr>
<tr>
<td align="center"><strong>lightMapIntensity</strong></td>
<td align="center">灯光贴图的强度，默认为<strong>1</strong></td>
</tr>
<tr>
<td align="center"><strong>lights</strong></td>
<td align="center">材料是否受到光线影响，默认为<strong>false</strong></td>
</tr>
<tr>
<td align="center"><strong>map</strong></td>
<td align="center">贴图，默认为<strong>null</strong></td>
</tr>
<tr>
<td align="center"><strong>reflectivity</strong></td>
<td align="center">反射率，表面对环境的影响程度，有效范围在<strong>0 &#8211; 1</strong>之间，默认为<strong>1</strong></td>
</tr>
<tr>
<td align="center"><strong>wireframe</strong></td>
<td align="center">是否以线框模式呈现，默认为<strong>false</strong></td>
</tr>
</tbody>
</table>
<h4><a id="_22"></a>示例代码</h4>
<pre><code class="prism language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>MeshBasicMaterial 基础材质<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
        body <span class="token punctuation">{</span>
            margin<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            overflow<span class="token punctuation">:</span> hidden<span class="token punctuation">;</span> <span class="token comment">/*溢出隐藏*/</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../../libs/build/three.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../../libs/examples/js/controls/OrbitControls.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../../libs/examples/js/libs/dat.gui.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../../libs/examples/js/libs/stats.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../../libs/examples/js/Detector.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>

    <span class="token keyword">let</span> stats <span class="token operator">=</span> <span class="token function">initStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> scene<span class="token punctuation">,</span> camera<span class="token punctuation">,</span> renderer<span class="token punctuation">,</span> light<span class="token punctuation">,</span> controls<span class="token punctuation">,</span> guiControls<span class="token punctuation">;</span>

    <span class="token comment">// 场景</span>
    <span class="token keyword">function</span> <span class="token function">initScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scene<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Color</span><span class="token punctuation">(</span><span class="token number">0x050505</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 相机</span>
    <span class="token keyword">function</span> <span class="token function">initCamera</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PerspectiveCamera</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        camera<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        camera<span class="token punctuation">.</span><span class="token function">lookAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Vector3</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 渲染器</span>
    <span class="token keyword">function</span> <span class="token function">initRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>antialias<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> alpha<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置渲染器的像素比例，按照设备</span>
        renderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 渲染范围</span>
        renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 开启阴影支持</span>
        renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// 阴影类型</span>
        renderer<span class="token punctuation">.</span>shadowMap<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>PCFSoftShadowMap<span class="token punctuation">;</span>

        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> ambientLight<span class="token punctuation">;</span>

    <span class="token comment">// 灯光</span>
    <span class="token keyword">function</span> <span class="token function">initLight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        ambientLight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0xDBDBDB</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ambientLight<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 控制器</span>
    <span class="token keyword">function</span> <span class="token function">initControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span>camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 添加惯性</span>
        controls<span class="token punctuation">.</span>enableDamping <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token comment">// 最大偏移角度</span>
        controls<span class="token punctuation">.</span>maxPolarAngle <span class="token operator">=</span> <span class="token number">0.49</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">;</span>
        <span class="token comment">// 旋转速度</span>
        controls<span class="token punctuation">.</span>rotateSpeed <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">;</span>
        <span class="token comment">// 最大可视距离</span>
        controls<span class="token punctuation">.</span>maxDistance <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
        <span class="token comment">// 最小可视距离</span>
        controls<span class="token punctuation">.</span>minDistance <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 调试插件</span>
    <span class="token keyword">function</span> <span class="token function">initGui</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        guiControls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">// Scene</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>background <span class="token operator">=</span> scene<span class="token punctuation">.</span>background<span class="token punctuation">.</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>ambientLight <span class="token operator">=</span> ambientLight<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>fog <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>fogColor <span class="token operator">=</span> scene<span class="token punctuation">.</span>background<span class="token punctuation">.</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Material</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>transparent <span class="token operator">=</span> torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>transparent<span class="token punctuation">;</span>
            <span class="token comment">/*注意：如果材料不透明，那么这个值得改变只会对材料的颜色有影响，为 0 时材料的颜色会变成白色*/</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>opacity <span class="token operator">=</span> torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>opacity<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>depthTest <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>depthWrite <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>side <span class="token operator">=</span> <span class="token string">'front'</span><span class="token punctuation">;</span>

            <span class="token comment">// MeshBasicMaterial</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">getStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>wireframe <span class="token operator">=</span> torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>wireframe<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>wireframeLinecap <span class="token operator">=</span> torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>wireframeLinecap<span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> gui <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">dat<span class="token punctuation">.</span>GUI</span><span class="token punctuation">(</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// scene</span>
        <span class="token keyword">let</span> sceneFolder <span class="token operator">=</span> gui<span class="token punctuation">.</span><span class="token function">addFolder</span><span class="token punctuation">(</span><span class="token string">'Scene'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sceneFolder<span class="token punctuation">.</span><span class="token function">addColor</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span> <span class="token string">'background'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            scene<span class="token punctuation">.</span>background<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sceneFolder<span class="token punctuation">.</span><span class="token function">addColor</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span> <span class="token string">'ambientLight'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ambientLight<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sceneFolder<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// fog</span>
        <span class="token keyword">let</span> fogFolder <span class="token operator">=</span> sceneFolder<span class="token punctuation">.</span><span class="token function">addFolder</span><span class="token punctuation">(</span><span class="token string">'scene.fog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fogFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span> <span class="token string">'fog'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                scene<span class="token punctuation">.</span>fog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Fog</span><span class="token punctuation">(</span>scene<span class="token punctuation">.</span>background<span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                scene<span class="token punctuation">.</span>fog <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fogFolder<span class="token punctuation">.</span><span class="token function">addColor</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'fogColor'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           scene<span class="token punctuation">.</span>fog<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fogFolder<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// material</span>
        <span class="token keyword">let</span> materialFolder <span class="token operator">=</span> gui<span class="token punctuation">.</span><span class="token function">addFolder</span><span class="token punctuation">(</span><span class="token string">'THREE.Material'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        materialFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span> <span class="token string">'transparent'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>transparent <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        materialFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span> <span class="token string">'opacity'</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>opacity <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        materialFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'depthTest'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>depthTest <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        materialFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'depthWrite'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>depthWrite <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        materialFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'visible'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>visible <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        materialFolder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'side'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'front'</span><span class="token punctuation">,</span><span class="token string">'back'</span><span class="token punctuation">,</span><span class="token string">'double'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token string">"front"</span><span class="token punctuation">:</span>
                    torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>side <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>FrontSide<span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">"back"</span><span class="token punctuation">:</span>
                    torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>side <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>BackSide<span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">"double"</span><span class="token punctuation">:</span>
                    torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>side <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>DoubleSide<span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// basicMaterial</span>
        <span class="token keyword">let</span> basicMaterial <span class="token operator">=</span> gui<span class="token punctuation">.</span><span class="token function">addFolder</span><span class="token punctuation">(</span><span class="token string">'THREE.MeshBasicMaterial'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        basicMaterial<span class="token punctuation">.</span><span class="token function">addColor</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'color'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>color<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        basicMaterial<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'wireframe'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>wireframe <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        basicMaterial<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>guiControls<span class="token punctuation">,</span><span class="token string">'wireframeLinecap'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'round'</span><span class="token punctuation">,</span><span class="token string">'butt'</span><span class="token punctuation">,</span><span class="token string">'square'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token string">"round"</span><span class="token punctuation">:</span>
                    torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>wireframeLinecap <span class="token operator">=</span> <span class="token string">"round"</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">"butt"</span><span class="token punctuation">:</span>
                    torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>wireframeLinecap <span class="token operator">=</span> <span class="token string">"butt"</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">case</span> <span class="token string">"square"</span><span class="token punctuation">:</span>
                    torusKont<span class="token punctuation">.</span>material<span class="token punctuation">.</span>wireframeLinecap <span class="token operator">=</span> <span class="token string">"square"</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        basicMaterial<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        materialFolder<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> torusKont<span class="token punctuation">;</span>

    <span class="token comment">// 场景中的内容</span>
    <span class="token keyword">function</span> <span class="token function">initContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 创建一个换面纠结对象</span>
        <span class="token keyword">let</span> torusKontGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TorusKnotGeometry</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> basicMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token number">0x7777ff</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        torusKont <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>torusKontGeometry<span class="token punctuation">,</span> basicMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>

        scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>torusKont<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 性能插件</span>
    <span class="token keyword">function</span> <span class="token function">initStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">let</span> stats <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        stats<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'absolute'</span><span class="token punctuation">;</span>
        stats<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">'0px'</span><span class="token punctuation">;</span>
        stats<span class="token punctuation">.</span>domElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">'0px'</span><span class="token punctuation">;</span>

        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> stats<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> step <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// 更新</span>
    <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        stats<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        controls<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        torusKont<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
        torusKont<span class="token punctuation">.</span>rotation<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 初始化</span>
    <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 兼容性判断，若不兼容会提示信息</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Detector<span class="token punctuation">.</span>webgl<span class="token punctuation">)</span> Detector<span class="token punctuation">.</span><span class="token function">addGetWebGLMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">initScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initCamera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initLight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initControls</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initGui</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> onWindowResize<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 窗口变动触发的方法</span>
    <span class="token keyword">function</span> <span class="token function">onWindowResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 重新设置相机的宽高比</span>
        camera<span class="token punctuation">.</span>aspect <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">/</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>

        <span class="token comment">// 更新相机投影矩阵</span>
        camera<span class="token punctuation">.</span><span class="token function">updateProjectionMatrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 更新渲染器大小</span>
        renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 循环渲染</span>
    <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 页面绘制完后加载</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-526ced5128.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>three.js给场景加上阴影</title>
		<link>https://uzzz.org/article/3001.html</link>
				<pubDate>Mon, 20 Nov 2017 05:39:53 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[threejs]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/3001.html</guid>
				<description><![CDATA[学习交流欢迎加群：789723098，博主会将一些demo整理共享 现实世界中（假设只在地球，先不考虑外太空），只要有光的地方就会有阴影产生。所以当我们构建好一个具备光照的场景后，还必须给其加上阴影，才能更清楚地显示场景中各个元素的关系，光照和阴影是webgl和three.js开发大型场景必不可少的元素，如果少了这两者，想象一下，地球上一切事物如果没有阴影，没有灯光，那么是不是世界乌漆嘛黑，什么都看不见？本节先不讲光照，先讲讲阴影的投射和接收，各种光源和材质的介绍和应用，在后面会单独写文章进行详细介绍。接下来先看看怎样给场景添加阴影。 添加阴影主要是这几个步骤： 渲染器一定要允许产生阴影： &#160; //渲染器 //antialias:true增加抗锯齿效果 renderer = new THREE.WebGLRenderer({antialias:true}); renderer.setClearColor(new THREE.Color(0x000000));//设置窗口背景颜色为黑 renderer.setSize(window.innerWidth, window.innerHeight);//设置窗口尺寸 renderer.shadowMapEnabled = true;//开启阴影，加上阴影渲染 &#160; 灯光要投下阴影，否则场景不会产生阴影： &#160; var spotLight = new THREE.SpotLight(0xffffff); spotLight.position.set(-50, 60, 15); spotLight.castShadow = true;//开启灯光投射阴影 &#160; 物体要投下阴影和接受阴影，假设这里的物体为Mesh；否则也不会有阴影产生： &#160; Mesh.castShadow = true;//开启投影 Mesh.receiveShadow = true;//接收阴影 当阴影添加完毕后，就可以产生阴影的效果啦。接下来实现一个有阴影的场景，其效果如下图所示： &#160; 这个实例的静态版本在我另一片博文：点击打开链接，轨道控制器鼠标交互的版本在这篇博文：点击打开链接。 但有一点需要特别注意，光源的位置一定要距离合适，否则容易引起阴影模糊粗糙的像打马赛克一样，像下面的图所示： 下面附上示例代码： &#160; &#60;!DOCTYPE html&#62; &#60;html lang="en"&#62; &#60;head&#62; &#60;meta charset="UTF-8"&#62; &#60;title&#62;threejs-basic-geometry&#60;/title&#62; &#60;style&#62; body{ font-family: Monospace; background: #f0f0f0; margin: 0px; overflow: hidden; } &#60;/style&#62; &#60;/head&#62; &#60;body&#62; &#60;script type="text/javascript" src="build/three.js"&#62;&#60;/script&#62; &#60;script type="text/javascript" src="js/Detector.js"&#62;&#60;/script&#62; &#60;script type="text/javascript" src="js/controls/OrbitControls.js"&#62;&#60;/script&#62; &#60;script type="text/javascript"&#62; //检测webgl的支持情况 if(!Detector.webgl) {Detector.addGetWebGLMessage();} var container; var camera, scene, renderer; //用于轨道控制器 var orbitControls, clock, delta; main(); render(); //主函数 function main(){ //添加一个div元素 container = document.createElement('div') document.body.appendChild(container); scene = new THREE.Scene();//创建一个新场景 //添加一个透视相机 camera = new THREE.PerspectiveCamera(30, window.innerWidth/window.innerHeight, 1, 1000); camera.position.set(100, 300, 100);//设置相机位置 camera.lookAt(new THREE.Vector3(0,0,0));//让相机指向原点 //渲染器 //antialias:true增加抗锯齿效果 renderer = new THREE.WebGLRenderer({antialias:true}); renderer.setClearColor(new THREE.Color(0x000000));//设置窗口背景颜色为黑 renderer.setSize(window.innerWidth, window.innerHeight);//设置窗口尺寸 renderer.shadowMapEnabled = true; //将renderer关联到container，这个过程类似于获取canvas元素 container.appendChild(renderer.domElement); //添加轨道控制器 //新建一个轨道控制器 orbitControls = new THREE.OrbitControls(camera, renderer.domElement); orbitControls.target = new THREE.Vector3(0, 0, 0);//控制焦点 orbitControls.autoRotate = false;//将自动旋转关闭 clock = new THREE.Clock();//用于更新轨道控制器 //给场景添加光源 //自然光 var ambientLight = new THREE.AmbientLight( 0x0c0c0c ); scene.add( ambientLight ); // //平行光源 // var directionalLight = new THREE.DirectionalLight( 0xffffff ); // directionalLight.position.set(]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<h2>学习交流欢迎加群：789723098，博主会将一些demo整理共享</h2>
<p>现实世界中（假设只在地球，先不考虑外太空），只要有光的地方就会有阴影产生。所以当我们构建好一个具备光照的场景后，还必须给其加上阴影，才能更清楚地显示场景中各个元素的关系，光照和阴影是webgl和three.js开发大型场景必不可少的元素，如果少了这两者，想象一下，地球上一切事物如果没有阴影，没有灯光，那么是不是世界乌漆嘛黑，什么都看不见？本节先不讲光照，先讲讲阴影的投射和接收，各种光源和材质的介绍和应用，在后面会单独写文章进行详细介绍。接下来先看看怎样给场景添加阴影。</p>
<p><strong>添加阴影主要是这几个步骤：</strong></p>
<p>渲染器一定要允许产生阴影：</p>
<p>&nbsp;</p>
<pre>
<code class="language-html hljs">//渲染器
//antialias:true增加抗锯齿效果
renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setClearColor(new THREE.Color(0x000000));//设置窗口背景颜色为黑
renderer.setSize(window.innerWidth, window.innerHeight);//设置窗口尺寸
renderer.shadowMapEnabled = true;//开启阴影，加上阴影渲染</code></pre>
<p>&nbsp;</p>
<p>灯光要投下阴影，否则场景不会产生阴影：</p>
<p>&nbsp;</p>
<pre>
<code class="language-html hljs">var spotLight = new THREE.SpotLight(0xffffff);
spotLight.position.set(-50, 60, 15);
spotLight.castShadow = true;//开启灯光投射阴影</code></pre>
<p>&nbsp;</p>
<p>物体要投下阴影和接受阴影，假设这里的物体为<strong><span style="color:#ff0000;">Mesh</span></strong>；否则也不会有阴影产生：</p>
<p>&nbsp;</p>
<pre>
<code class="language-html hljs">Mesh.castShadow = true;//开启投影
Mesh.receiveShadow = true;//接收阴影</code></pre>
<p>当阴影添加完毕后，就可以产生阴影的效果啦。接下来实现一个有阴影的场景，其效果如下图所示：</p>
<p>&nbsp;</p>
<p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdn.net/20171120140241338?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzczMzg5ODM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center"></p>
<p><span style="color:#ff0000;">这个实例的静态版本在我另一片博文：<a href="http://blog.csdn.net/qq_37338983/article/details/78569139" rel="nofollow" data-token="d7a6541659415c6b2375fd18e165844e">点击打开链接</a>，轨道控制器鼠标交互的版本在这篇博文：<a href="http://blog.csdn.net/qq_37338983/article/details/78575333" rel="nofollow" data-token="0e7e9ce355a5bb62efddbc340ed6d11f">点击打开链接</a>。</span></p>
<p>但有一点需要特别注意，光源的位置一定要距离合适，否则容易引起阴影模糊粗糙的像打马赛克一样，像下面的图所示：</p>
<p><img alt="" class="has" height="512" src="https://uzshare.com/_p?https://img-blog.csdn.net/20171120140711202?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzczMzg5ODM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" width="512"></p>
<p><span style="color:#cc0000;"><strong>下面附上示例代码：</strong></span></p>
<p>&nbsp;</p>
<pre>
<code class="language-html hljs">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;threejs-basic-geometry&lt;/title&gt;
    &lt;style&gt;
        body{
            font-family: Monospace;
            background: #f0f0f0;
            margin: 0px;
            overflow: hidden;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script type="text/javascript" src="build/three.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="js/Detector.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="js/controls/OrbitControls.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
    //检测webgl的支持情况
    if(!Detector.webgl) {Detector.addGetWebGLMessage();}
    var container;
    var camera, scene, renderer;
    //用于轨道控制器
    var orbitControls, clock, delta;
    main();
    render();
    //主函数
    function main(){
        //添加一个div元素
        container = document.createElement('div')
        document.body.appendChild(container);
        scene = new THREE.Scene();//创建一个新场景
        //添加一个透视相机
        camera = new THREE.PerspectiveCamera(30,
                      window.innerWidth/window.innerHeight, 1, 1000);
        camera.position.set(100, 300, 100);//设置相机位置
        camera.lookAt(new THREE.Vector3(0,0,0));//让相机指向原点
        //渲染器
        //antialias:true增加抗锯齿效果
        renderer = new THREE.WebGLRenderer({antialias:true});
        renderer.setClearColor(new THREE.Color(0x000000));//设置窗口背景颜色为黑
        renderer.setSize(window.innerWidth, window.innerHeight);//设置窗口尺寸
        renderer.shadowMapEnabled = true;
        //将renderer关联到container，这个过程类似于获取canvas元素
        container.appendChild(renderer.domElement);
        //添加轨道控制器
        //新建一个轨道控制器
        orbitControls = new THREE.OrbitControls(camera, renderer.domElement);
        orbitControls.target = new THREE.Vector3(0, 0, 0);//控制焦点
        orbitControls.autoRotate = false;//将自动旋转关闭
        clock = new THREE.Clock();//用于更新轨道控制器
        //给场景添加光源
        //自然光
        var ambientLight = new THREE.AmbientLight( 0x0c0c0c );
        scene.add( ambientLight );
//        //平行光源
//        var directionalLight = new THREE.DirectionalLight( 0xffffff );
//        directionalLight.position.set( 1, 0.75, 0.5 ).normalize();
//        directionalLight.castShadow = true;
//        scene.add(directionalLight)
        var spotLight = new THREE.SpotLight(0xffffff);
        //spotLight.position.set(-50, 60, 15);
        spotLight.position.set(-200, 160, 85);
        spotLight.castShadow = true;//允许投射阴影
        scene.add(spotLight);
        plane();
        cube();
        sphere();
        cylinder();
    }
    //创建一个平面
    function plane(){
        var planeGeo = new THREE.PlaneGeometry(100,100,10,10);//创建平面
        var planeMat = new THREE.MeshLambertMaterial({  //创建材料
            color:0xFFFFFF,
            wireframe:false
        });
        var planeMesh = new THREE.Mesh(planeGeo, planeMat);//创建网格模型
        planeMesh.position.set(0, 0, -20);//设置平面的坐标
        planeMesh.rotation.x = -0.5 * Math.PI;//将平面绕X轴逆时针旋转90度
        planeMesh.receiveShadow = true;//允许接收阴影
        scene.add(planeMesh);//将平面添加到场景中
    }
    //创建一个立方体
    function cube(){
        var cubeGeo = new THREE.CubeGeometry(20, 20, 20, 5, 5, 5);//创建立方体
        var cubeMat = new THREE.MeshLambertMaterial({//创建材料
            color:0x003300,
            wireframe:false
        });
        var cubeMesh = new THREE.Mesh(cubeGeo, cubeMat);//创建立方体网格模型
        cubeMesh.position.set(15, 10, 0);//设置立方体的坐标
        cubeMesh.castShadow = true;//允许投射阴影
        cubeMesh.receiveShadow = true;//允许接收阴影
        scene.add(cubeMesh);//将立方体添加到场景中
    }
    //创建一个球
    function sphere(){
        var sphereGeo = new THREE.SphereGeometry(16, 40, 40);//创建球体
        var sphereMat = new THREE.MeshLambertMaterial({//创建材料
            color:0x0000FF,
            wireframe:false
        });
        var sphereMesh = new THREE.Mesh(sphereGeo, sphereMat);//创建球体网格模型
        sphereMesh.position.set(-25, 16, 0);//设置球的坐标
        sphereMesh.castShadow = true;//允许投射阴影
        sphereMesh.receiveShadow = true;//允许接收阴影
        scene.add(sphereMesh);//将球体添加到场景
    }
    //创建圆柱体
    function cylinder(){
        //创建圆柱体
        var cylinderGeo = new THREE.CylinderGeometry(15, 15 ,40 ,40 ,40);
        var cylinderMat = new THREE.MeshLambertMaterial({//创建材料
            color:0xFF6600,
            wireframe:false
        });
        //创建圆柱体网格模型
        var cylinderMesh = new THREE.Mesh(cylinderGeo, cylinderMat);
        cylinderMesh.position.set(0, 20, -40);//设置圆柱坐标sphere
        cylinderMesh.castShadow = true;//允许投射阴影
        cylinderMesh.receiveShadow = true;//允许接收阴影
        scene.add(cylinderMesh);//向场景添加圆柱体
    }
    //渲染
    function render(){
        delta = clock.getDelta();
        orbitControls.update(delta);
        requestAnimationFrame(render);
        renderer.render(scene, camera);
    }
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>three.js 源码注释（五十一）Material /MeshDepthMaterial.js</title>
		<link>https://uzzz.org/article/2573.html</link>
				<pubDate>Sat, 27 Dec 2014 16:03:57 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[threejs]]></category>
		<category><![CDATA[前端]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2573.html</guid>
				<description><![CDATA[商域无疆 (http://blog.csdn.net/omni360/) 本文遵循“署名-非商业用途-保持一致”创作公用协议 转载请保留此句：商域无疆 &#8211; &#160;本博客专注于&#160;敏捷开发及移动和物联设备研究：数据可视化、GOLANG、Html5、WEBGL、THREE.JS，否则，出自本博客的文章拒绝转载或再转载，谢谢合作。 俺也是刚开始学,好多地儿肯定不对还请见谅. 以下代码是THREE.JS 源码文件中materials/MeshDepthMaterial.js文件的注释. 更多更新在 :&#160;https://github.com/omni360/three.js.sourcecode /** * @author mrdoob / http://mrdoob.com/ * @author alteredq / http://alteredqualia.com/ * * parameters = { * opacity: &#60;float&#62;, * * blending: THREE.NormalBlending, * depthTest: &#60;bool&#62;, * depthWrite: &#60;bool&#62;, * * wireframe: &#60;boolean&#62;, * wireframeLinewidth: &#60;float&#62; * } */ /* ///MeshDepthMaterial方法根据参数parameters创建基于相机远近裁切面自动变换亮度(明暗度)的mesh(网格)的材质类型,离相机越近,材质越亮(白),离相机越远,材质越暗(黑). ///parameters参数的格式看上面.MeshDepthMaterial对象的功能函数采用,定义构造的函数原型对象来实现.大部分属性方法继承自材质的基类Material. */ ///&#60;summary&#62;MeshDepthMaterial&#60;/summary&#62; ///&#60;param name ="parameters" type="String"&#62;string类型的JSON格式材质属性参数&#60;/param&#62; ///&#60;returns type="Materialistically"&#62;返回MeshDepthMaterial,网格深度材质.&#60;/returns&#62; THREE.MeshDepthMaterial = function ( parameters ) { THREE.Material.call( this ); //调用Material对象的call方法,将原本属于Material的方法交给当前对象MeshDepthMaterial来使用. this.morphTargets = false; //定义材质是否设定目标变形动画,默认为false this.wireframe = false;; //以线框方式渲染几何体.默认为false this.wireframeLinewidth = 1; //线框的宽度,默认初始化为1. this.setValues( parameters ); //调用Material类的setValues方法,将参数parameters赋值给当前MeshDepthMaterial材质的属性. }; /************************************************************* ****下面是MeshDepthMaterial对象的方法属性定义,继承自Material *************************************************************/ THREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype ); /*clone方法 ///clone方法克隆MeshDepthMaterial对象, */ ///&#60;summary&#62;clone&#60;/summary&#62; ///&#60;param name ="material" type="MeshDepthMaterial"&#62;MeshDepthMaterial对象,可有可无.&#60;/param&#62; ///&#60;returns type="MeshDepthMaterial"&#62;返回克隆的MeshDepthMaterial对象&#60;/returns&#62; THREE.MeshDepthMaterial.prototype.clone = function () { //以下是将材质的属性一一进行复制 var material = new THREE.MeshDepthMaterial(); THREE.Material.prototype.clone.call( this, material ); material.wireframe = this.wireframe; material.wireframeLinewidth = this.wireframeLinewidth; return material; //返回克隆的MeshDepthMaterial对象 }; 商域无疆 (http://blog.csdn.net/omni360/) 本文遵循“署名-非商业用途-保持一致”创作公用协议 转载请保留此句：商域无疆 &#8211; &#160;本博客专注于&#160;敏捷开发及移动和物联设备研究：数据可视化、GOLANG、Html5、WEBGL、THREE.JS，否则，出自本博客的文章拒绝转载或再转载，谢谢合作。 以下代码是THREE.JS 源码文件中materials/MeshDepthMaterial.js文件的注释. 更多更新在 :&#160;https://github.com/omni360/three.js.sourcecode]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p align="center" style="font-size:14px;color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;line-height:21px;"> <span style="font-size:10px;">商域无疆 (<a href="http://blog.csdn.net/omni360" rel="nofollow" style="color:rgb(202,0,0);text-decoration:none;" data-token="d6a7c7dabc0c5454633e078e3535ad10">http://blog.csdn.net/omni360/</a>)</span></p>
<p align="center" style="font-size:14px;color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;line-height:21px;"> <span style="font-size:10px;">本文遵循“<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/cn/" rel="nofollow" style="color:rgb(51,102,153);text-decoration:none;" data-token="2e00339ea2ae51cda8c93f92854a162d">署名-非商业用途-保持一致</a>”创作公用协议</span></p>
<p style="font-family:Arial;font-size:14px;line-height:26px;"> <a href="http://blog.csdn.net/omni360" rel="nofollow" style="color:rgb(202,0,0);text-decoration:none;" data-token="d6a7c7dabc0c5454633e078e3535ad10"><span style="color:rgb(255,153,0);font-size:12px;">转载请保留此句：</span><span style="font-size:10px;">商域无疆 &#8211; &nbsp;本博客专注于&nbsp;<span style="font-family:'Microsoft YaHei';line-height:30px;">敏捷开发及移动和物联设备研究：数据可视化、GOLANG、Html5、WEBGL、THREE.JS</span></span><span style="color:rgb(255,153,0);font-size:10px;"><span style="font-family:'Microsoft YaHei';"><span style="line-height:30px;">，</span></span>否则，出自本博客的文章拒绝转载或再转载，谢谢合作。</span></a></p>
<p></p>
<p>俺也是刚开始学,好多地儿肯定不对还请见谅.</p>
<p>以下代码是THREE.JS 源码文件中materials/MeshDepthMaterial.js文件的注释.</p>
<p>更多更新在 :&nbsp;<a href="https://github.com/omni360/three.js.sourcecode/" rel="nofollow" data-token="91a78f9040b9bac3dff593d88e55351d">https://github.com/omni360/three.js.sourcecode</a></p>
<p></p>
<pre><code class="language-javascript">/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 *
 * parameters = {
 *  opacity: &lt;float&gt;,
 *
 *  blending: THREE.NormalBlending,
 *  depthTest: &lt;bool&gt;,
 *  depthWrite: &lt;bool&gt;,
 *
 *  wireframe: &lt;boolean&gt;,
 *  wireframeLinewidth: &lt;float&gt;
 * }
 */

/*
///MeshDepthMaterial方法根据参数parameters创建基于相机远近裁切面自动变换亮度(明暗度)的mesh(网格)的材质类型,离相机越近,材质越亮(白),离相机越远,材质越暗(黑).
///parameters参数的格式看上面.MeshDepthMaterial对象的功能函数采用,定义构造的函数原型对象来实现.大部分属性方法继承自材质的基类Material.
*/
///&lt;summary&gt;MeshDepthMaterial&lt;/summary&gt;
///&lt;param name ="parameters" type="String"&gt;string类型的JSON格式材质属性参数&lt;/param&gt;
///&lt;returns type="Materialistically"&gt;返回MeshDepthMaterial,网格深度材质.&lt;/returns&gt;
THREE.MeshDepthMaterial = function ( parameters ) {

	THREE.Material.call( this );	//调用Material对象的call方法,将原本属于Material的方法交给当前对象MeshDepthMaterial来使用.

	this.morphTargets = false;		//定义材质是否设定目标变形动画,默认为false
	this.wireframe = false;;			//以线框方式渲染几何体.默认为false
	this.wireframeLinewidth = 1;		//线框的宽度,默认初始化为1.

	this.setValues( parameters );		//调用Material类的setValues方法,将参数parameters赋值给当前MeshDepthMaterial材质的属性.

};

/*************************************************************
****下面是MeshDepthMaterial对象的方法属性定义,继承自Material
*************************************************************/
THREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );

/*clone方法
///clone方法克隆MeshDepthMaterial对象,
*/
///&lt;summary&gt;clone&lt;/summary&gt;
///&lt;param name ="material" type="MeshDepthMaterial"&gt;MeshDepthMaterial对象,可有可无.&lt;/param&gt;
///&lt;returns type="MeshDepthMaterial"&gt;返回克隆的MeshDepthMaterial对象&lt;/returns&gt;	
THREE.MeshDepthMaterial.prototype.clone = function () {
	//以下是将材质的属性一一进行复制
	var material = new THREE.MeshDepthMaterial();

	THREE.Material.prototype.clone.call( this, material );

	material.wireframe = this.wireframe;
	material.wireframeLinewidth = this.wireframeLinewidth;

	return material;	//返回克隆的MeshDepthMaterial对象

};
</code></pre>
<p align="center" style="font-size:14px;color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;line-height:21px;"> <span style="font-size:10px;">商域无疆 (<a href="http://blog.csdn.net/omni360" rel="nofollow" style="color:rgb(202,0,0);text-decoration:none;" data-token="d6a7c7dabc0c5454633e078e3535ad10">http://blog.csdn.net/omni360/</a>)</span></p>
<p align="center" style="font-size:14px;color:rgb(51,51,51);font-family:verdana, Arial, Helvetica, sans-serif;line-height:21px;"> <span style="font-size:10px;">本文遵循“<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/cn/" rel="nofollow" style="color:rgb(51,102,153);text-decoration:none;" data-token="2e00339ea2ae51cda8c93f92854a162d">署名-非商业用途-保持一致</a>”创作公用协议</span></p>
<p style="font-family:Arial;font-size:14px;line-height:26px;"> <a href="http://blog.csdn.net/omni360" rel="nofollow" style="color:rgb(202,0,0);text-decoration:none;" data-token="d6a7c7dabc0c5454633e078e3535ad10"><span style="color:rgb(255,153,0);font-size:12px;">转载请保留此句：</span><span style="font-size:10px;">商域无疆 &#8211; &nbsp;本博客专注于&nbsp;<span style="font-family:'Microsoft YaHei';line-height:30px;">敏捷开发及移动和物联设备研究：数据可视化、GOLANG、Html5、WEBGL、THREE.JS</span></span><span style="color:rgb(255,153,0);font-size:10px;"><span style="font-family:'Microsoft YaHei';"><span style="line-height:30px;">，</span></span>否则，出自本博客的文章拒绝转载或再转载，谢谢合作。</span></a></p>
<p></p>
<p>以下代码是THREE.JS 源码文件中materials/MeshDepthMaterial.js文件的注释.</p>
<p>更多更新在 :&nbsp;<a href="https://github.com/omni360/three.js.sourcecode" rel="nofollow" data-token="df3f885a7e8f5932d6ceabbbb2a7eaf7">https://github.com/omni360/three.js.sourcecode</a></p>
</p></div>
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
