<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>嵌入式 &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/qianrushi/feed" rel="self" type="application/rss+xml" />
	<link>https://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Tue, 03 Jul 2018 03:16:48 +0000</lastBuildDate>
	<language>zh-CN</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>嵌入式 &#8211; 有组织在!</title>
	<link>https://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>光敏传感器实验</title>
		<link>https://uzzz.org/article/3142.html</link>
				<pubDate>Tue, 03 Jul 2018 03:16:48 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[嵌入式]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/3142.html</guid>
				<description><![CDATA[光敏传感器实验 一、&#160;&#160;&#160;&#160;实验目的 了解光敏传感器工作的过程，掌握针对一个光敏传感器实验的过程，深入了解其工作的机制，并且学会使用ATOS平台来进行烧录数据的操作，掌握TinyOS的基本操作方法。 二、&#160;&#160;&#160;&#160;实验原理及基本技术路线图（方框原理图） 首先是开发平台的选择，对于传]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-align:center;text-indent:24.1pt;"><strong><span style="font-size:20px;">光敏传感器实验</span></strong></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:24pt;"><span style="font-family:'宋体';line-height:1.5;text-indent:-36pt;font-size:12pt;">一、<span style="font-family:'Times new roman';line-height:normal;font-size:7pt;">&nbsp;&nbsp;&nbsp;</span></span>&nbsp;<span style="line-height:24pt;text-indent:-36pt;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">实验目的</span></span></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:24pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">了解光敏传感器工作的过程，掌握针对一个光敏传感器实验的过程，深入了解其工作的机制，并且学会使用<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">ATOS</span>平台来进行烧录数据的操作，掌握</span><span style="line-height:1.5;">TinyOS</span><span style="font-family:'宋体';line-height:1.5;">的基本操作方法。</span></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:-36pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">二、<span style="font-family:'Times new roman';line-height:normal;font-size:7pt;">&nbsp;&nbsp;&nbsp;</span></span>&nbsp;<strong><span style="font-family:'宋体';line-height:24px;font-size:12pt;">实验原理及基本技术路线图（方框原理图）</span></strong></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:24pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">首先是开发平台的选择，对于传感器实验，我们选取的开发平台是<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">ATOS</span>。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="line-height:1.5;">ATOS</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">综合实验平台提供了一个完整的传感网实验平台，如图</span>&nbsp;<span style="line-height:1.5;">1.1.1</span><span style="font-family:'宋体';line-height:1.5;">。在这个</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">平台中主要包括无线传感网节点、基站板、传感器模块。下面将简单介绍每个一模块的功能。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="line-height:1.5;">&nbsp;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://blog.photo.sina.com.cn/showpic.html#url=http://album.sina.com.cn/pic/006dTHEXzy7hGi1Gdp2c4" rel="nofollow" data-token="d2a8fb405d62079ef4408505eb421375"><img src="http://s5.sinaimg.cn/bmiddle/006dTHEXzy7hGi1Gdp2c4&amp;690" name="image_operate_96041516962724464" style="border:0px;" alt=""></a><br style="line-height:1.5;"><span style="font-family:'宋体';line-height:21px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;图</span>&nbsp;<span style="line-height:21px;">1.1.1</span>&nbsp;<span style="font-family:'宋体';line-height:21px;">整体框架图</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">下面则是传感器模块以及基站板的介绍：</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:21pt;line-height:21px;"><span style="font-family:'宋体';line-height:1.5;">传感器模块是将物理世界的信息进行量化的设备，是</span>&nbsp;<span style="line-height:1.5;">ATOS</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">实验平台中采集</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">数据的基本来源，传感器根据采集对象的不同，分为</span>&nbsp;<span style="line-height:1.5;">A/D</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">式传感器及开关传感</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">器，</span><span style="line-height:1.5;">ATOS</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">实验平台支持多达十几种传感器，使用统一连接的方式，方便使用和</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">替换。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:1.5;">基站板（或称为网关板），是</span>&nbsp;<span style="line-height:1.5;">ATOS</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">实验平台中用于采集节点数据、烧录程</span>&nbsp;<span style="line-height:1.5;">ATOS</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">实验平台</span><span style="line-height:1.5;">&#8211;</span><span style="font-family:'宋体';line-height:1.5;">使用指南</span>&nbsp;<span style="line-height:1.5;">4</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">序，以及串口通讯的多功能设备。在该平台上，在底板上已经实现每个基本节点</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">都可以通过基站统一烧录，不再需要用在线烧录器单独连接某个节点。</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">基站板上有一个射频模块连接插槽，一个传感器模块连接插槽，一个</span>&nbsp;<span style="line-height:1.5;">USB</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">烧录线接口，</span><span style="line-height:1.5;">USB</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">转串行接口以及一个标准串口。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:1.5;">软件：</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:21pt;line-height:21px;"><span style="line-height:1.5;">ATOS</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">实验平台主要以</span>&nbsp;<span style="line-height:1.5;">TinyOS</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">操作系统为软件平台，并在其之上扩展了许</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">多的应用开发中常用的组件，通过</span>&nbsp;<span style="line-height:1.5;">ATOS</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">实验平台及其配套的组件可以快速的构</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">建自己的应用，而无需深入了解硬件相关的操作，这对于进行理论研究和学习原</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">理性知识减少了许多障碍。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:1.5;">下面将进行传感器原理的简介：</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:24pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">首先光敏传感器的核心元件就是光敏电阻，其原理如下：</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:1.5;">光敏电阻是一种光电效应半导体器件，它能提供很经济实用的解决方案，应用于光存在</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">与否的感应（数字量）以及光强度的测量（模拟良）等领域。</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">光电效应半导体探测器可以分为两大类：结和体效应装置。结装置，工作于光电传导模</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">式，它利用</span>&nbsp;<span style="line-height:1.5;">PN</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">结的反向特征。在反向偏转时，</span><span style="line-height:1.5;">PN</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">结产生一个受光控制的电流信号。输出量</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">与触发照明成正比，而不受供应电源的影响。硅光电管就是这类的产品。而体效应光电半导</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">体没有结，它的体电阻系数随照明强度的增强而减小，容许更多的光电流流过。这种阻性特</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">征使得体效应光电半导体具有很好的品质：通过调节供应电源就可以从探测器上获得信号流，</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">且有着很宽的范围。为了区别，珀金埃尔默光电子将体效应光电半导体称作为光电半导体单</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">元，简单的说就叫光敏电阻。</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">光敏电阻是薄膜元件，它是由在陶瓷底衬上覆一层光电半导体材料。金属接触点盖在光</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">电半导体面下部。这种光电半导体材料薄膜元件有很高的电阻。所以在两个接触点之间，做</span>&nbsp;<span style="font-family:'宋体';line-height:1.5;">的狭小、交叉，使得在适度的光线时产生较低的阻值。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">我们知道光敏电阻设计到了<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">A/D</span>转换的过程，因为电阻输出的是模拟量，而<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">PC</span>无法处理模拟量，因此为了能直接在<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">PC</span>端能看到数据，我们需要对于采集的数据进行<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">A/D</span>转换。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:24pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">下面是<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">A/D</span>转换的原理：</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:24pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">A/D</span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">转换器<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">(Analog-to-Digital Converter)</span>又叫模<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">/</span>数转换器<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">,</span>即是将模拟信号<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">(</span>电压或是电流的形式<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">)</span>转换成数字信号。这种数字信号可让仪表<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">,</span>计算机外设接口或是微处理机来加以操作或胜作使用。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:24pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">A/D</span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">转换器<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">(ADC)</span>的型式有很多种，方式的不同会影响测量后的精准度。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">A/D</span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">转换器的功能是把模拟量变换成数字量。由于实现这种转换的工作原理</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">和采用工艺技术不同，因此生产出种类繁多的<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">A/D</span>&nbsp;转换芯片。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:24pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">A/D</span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">转换器按分辨率分为<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">4</span>&nbsp;位、<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">6</span>&nbsp;位、<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">8</span>&nbsp;位、<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">10</span>&nbsp;位、<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">14</span>&nbsp;位、<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">16</span>&nbsp;位和<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">BCD</span></span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">码的<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">31/2</span>&nbsp;位、<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">51/2</span>&nbsp;位等。按照转换速度可分为超高速（转换时间<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">=330ns</span>），次超高速（<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">330~3.3</span>μ<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">S</span>），高速（转换时间<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">3.3~333</span>μ<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">S</span>），低速（转换时间＞<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">330</span>μ<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">S</span>）</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:24pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">对应的计算机对于采集的数据进行操作是进过<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">A/D</span>转换后的值，因此其流程图如下：</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><a href="http://blog.photo.sina.com.cn/showpic.html#url=http://album.sina.com.cn/pic/006dTHEXzy7hGi6I32P7b" rel="nofollow" data-token="3fc1a204c174c3f294dabbf6defbe3ee"><img src="http://s12.sinaimg.cn/bmiddle/006dTHEXzy7hGi6I32P7b&amp;690" name="image_operate_26451516962725098" style="border:0px;" alt=""></a><br style="line-height:1.5;"><br style="line-height:1.5;"></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">&nbsp;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">&nbsp;</span></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:-36pt;line-height:24pt;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">三、<span style="font-family:'Times new roman';line-height:normal;font-size:7pt;">&nbsp;&nbsp;&nbsp;</span></span>&nbsp;<strong><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">所用仪器、材料（设备名称、型号、规格等）</span></strong></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="line-height:1.5;">1.</span><span style="font-family:'宋体';line-height:24px;font-size:12pt;">带有<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">CC2530</span>&nbsp;芯片的基站一个</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">2.</span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">烧录线一根</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">3.</span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">光传感器一个</span></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.5;">4.</span><span style="font-family:'宋体';line-height:1.5;">一台安装有</span>&nbsp;<span style="line-height:1.5;">Cygwin</span><span style="font-family:'宋体';line-height:1.5;">开发平台的</span><span style="line-height:1.5;">PC</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">5.</span><span style="font-family:'宋体';line-height:24px;font-size:12pt;">若干串口线与<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">USB</span>连接线</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">&nbsp;</span></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:-36pt;line-height:24pt;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">四、<span style="font-family:'Times new roman';line-height:normal;font-size:7pt;">&nbsp;&nbsp;&nbsp;</span></span>&nbsp;<strong><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">实验方法、步骤</span></strong></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:-18pt;line-height:24pt;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">1.<span style="font-family:'Times new roman';line-height:normal;font-size:7pt;">&nbsp;</span></span>&nbsp;<span style="font-family:'宋体';line-height:1.5;font-size:12pt;">将基站同电脑用烧录线连接好，打开基站的开关</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;margin-left:18pt;text-indent:-18pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">2.<span style="font-family:'Times new roman';line-height:normal;font-size:7pt;">&nbsp;</span></span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">用串口线将基站和<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">PC</span>&nbsp;机器连接起来</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;margin-left:18pt;text-indent:-18pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">3.<span style="font-family:'Times new roman';line-height:normal;font-size:7pt;">&nbsp;</span></span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">打开串口助手</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">&nbsp;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:0cm;margin-left:18pt;line-height:21px;"><a href="http://blog.photo.sina.com.cn/showpic.html#url=http://album.sina.com.cn/pic/006dTHEXzy7hGibzlXp0f" rel="nofollow" data-token="7786ed18e9d5e5b899ba113059ef0e9c"></a><br style="line-height:1.5;"><br style="line-height:1.5;"></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;margin-left:18pt;text-indent:-18pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">4.<span style="font-family:'Times new roman';line-height:normal;font-size:7pt;">&nbsp;</span></span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">打开<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">Cygwin</span>&nbsp;开发环境</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">5.</span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">在<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">Cygwin</span>&nbsp;开发环境中执行<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">/opt/atos/apps/Demos/ sensor/ADSensor/</span></span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">6.</span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">在该目录下执行<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">make antc5 install</span>，进行软件的编译和烧录</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><a href="http://blog.photo.sina.com.cn/showpic.html#url=http://album.sina.com.cn/pic/006dTHEXzy7hGifh6Yse4" rel="nofollow" data-token="21827a465fb7320aa44169c282bc5058"><img src="http://s5.sinaimg.cn/mw690/006dTHEXzy7hGifh6Yse4&amp;690" name="image_operate_16421516962725548" style="border:0px;" alt=""></a><br style="line-height:1.5;"><br style="line-height:1.5;"></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">7.</span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">烧录完成后，将光传感器插在基站的旁边的插槽。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">&nbsp;</span><a href="http://blog.photo.sina.com.cn/showpic.html#url=http://album.sina.com.cn/pic/006dTHEXzy7hGiilklpb7" rel="nofollow" data-token="76288ee84f9b3cb8df35ed704ef1ff59"><img src="http://s8.sinaimg.cn/mw690/006dTHEXzy7hGiilklpb7&amp;690" name="image_operate_23741516962725733" style="border:0px;" alt=""></a></p>
<p>  <br style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;color:rgb(0,0,0);font-size:14px;"></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">&nbsp;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">8.</span>&nbsp;<span style="font-family:'宋体';line-height:24px;font-size:12pt;">重启基站，看串口输出，如下图。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><a href="http://blog.photo.sina.com.cn/showpic.html#url=http://album.sina.com.cn/pic/006dTHEXzy7hGil7lkz27" rel="nofollow" data-token="6ad20f2675384b8995cb61a3fef53310"><img src="http://s8.sinaimg.cn/mw690/006dTHEXzy7hGil7lkz27&amp;690" name="image_operate_97801516962725986" style="border:0px;" alt=""></a><br style="line-height:1.5;"><br style="line-height:1.5;"></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">&nbsp;</span></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:-36pt;line-height:24pt;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">五、<span style="font-family:'Times new roman';line-height:normal;font-size:7pt;">&nbsp;&nbsp;&nbsp;</span></span>&nbsp;<strong><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">关键实验代码</span></strong></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">#include &#8220;SensorCollection.h&#8221;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">#define DBG_LEV 9</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">module ADSensorP</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">{</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">uses</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">{</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">interface Boot;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">interface AdcControl as ADSensorControl;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">interface Read as ADSensorRead;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">interface Timer as SensorTimer;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">}</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">}</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">implementation</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">{</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">uint8_t m_len;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">task void sensorTask()</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">{</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">call ADSensorControl.enable(ADC_REF_AVDD, ADC_14_BIT, ADC_AIN4);</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">call ADSensorRead.read();</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">}</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">event void Boot.booted()</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">{</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">ADBG(DBG_LEV, &#8220;##############Boot.booted###################\n&#8221;);</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">call SensorTimer.startPeriodic(1000);</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">}</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">event void SensorTimer.fired()</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">{</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">post sensorTask();</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">}</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">event void ADSensorRead.readDone(error_t result, int16_t val)</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">{</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">ADBG(DBG_LEV, &#8220;AD Data = x\n&#8221; ,val);</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">}</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">}</span></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.5;">&nbsp;</span></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;margin-left:36pt;text-indent:-36pt;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">六、<span style="font-family:'Times new roman';line-height:normal;font-size:7pt;">&nbsp;&nbsp;&nbsp;</span></span>&nbsp;<strong><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">实验过程原始记录<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">(</span>数据、图表、计算等<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">)</span></span></strong><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">&nbsp;&nbsp;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">实验记录</span><span style="font-family:'宋体';line-height:24px;font-size:12pt;">：</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><a href="http://blog.photo.sina.com.cn/showpic.html#url=http://album.sina.com.cn/pic/006dTHEXzy7hGiobI385a" rel="nofollow" data-token="a708b1bb2ed680e4dabf7b1e6d7f30d3"><img src="http://s11.sinaimg.cn/mw690/006dTHEXzy7hGiobI385a&amp;690" width="389" height="518" name="image_operate_39051516962707265" style="border:0px;" alt=""></a><br style="line-height:1.5;"><br style="line-height:1.5;"></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">&nbsp;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">实验分析：</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;margin-left:5.25pt;text-indent:24pt;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">本次实验中，我发现当光照恒定时，传感器输出值是一定的，而用手捂住传感器，那么他输出的值会变小，同理用手机闪光灯照射后他的值会变大，同时如果使用闪光那么会有一个变大的值然后恢复恒定输出。</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;margin-left:5.25pt;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">&nbsp;</span></p>
<p align="left" style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;margin-left:5.25pt;line-height:21px;"><span style="font-family:'宋体';line-height:24px;font-size:12pt;">&nbsp;</span></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:-36pt;line-height:24pt;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">七、<span style="font-family:'Times new roman';line-height:normal;font-size:7pt;">&nbsp;&nbsp;&nbsp;</span></span>&nbsp;<strong><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">总结和体会</span></strong></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;text-indent:24pt;"><span style="font-family:'宋体';line-height:1.5;font-size:12pt;">这个实验通过基站的搭建，将光照信号转换成电压信号，完成一个<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">AD</span>&nbsp;数据的采集，那么今后对自己扩展的<span style="font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;line-height:1.5;">AD</span>&nbsp;传感器的数据采集原理和这个实验是一样的。锻炼了对手能力，也对这个过程有了了解。</span></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.5;">&nbsp;</span></p>
<p style="color:rgb(0,0,0);font-family:'Microsoft YaHei', SimSun, Verdana, Arial, Helvetica, sans-serif;font-size:14px;"><span style="line-height:1.5;">&nbsp;</span></p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Allegro学习笔记——调整各层颜色及可视性</title>
		<link>https://uzzz.org/article/3335.html</link>
				<pubDate>Mon, 07 May 2018 13:41:55 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[嵌入式]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/3335.html</guid>
				<description><![CDATA[]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180507213727111?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpY2hpbWkzMzc1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p>
<p><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180507213803339?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpY2hpbWkzMzc1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p>
<p><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180507213827641?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpY2hpbWkzMzc1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p>
<p></p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>嵌入式开发之STM32开发之无线控制之PT2262/2272最简单使用-带你实现一个远程控制电灯的例子</title>
		<link>https://uzzz.org/article/3245.html</link>
				<pubDate>Wed, 18 Apr 2018 15:40:50 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[嵌入式]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/3245.html</guid>
				<description><![CDATA[控制电灯？实在太简单不过了，我手动按一下不就行了，但是如果加个远程，那就难了！ 现在常用的远程有：红外，射频！ 因为我手边的PT2262/2272模块（就是一组常用的远程传数据的模块）只有射频，所以这次实现的远程就用射频模式了。 在嵌入式开发方面，我算是个新手，不过谁不是从新手开始的，那自然本篇文章也是适合新手的！ 为了简化工作，理清头绪，我把最终开发的成品]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div id="content_views" class="markdown_views prism-github-gist">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>控制电灯？实在太简单不过了，我手动按一下不就行了，但是如果加个远程，那就难了！ <br /> 现在常用的远程有：红外，射频！ <br /> 因为我手边的PT2262/2272模块（就是一组常用的远程传数据的模块）只有射频，所以这次实现的远程就用射频模式了。 <br /> 在嵌入式开发方面，我算是个新手，不过谁不是从新手开始的，那自然本篇文章也是适合新手的！ <br /> 为了简化工作，理清头绪，我把最终开发的成品分为几大模块:PT2262模块，PT2272模块，LED灯模块，STM32开发板模块，控制程序模块，继电器模块！</p>
<h2 id="涉及的全部硬件和软件">涉及的全部硬件和软件</h2>
<p>1.SC2262（SC和PT兼容） <br /> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180503083507613?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2OTE0Mjkx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br /> 2.SC2272-M4（SC和PT兼容，M4:输出不带锁存，就是你必须一直按着按键，只要一松数据就没有了） <br /> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180503082722736?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2OTE0Mjkx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></p>
<p>2.STM32F103RBT6开发板 <br /> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180424093404460?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2OTE0Mjkx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br /> 3.核心控制程序 <br /> 4.四个LED灯 <br /> 5.排线 <br /> 6.J-Link程序烧录器 <br /> 7.u4开发软件 <br /> 8.J-Link驱动软件 <br /> 9.4个继电器</p>
<h2 id="v4配置">V4配置</h2>
<p><a href="https://blog.csdn.net/qq_26914291/article/details/79985663" rel="nofollow" data-token="5565251e3a218da5e75b7593782583a5">https://blog.csdn.net/qq_26914291/article/details/79985663</a></p>
<h2 id="gpio配置">GPIO配置</h2>
<p>参考教程:<a href="http://blog.sina.com.cn/s/blog_537d614301019ues.html" rel="nofollow" data-token="8cd7e2d1dcfba6b30e572878ba345e05">http://blog.sina.com.cn/s/blog_537d614301019ues.html</a></p>
<pre class="prettyprint"><code class=" hljs bash">//启动相应Port A的RCC
RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
GPIO_InitTypeDef   GPIO_InitStructure;
GPIO_InitStructure.GPIO_P<span class="hljs-keyword">in</span>=GPIO_P<span class="hljs-keyword">in</span>_6|GPIO_P<span class="hljs-keyword">in</span>_7|GPIO_P<span class="hljs-keyword">in</span>_8|GPIO_P<span class="hljs-keyword">in</span>_9|GPIO_P<span class="hljs-keyword">in</span>_10;
GPIO_InitStructure.GPIO_Speed=GPIO_Speed_2MHz;
GPIO_InitStructure.GPIO_Mode=GPIO_Mode_Out_PP;
GPIO_Init(GPIOA,&amp;GPIO_InitStructure);//把设置绑定到GPIOA</code></pre>
<p>定时器GPIO配置:<a href="https://blog.csdn.net/qq_26914291/article/details/80141700" rel="nofollow" data-token="871b8bdd79882b8967a5295a72c169c6">https://blog.csdn.net/qq_26914291/article/details/80141700</a></p>
<p>【注】关于相关GPIO模式详细看这:<a href="https://blog.csdn.net/l20130316/article/details/50571902" rel="nofollow" data-token="fb4114d4de360ee0676e7b4c07ce2a36">https://blog.csdn.net/l20130316/article/details/50571902</a></p>
<h2 id="控制流程">控制流程</h2>
<p><img src="https://uzshare.com/_p?https://img-blog.csdn.net/20180420170558235?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2OTE0Mjkx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br /> <img src="https://uzshare.com/_p?https://img-blog.csdn.net/2018050308450893?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI2OTE0Mjkx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""></p>
<h2 id="问题">问题</h2>
<p>半自动学习功能：<a href="http://bbs.mydigit.cn/simple/?t245739.html" rel="nofollow" data-token="e260b7bcffab2e7976437da1f516bad2">http://bbs.mydigit.cn/simple/?t245739.html</a> <br /> 继电器驱动问题： <br /> 地址问题:即单片机如何控制浮空的问题</p>
<h2 id="画图">画图</h2>
<p>1.画图采用DXP,</p>
<h2 id="程序">程序</h2>
<p><a href="https://download.csdn.net/download/qq_26914291/10388316" rel="nofollow" data-token="be46b73925ba889b199fb24baa445209">https://download.csdn.net/download/qq_26914291/10388316</a></p>
<h2 id="参考">参考</h2>
<p>1.<a href="http://bbs.mydigit.cn/simple/?t240987.html" rel="nofollow" data-token="75ccc3cbcad24f9b4b2e2e5a334d424c">学习型PT2262无线遥控开关程序</a> <br /> 2.<a href="http://bbs.mydigit.cn/read.php?tid=697807" rel="nofollow" data-token="6f7cac6ff6864519d353a7173ab704e7">PT2262芯片四路学习型无线遥控开关</a> <br /> 3<a href="https://blog.csdn.net/zitech/article/details/9257713" rel="nofollow" data-token="d718de9c247cb75d8bb18c1263194ee6">315m无线遥控模块 PT2262、PT2272</a> <br /> 4.<a href="http://www.jinchutou.com/p-35669530.html" rel="nofollow" data-token="dc4afc61a9ebdb62a582f103fb73fada">基于PT2262,PT2272实用无线遥控照明灯报告书</a> <br /> 5.<a href="https://wenku.baidu.com/view/5961f6ce83d049649b6658be.html" rel="nofollow" data-token="bf434bc20c1599c848ebb616c74c3fbc">基于PT2262PT2272无线遥控彩灯与液晶屏的设计与实现</a> <br /> 6.<a href="http://www.docin.com/p-1222790845.html" rel="nofollow" data-token="266a3a89c01fa2d6794febd636ccedd6">PT2262-PT2272无线收发讲解 </a> <br /> 7.<a href="https://wenku.baidu.com/view/2dda029e185f312b3169a45177232f60dccce75e.html" rel="nofollow" data-token="c9e3273039f7e70a43c461f0a5d2acb3">基于PT2262的无线灯控设备设计毕业论文</a> <br /> 8.<a href="http://www.cirmall.com/circuit/7225/javascript;#/details" rel="nofollow" data-token="45794bdd1fb235964d234889e9ed5215">PT2272无线遥控灯315/433MHZ设计，附原理图/PCB/BOM清单</a> <br /> 9.<a href="http://www.51hei.com/bbs/dpj-44384-1.html" rel="nofollow" data-token="cb5aa8ff2a2d390d4b2533663d1f0f32">PT2262遥控器的单片机软件解码(省去PT2272) </a> <br /> 10.<a href="https://blog.csdn.net/HES_C/article/details/74140307" rel="nofollow" data-token="2b068643c055edea77b4587b6f2e34e9">用你的手机去控制家里的电灯（demo）</a></p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-526ced5128.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>POJ-1222-尺取法，开关灯</title>
		<link>https://uzzz.org/article/2685.html</link>
				<pubDate>Sat, 15 Apr 2017 07:28:18 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[嵌入式]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2685.html</guid>
				<description><![CDATA[题目大意：有一个5*6的网格图，每个格子都是一个灯，按灯的时候会使这个灯周围其余4个灯改变状态，给出初始状态，问最后按灯的结果； 题目解析：先暴力出第一行所有按灯的情况，然后从第一行到第五行，如果i，j是亮的话，只能按i+1，j，最后判断最后一行是否全为暗的即可； AC代码： #include&#60;iostream&#62; #include&#60;cstd]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p><span style="font-size:24px;"><span style="color:#ff0000;">题目大意：</span>有一个5*6的网格图，每个格子都是一个灯，按灯的时候会使这个灯周围其余4个灯改变状态，给出初始状态，问最后按灯的结果；</span></p>
<p><span style="font-size:24px;"><span style="color:#ff0000;">题目解析：</span>先暴力出第一行所有按灯的情况，然后从第一行到第五行，如果i，j是亮的话，只能按i+1，j，最后判断最后一行是否全为暗的即可；</span></p>
<p><span style="font-size:24px;color:#009900;">AC代码：</span></p>
</p>
<pre><code class="language-cpp">#include&lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;cstring&gt;
#include&lt;string&gt;
#include&lt;algorithm&gt;
#include&lt;cmath&gt;
using namespace std;
typedef long long ll;
const int maxn = 110;
int grid[maxn][maxn],ans[maxn][maxn];
int dx[4]={-1,1,0,0},dy[4]={0,0,1,-1};
int n,t[maxn][maxn],c;
void push(int x,int y)
{
    t[x][y]^=1;
    for(int i=0;i&lt;4;i++)
    {
        int u=x+dx[i];
        int v=y+dy[i];
        if(u&lt;=0||u&gt;5||v&lt;1||v&gt;6) continue;
        t[u][v]^=1;
    }
}
bool ok()
{
    memcpy(t,grid,sizeof(grid));
    for(int i=1;i&lt;=6;i++)
    {
        if(ans[1][i])
        {
            push(1,i);
        }
    }
    for(int i=1;i&lt;5;i++)
    {
        for(int j=1;j&lt;=6;j++)
        {
            if(t[i][j])
            {
                ans[i+1][j]=1;
                push(i+1,j);
            }
            else
            {
                ans[i+1][j]=0;
            }
        }
    }
    for(int i=1;i&lt;=6;i++)
    {
        if(t[5][i]==1)
            return false;
    }
    return true;
}
void solve()
{
    for(int i=0;i&lt;(1&lt;&lt;6);i++)
    {
        for(int j=0;j&lt;6;j++)
        {
            if(i&amp;(1&lt;&lt;j))
                ans[1][j+1]=1;
            else
                ans[1][j+1]=0;
        }
        if(ok())
            break;
    }
    printf("PUZZLE #%d\n",c++);
    for(int i=1;i&lt;=5;i++)
    {
        for(int j=1;j&lt;=6;j++)
            printf("%d%c",ans[i][j],j==6?'\n':' ');
    }
}
int main()
{
    scanf("%d",&amp;n);
    c=1;
    while(n--)
    {
        for(int i=1;i&lt;=5;i++)
            for(int j=1;j&lt;=6;j++)   scanf("%d",&amp;grid[i][j]);
            solve();
    }
    return 0;
}
</code></pre>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>设置-wifi-高级设置，选择仅充电时保持WLAN开启/睡眠期间不保持wlan的开启状态，手机锁屏休眠几分钟后，再点亮屏幕，wifi一直显示开启状态</title>
		<link>https://uzzz.org/article/3167.html</link>
				<pubDate>Wed, 07 Jan 2015 01:56:36 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[嵌入式]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/3167.html</guid>
				<description><![CDATA[解决方法：缩短响应的时间； 具体方法： 路径：frameworks/base/services/java/com/android/server/wifi/WifiController.java 代码：&#160;class WifiController extends StateMachine { &#160; &#160; &#160; * being e]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p>解决方法：缩短响应的时间；</p>
<p>具体方法：</p>
<p>路径：frameworks/base/services/java/com/android/server/wifi/WifiController.java</p>
<p>代码：&nbsp;class WifiController extends StateMachine {<br /> &nbsp; &nbsp; &nbsp; * being enabled but not active exceeds the battery drain caused by<br /> &nbsp; &nbsp; &nbsp; * re-establishing a connection to the mobile data network.<br /> &nbsp; &nbsp; &nbsp; */<br /> &#8211; &nbsp; &nbsp;private static final long DEFAULT_IDLE_MS = 15 * 60 * 1000; /* 15 minutes */<br /> + &nbsp; &nbsp;private static final long DEFAULT_IDLE_MS = 1 * 60 * 1000; /* 1 minutes */</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Altium designer手工布线技巧 边总结别更新</title>
		<link>https://uzzz.org/article/2584.html</link>
				<pubDate>Thu, 07 Nov 2013 02:04:22 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[嵌入式]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2584.html</guid>
				<description><![CDATA[本人小菜鸟，布线都是用的自动布线然后手动修改，今天被公司里面的大神们跟教育了。。。为啥呢？ 自动布线的产品80%都不能通过静电等测试~~我也不知为啥，然后开始手工布线。。。。 技巧我也不知道，就是边使用边总结，边写边更新吧。 1.善用Ctrl+鼠标左键。&#160;&#160; 这个组合键的功能就是 让相同网络口的接线口或者线高亮，其他部分变暗（比只是鼠标移]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p>本人小菜鸟，布线都是用的自动布线然后手动修改，今天被公司里面的大神们跟教育了。。。为啥呢？ 自动布线的产品80%都不能通过静电等测试~~我也不知为啥，然后开始手工布线。。。。<br /> 技巧我也不知道，就是边使用边总结，边写边更新吧。</p>
<p>1.善用Ctrl+鼠标左键。&nbsp;&nbsp; 这个组合键的功能就是 让相同网络口的接线口或者线高亮，其他部分变暗（比只是鼠标移动到线或者端口上的对比要明显很多，方便布局布线）<br /> 2.善用鼠标右键和CTRL+滚轮 为啥有事CTRL键呢，当你按住CTRL滚动鼠标滚轮的时候，会缩放或者放大当前的图，配合鼠标右键拖放，会使你的图纸在你的手里非常灵活（视角）。</p>
<p>11.07</p>
<p>3.布局顺序（先大后小，先核心后次，先难后易，先特殊后一般原则）</p>
<p>4.走线的时候 按shift+space可以改变走线方式，如电源等大电流部分 应该使用弧形角</p>
<p>&nbsp;11.07</p>
<p>暂时这些，待发现和更新，有什么我不知道的望csdn或者同行的高手们指点一二，共同进步~~</p>
<p>5.n-show-all &nbsp;可以选择显示全部网络口和隐藏</p>
<p>6.敷铜的时候经常明明选着了连接到某个网络，但是敷铜的时候不能连接， &nbsp; 在设计&#8211;规则-Plan-Polygon Connect Style 中 PolygonConnect 项中约束这关联类型选择Direct Connect就可以了</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>YUV422转BGR888（海思3516平台）</title>
		<link>https://uzzz.org/article/3436.html</link>
				<pubDate>Fri, 15 Mar 2013 01:14:55 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[Life]]></category>
		<category><![CDATA[linux]]></category>
		<category><![CDATA[嵌入式]]></category>
		<category><![CDATA[开发]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/3436.html</guid>
				<description><![CDATA[#include "hi_comm_ive.h" #include "mpi_ive.h" #pragma pack(1) typedef struct{ short type; int size; short reserved1; short reserved2; int offset; } BMPHeader; typedef struct{ int s]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<pre><code class="language-cpp">#include "hi_comm_ive.h"
#include "mpi_ive.h"

#pragma pack(1)

typedef struct{
    short type;
    int size;
    short reserved1;
    short reserved2;
    int offset;
} BMPHeader;

typedef struct{
    int size;
    int width;
    int height;
    short planes;
    short bitsPerPixel;
    unsigned compression;
    unsigned imageSize;
    int xPelsPerMeter;
    int yPelsPerMeter;
    int clrUsed;
    int clrImportant;
} BMPInfoHeader;

#pragma pack()


int saveBMPFile(unsigned char* src, int width, int height, const char* name){
	BMPHeader hdr;
	BMPInfoHeader infoHdr;
    int ret = 0;

	FILE* fp = NULL;
    if(NULL == src) 
    {
		return (-1);
    }

    fp = fopen(name,"wb");
	if(NULL == fp)
    {
		printf("saveBMPFile: Err: Open!\n");
		return (-1);
	}

	infoHdr.size	= sizeof(BMPInfoHeader);
	infoHdr.width	= width;
	infoHdr.height	= 0 - height;
	infoHdr.planes	= 1;
	infoHdr.bitsPerPixel	= 24;
	infoHdr.compression		= 0;
	infoHdr.imageSize		= width*height;
	infoHdr.xPelsPerMeter	= 0;
	infoHdr.yPelsPerMeter	= 0;
	infoHdr.clrUsed			= 0;
	infoHdr.clrImportant	= 0;

	hdr.type	= 0x4D42;
	hdr.size	= 54 + infoHdr.imageSize*3;
	hdr.reserved1	= 0;
	hdr.reserved2	= 0;
	hdr.offset	= 54;


    //BGR2RGB
    int i;
    int temp;
    for(i = 0;i &lt; width*height;i++)
    {
        temp = src[i*3];
        src[i*3] = src[i*3 + 2];
        src[i*3 + 2] = temp;
    }

	fwrite(&amp;hdr, sizeof(hdr), 1, fp);
  	fwrite(&amp;infoHdr, sizeof(infoHdr), 1, fp);
 	fwrite(src, sizeof(unsigned char), width*height*3, fp); //TODO:
    fflush(fp);

	if(ferror(fp)){
		printf("saveBMPFile: Err: Unknown!***\n");
	}

	fclose(fp);
    fp = NULL;

	return 0;
}

int main()
{
    HI_VOID *pVirtSrc = NULL;
	HI_VOID *pVirtDst = NULL;
	IVE_SRC_INFO_S stSrc;
	IVE_MEM_INFO_S stDst;
    unsigned int * pImage = NULL;

    stSrc.enSrcFmt = IVE_SRC_FMT_SP422;
    stSrc.stSrcMem.u32Stride = nWidth;
    stSrc.stSrcMem.u32PhyAddr = frameInfo-&gt;phyAddr;
    stSrc.u32Width = nWidth;
    stSrc.u32Height = nHeight;

    stDst.u32Stride = nWidth;

    IVE_HANDLE IveHandle;
    HI_BOOL bInstant = HI_TRUE;
    IVE_CSC_CTRL_S stCscCtrl;
    stCscCtrl.enOutFmt = IVE_CSC_OUT_FMT_PACKAGE;
    stCscCtrl.enCscMode = IVE_CSC_MODE_VIDEO_BT601_AND_BT656;

    //s32Ret = HI_MPI_SYS_MmzAlloc_Cached (&amp;pstSrc-&gt;stSrcMem.u32PhyAddr,&amp;pVirtSrc,"User", HI_NULL, pstSrc-&gt;u32Height * pstSrc-&gt;stSrcMem.u32Stride*2);
    //memset(pVirtSrc,1,pstSrc-&gt;u32Height * pstSrc-&gt;stSrcMem.u32Stride);
    ret = HI_MPI_SYS_MmzAlloc_Cached (&amp;stDst.u32PhyAddr, &amp;pVirtDst,"User", HI_NULL, stSrc.u32Height * stDst.u32Stride);
    //s32Ret = HI_MPI_IVE_DMA(&amp;IveHandle, &amp;stSrc, &amp;stDst, bInstant);
    //HI_MPI_SYS_MmzFree(stSrc.stSrcMem.u32PhyAddr, pVirtSrc);
    HI_MPI_SYS_MmzFree(stDst.u32PhyAddr, pVirtDst);
    ret=HI_MPI_IVE_CSC(&amp;IveHandle,&amp;stSrc,&amp;stDst,&amp;stCscCtrl,bInstant);
    if(ret==HI_FAILURE)
    {
        printf("YUV Convert to RGB failed!\n");
        return HI_FAILURE;
    }

    pImage = HI_MPI_SYS_Mmap(stDst.u32PhyAddr, nLengthImage/2*3);
    if(NULL == pImage)
    {
        msg_print( "HI_MPI_SYS_Mmap err!\n");
        return NVD_FALSE;
    }

    ret = saveBMPFile((Byte*)pImage, nWidth, nHeight, "/mnt/rgb.dib");
    if(0 != ret)
    {
        printf( "saveBMPFile error\n");
        return;
    }
    printf("saveBMPFile done!\n");

    //uninit();
}</code></pre>
<p> &nbsp;</p>
</p></div>
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
