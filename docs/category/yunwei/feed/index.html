<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>运维 &#8211; 有组织在!</title>
	<atom:link href="https://uzzz.org/category/yunwei/feed" rel="self" type="application/rss+xml" />
	<link>https://uzzz.org/</link>
	<description></description>
	<lastBuildDate>Mon, 07 Oct 2019 07:55:55 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.4</generator>

<image>
	<url>https://uzzz.org/wp-content/uploads/2019/10/cropped-icon-32x32.png</url>
	<title>运维 &#8211; 有组织在!</title>
	<link>https://uzzz.org/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>安装Fedora系统和一些系统配置</title>
		<link>https://uzzz.org/article/2360.html</link>
				<pubDate>Mon, 07 Oct 2019 07:55:55 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[运维]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2360.html</guid>
				<description><![CDATA[1，在VMware上安装Fedora工作站系统 新建Fedora虚拟机系统，配置好内存、处理器、硬盘、CD、网络配置等参数。 配置 内容 配置 2GB 处理器 2 硬盘 20GB 网络模式 桥接模式（自动） 系统版本 Fedora-Workstation-Live-x86_64-30-1.2 （1）安装Fedora系统 打开虚拟机进入系统安装界面选择暗安装到硬盘驱动 之后选择硬盘语言，再点击“安装目的地”按钮，进行硬盘的配置： 选择已有硬盘之后，点击左下方“完善磁盘摘要以及引导程序”，进行磁盘引导设置： 选择已有硬盘之后，点击左下方“设为Boot设备”，将磁盘赊着为引导盘： 选定系统盘后，进行系统安装，安装完成后重启，第一次启动Fedora工作站有限设置用户名和密码，注意这里设置的普通的用户名，管理员用户需要在系统系统启动后进行设置。 （2）设置用户名和密码 新装Fedora系统后，重启Fedora工作站，首先进入用户名和密码设置页面，在这里设置一个普通用户。 这里设置全名和用户名分别为： 全名：Strive to Positive Energy 用户名：s2pe 点击“前进”按钮，设置普通用户密码，之后一路点击“前进”按钮可完成Fedora工作站的初始化设置、 2、Fedora工作站初始化的一些配置 （1）配置管理员用户密码 在”活动“-&#62;”工具“菜单中打开一个命令终端 在终端中输入命令 sudo passwd root 输入二次密码长度八位以上的管理员用户密码。 点击右上角关机图标，注销当前用户，使用管理员账户登录。 （2）查询系统参数 查看内核版本： uname -a 查看测判大小 fdisk -l &#124; grep Disk 3、软件包管理软件的安装和配置 （1）yum的安装与配置 查询是否安装了yum软件 rpm -qa &#124; grep yum 可以看到，在Fedora30中，dnf-yum已经取代了yum。 配置阿里镜像源： 访问阿里云镜像站选择Fedora系统，按照其步骤进行配置 （2）apt安装与配置 查询是否安装了apt软件 rpm -qa &#124; grep apt 显示已安装版本为 raptor2-2.0.15-18.fc30.x86_64 因为已经配置过yum源文件，此处不用再配置软件源。 4、ssh服务器配置 查看是否安装了ssh rpm -qa &#124; grep ssh 查看ssh服务是否已经启动： ps -e &#124; grep ssh 开启ssh服务 service sshd start 查看ssh服务网络连接情况 netstaat -ntlp 设置开机启动ssh服务 sudo systemctl enable ssh 5、设置合盒盖不休眠 编辑一下文件： vi /etc/systemd/logind.conf 更改参数属性： HandleLidSwitch = lock 运行： systemctl restart systemd-logind ## 5、设置合盒盖不休眠 编辑一下文件： vi /etc/systemd/logind.conf 更改参数属性： HandleLidSwitch = lock 运行： systemctl restart systemd-logind]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<h2><a id="1VMwareFedora_1"></a>1，在VMware上安装Fedora工作站系统</h2>
<p>新建Fedora虚拟机系统，配置好内存、处理器、硬盘、CD、网络配置等参数。</p>
<table>
<thead>
<tr>
<th>配置</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>配置</td>
<td>2GB</td>
</tr>
<tr>
<td>处理器</td>
<td>2</td>
</tr>
<tr>
<td>硬盘</td>
<td>20GB</td>
</tr>
<tr>
<td>网络模式</td>
<td>桥接模式（自动）</td>
</tr>
<tr>
<td>系统版本</td>
<td>Fedora-Workstation-Live-x86_64-30-1.2</td>
</tr>
</tbody>
</table>
<p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007155628277.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="虚拟机配置"></p>
<h3><a id="1Fedora_16"></a>（1）安装Fedora系统</h3>
<p>打开虚拟机进入系统安装界面选择暗安装到硬盘驱动<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007155757483.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="选择安装硬盘驱动"></p>
<p>之后选择硬盘语言，再点击“安装目的地”按钮，进行硬盘的配置：<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007155907998.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="进行硬盘配置"></p>
<p>选择已有硬盘之后，点击左下方“完善磁盘摘要以及引导程序”，进行磁盘引导设置：<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007155946334.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="进行磁盘引导设置"><br /> 选择已有硬盘之后，点击左下方“设为Boot设备”，将磁盘赊着为引导盘：<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007160024531.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="将磁盘赊着为引导盘"><br /> 选定系统盘后，进行系统安装，安装完成后重启，第一次启动Fedora工作站有限设置用户名和密码，注意这里设置的普通的用户名，管理员用户需要在系统系统启动后进行设置。</p>
<h3><a id="2_30"></a>（2）设置用户名和密码</h3>
<p>新装Fedora系统后，重启Fedora工作站，首先进入用户名和密码设置页面，在这里设置一个普通用户。</p>
<p>这里设置全名和用户名分别为：</p>
<p>全名：Strive to Positive Energy</p>
<p>用户名：s2pe<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007160151172.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="设置普通用户名和全名"><br /> 点击“前进”按钮，设置普通用户密码，之后一路点击“前进”按钮可完成Fedora工作站的初始化设置、<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007160225894.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="初始化工作站页面"></p>
<h2><a id="2Fedora_42"></a>2、Fedora工作站初始化的一些配置</h2>
<h3><a id="1_44"></a>（1）配置管理员用户密码</h3>
<p>在”活动“-&gt;”工具“菜单中打开一个命令终端<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007160305357.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="打开命令终端"><br /> 在终端中输入命令</p>
<pre><code>sudo passwd root
</code></pre>
<p>输入二次密码长度八位以上的管理员用户密码。<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007160410827.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="输入管理员用户密码"><br /> 点击右上角关机图标，注销当前用户，使用管理员账户登录。<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007160455116.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="注销当前用户"></p>
<h3><a id="2_58"></a>（2）查询系统参数</h3>
<p>查看内核版本：</p>
<pre><code>uname -a
</code></pre>
<p>查看测判大小</p>
<pre><code>fdisk -l | grep Disk
</code></pre>
<h2><a id="3_72"></a>3、软件包管理软件的安装和配置</h2>
<h3><a id="1yum_74"></a>（1）yum的安装与配置</h3>
<p>查询是否安装了yum软件</p>
<pre><code>rpm -qa | grep yum
</code></pre>
<p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007160600674.png" alt="查看yum软件结果"><br /> 可以看到，在Fedora30中，dnf-yum已经取代了yum。</p>
<p>配置阿里镜像源：</p>
<p>访问<a href="https://opsx.alibaba.com/mirror" rel="nofollow" data-token="a1e3b72a8397d6cd8de51120146ad6d8">阿里云镜像站</a>选择Fedora系统，按照其步骤进行配置<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007160644703.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="阿里云镜像站"></p>
<p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007160734865.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="阿里镜像库帮助文档"></p>
<h3><a id="2apt_90"></a>（2）apt安装与配置</h3>
<p>查询是否安装了apt软件</p>
<pre><code>rpm -qa | grep apt
</code></pre>
<p>显示已安装版本为</p>
<pre><code>raptor2-2.0.15-18.fc30.x86_64
</code></pre>
<p>因为已经配置过yum源文件，此处不用再配置软件源。</p>
<h2><a id="4ssh_106"></a>4、ssh服务器配置</h2>
<p>查看是否安装了ssh</p>
<pre><code>rpm -qa | grep ssh
</code></pre>
<p><img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20191007160850522.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JvdWpoZQ==,size_16,color_FFFFFF,t_70" alt="查看ssh服务器版本"><br /> 查看ssh服务是否已经启动：</p>
<pre><code>ps -e | grep ssh
</code></pre>
<p>开启ssh服务</p>
<pre><code>service sshd start
</code></pre>
<p>查看ssh服务网络连接情况</p>
<pre><code>netstaat -ntlp
</code></pre>
<p>设置开机启动ssh服务</p>
<pre><code>sudo systemctl enable ssh
</code></pre>
<h2><a id="5_137"></a>5、设置合盒盖不休眠</h2>
<p>编辑一下文件：</p>
<pre><code>vi /etc/systemd/logind.conf
</code></pre>
<p>更改参数属性：</p>
<pre><code>HandleLidSwitch = lock
</code></pre>
<p>运行：</p>
<pre><code>systemctl restart systemd-logind
</code></pre>
<pre><code>
## 5、设置合盒盖不休眠

编辑一下文件：

</code></pre>
<p>vi /etc/systemd/logind.conf</p>
<pre><code>
更改参数属性：

</code></pre>
<p>HandleLidSwitch = lock</p>
<pre><code>
运行：

</code></pre>
<p>systemctl restart systemd-logind</p>
<pre><code>
</code></pre>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-526ced5128.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Err-disabled网络故障分析</title>
		<link>https://uzzz.org/article/2332.html</link>
				<pubDate>Wed, 28 Aug 2019 08:15:45 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[运维]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2332.html</guid>
				<description><![CDATA[[日志信息] 这两天有两起网络交换机异常警报，在缺省配置下，一旦接口被置为err-disable，IOS将不会试图恢复接口。当端口处于err-disabled状态，将没有任何流量从该端口被传发出去，也将不接收任何进站流量。从交换机外观上看去，端口相对应的LED状态灯也将由正常绿色变为暗黄色或关闭。两起的日志信息分别如下： 案1： # 接口信息 show int fa1/0/18 br FastEthernet1/0/18 is down,line protocol is down (err-disabled) # 查看产生err-disabled的原因 sh int fa1/0/18 status err-disabled Port Name Status Reason Fa1/0/18 err-disabled bpduguard 案2： # 日志信息 show logging loopback error detected on Gi1/0/46, putting Gi1/0/46 in err-disable state [常用命令] # 查看接口状态 show interfaces status # 查看触发err-disable的原因 show interfaces status err-disabled # 查询Err-disabled监控事件 show errdisable detect # 查询Err-disabled自动恢复事件 show errdisable recovery # 启动Err-disabled自动恢复事件 errdisable recovery cause all # 变更Err-disabled自动恢复时间 errdisable recovery interval [常见问题] EtherChannel misconfiguration 当F EC两端配置不匹配的时候就会出现err-disable。假设Switch A把FEC模式配置为on，这时Switch A是不会发送PAgP包和相连的Switch B去协商FEC的，它假设Switch B已经配置好FEC了。但实事上Swtich B并没有配置FEC，当Switch B的这个状态超过1分钟后，Switch A的STP就认为有环路出现，因此也就出现了err-disable。解决办法就是把FEC的模式配置为channel-group 1 mode desirable non-silent这个意思是只有当双方的FEC协商成功后才建立channel，否则接口还处于正常状态。 Duplex mismatch 双工不匹配。一端配置为half-duplex后，他会检测对端是否在传输数据，只有对端停止传输数据，他才会发送类似于ack的包来让链路up，但对端却配置成了full-duplex，他才不管链路是否是空闲的，他只会不停的发送让链路up的请求，这样下去，链路状态就变成err- disable了。 BPDU port guard BPDU，也就是和portfast和BPDU guard有关。假如一个接口配置了portfast，那也就是说这个接口应该和一个pc连接，pc是不会发送spanning-tree的BPDU帧的，因此这个口也接收BPDU来生成spanning-tree，治理员也是出于好心在同一接口上配置了BPDU guard来防止未知的BPDU帧以增强安全性，但他恰恰不小心把一个交换机接到这个同时配置了portfast和BPDU guard接口上，于是这个接口接到了BPDU帧，因为配置了BPDU guard，这个接口自然要进入到err-disable状态。解决办法:no spanning-tree portfast bpduguard default，或者直接把portfast关了。 UDLD UDLD。UDLD是cisco的私有2层协议，用于检测链路的单向问题。有的时候物理层是up的，但链路层就是down，这时候就需要 UDLD去检测链路是否是真的up的。当AB两端都配置好UDLD后，A给B发送一个包含自己port id的UDLD帧，B收到后会返回一个UDLD帧，并在其中包含了收到的A的port id，当A接收到这个帧并发现自己的port id也在其中后，认为这链路是好的。反之就变成err-disable状态了。假设A配置了UDLD，而B没有配置UDLD:A给B发送一个包含自己 port id的帧，B收到后并不知道这个帧是什么，也就不会返回一个包含A的port id的UDLD帧，那么这时候A就认为这条链路是一个单向链路，自然也就变成err-disable状态了。 非常有用的解决UDLD问题命令 reset udld Link-flap error 链路的抖动，当链路在10秒内反复up、down五次，那么就进入err-disable状态。 Loopback error keepalive loopback。在12.1EA之前，默认情况下交换机会在所有接口都发送keepalive信息，由于一些不通交换机协商spanning-tree 可能会有问题，一个接口又收到了自己发出的keepalive，那么这个接口就会变成err-disable了。解决办法就是把keepalive关了。或者把ios升到12.2SE。交换机有环路形成也是检查方向。 Port security violation 由于配置了port-security violation shutdown]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div id="content_views" class="markdown_views prism-github-gist">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p><strong>[日志信息]</strong><br /> 这两天有两起网络交换机异常警报，在缺省配置下，一旦接口被置为err-disable，IOS将不会试图恢复接口。当端口处于err-disabled状态，将没有任何流量从该端口被传发出去，也将不接收任何进站流量。从交换机外观上看去，端口相对应的LED状态灯也将由正常绿色变为暗黄色或关闭。两起的日志信息分别如下：</p>
<blockquote>
<p>案1：<br /> # 接口信息<br /> show int fa1/0/18 br<br /> FastEthernet1/0/18 is down,line protocol is down (err-disabled)<br /> # 查看产生err-disabled的原因<br /> sh int fa1/0/18 status err-disabled<br /> Port Name Status Reason<br /> Fa1/0/18 err-disabled bpduguard</p>
</blockquote>
<blockquote>
<p>案2：<br /> # 日志信息<br /> show logging<br /> loopback error detected on Gi1/0/46, putting Gi1/0/46 in err-disable state</p>
</blockquote>
<p>[常用命令]<br /> # 查看接口状态<br /> show interfaces status</p>
<p># 查看触发err-disable的原因<br /> show interfaces status err-disabled</p>
<p># 查询Err-disabled监控事件<br /> show errdisable detect</p>
<p># 查询Err-disabled自动恢复事件<br /> show errdisable recovery</p>
<p># 启动Err-disabled自动恢复事件<br /> errdisable recovery cause all</p>
<p># 变更Err-disabled自动恢复时间<br /> errdisable recovery interval</p>
<p>[常见问题]<br /> <strong>EtherChannel misconfiguration</strong><br /> 当F EC两端配置不匹配的时候就会出现err-disable。假设Switch A把FEC模式配置为on，这时Switch A是不会发送PAgP包和相连的Switch B去协商FEC的，它假设Switch B已经配置好FEC了。但实事上Swtich B并没有配置FEC，当Switch B的这个状态超过1分钟后，Switch A的STP就认为有环路出现，因此也就出现了err-disable。解决办法就是把FEC的模式配置为channel-group 1 mode desirable non-silent这个意思是只有当双方的FEC协商成功后才建立channel，否则接口还处于正常状态。</p>
<p><strong>Duplex mismatch</strong><br /> 双工不匹配。一端配置为half-duplex后，他会检测对端是否在传输数据，只有对端停止传输数据，他才会发送类似于ack的包来让链路up，但对端却配置成了full-duplex，他才不管链路是否是空闲的，他只会不停的发送让链路up的请求，这样下去，链路状态就变成err- disable了。</p>
<p><strong>BPDU port guard</strong><br /> BPDU，也就是和portfast和BPDU guard有关。假如一个接口配置了portfast，那也就是说这个接口应该和一个pc连接，pc是不会发送spanning-tree的BPDU帧的，因此这个口也接收BPDU来生成spanning-tree，治理员也是出于好心在同一接口上配置了BPDU guard来防止未知的BPDU帧以增强安全性，但他恰恰不小心把一个交换机接到这个同时配置了portfast和BPDU guard接口上，于是这个接口接到了BPDU帧，因为配置了BPDU guard，这个接口自然要进入到err-disable状态。解决办法:no spanning-tree portfast bpduguard default，或者直接把portfast关了。</p>
<p><strong>UDLD</strong><br /> UDLD。UDLD是cisco的私有2层协议，用于检测链路的单向问题。有的时候物理层是up的，但链路层就是down，这时候就需要 UDLD去检测链路是否是真的up的。当AB两端都配置好UDLD后，A给B发送一个包含自己port id的UDLD帧，B收到后会返回一个UDLD帧，并在其中包含了收到的A的port id，当A接收到这个帧并发现自己的port id也在其中后，认为这链路是好的。反之就变成err-disable状态了。假设A配置了UDLD，而B没有配置UDLD:A给B发送一个包含自己 port id的帧，B收到后并不知道这个帧是什么，也就不会返回一个包含A的port id的UDLD帧，那么这时候A就认为这条链路是一个单向链路，自然也就变成err-disable状态了。<br /> 非常有用的解决UDLD问题命令<br /> reset udld</p>
<p><strong>Link-flap error</strong><br /> 链路的抖动，当链路在10秒内反复up、down五次，那么就进入err-disable状态。</p>
<p><strong>Loopback error</strong><br /> keepalive loopback。在12.1EA之前，默认情况下交换机会在所有接口都发送keepalive信息，由于一些不通交换机协商spanning-tree 可能会有问题，一个接口又收到了自己发出的keepalive，那么这个接口就会变成err-disable了。解决办法就是把keepalive关了。或者把ios升到12.2SE。交换机有环路形成也是检查方向。</p>
<p><strong>Port security violation</strong><br /> 由于配置了port-security violation shutdown</p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-526ced5128.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>暗影精灵双系统（win10和Ubuntu16.04）安装+Cuda和tensorflow安装-深度学习环境配置</title>
		<link>https://uzzz.org/article/2173.html</link>
				<pubDate>Sun, 28 Jul 2019 05:27:40 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[运维]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2173.html</guid>
				<description><![CDATA[参考教程一：https://blog.csdn.net/qq_42121640/article/details/80635071 参考教程二：https://blog.csdn.net/zr459927180/article/details/51627910 参考教程三：https://blog.csdn.net/qq_35976351/article/details/89178917 &#160; 1、首先暗影精灵4Plus: （1）F10:设置Bios选项讲legacy模型启用，传统模式启用：Ubuntu的安装选择非UEFI的情况。 （2）将secure boot关闭。 （3）F9:来选择安装启动盘。 2、UltraISO中，将镜像刻盘时：选择： win10：直接刻 Ubuntu16.04：一定要点击“便捷启动”&#8211;“写入新的驱动器引导扇区”-“Syslinux” 3、先装win10，然后装Ubuntu。 通过EasyBCD选择“添加新条目”，选择Linux/BSD操作系统，在“驱动器”栏目选择/boot的分区。可以通过大小来识别： &#160; 本文重点强调以下几个坑： 第一：此处强调一点：不要像参考教程二中建议的/boot只留200M,不够的，建议1G左右，因为只要有更新不及时清理就会满，到时候安装其他东西都是导致失败。所以建议1G或2G。 第二：暗影精灵4Plus可以直接装cuda10，所以没必要担心16.04。直接按照参考三，直接装。 第三：补充安装细节： 将系统安装在固态盘上，此处电脑固态256G。所以平分两份：128Gwin10,128GUbuntu. win10的C盘，新建时会多出来一个500M的预留，导致一个盘只能分成4个主分区，win10占据两个。 Ubuntu新建分区时，按照前两个参考：先建/boot 1到2个G。然后建立swap分区。剩余本人全分给了/。在1T的机械硬盘上新建了一个300G的home。 第四：按照参考三：补充配置环境变量： vi ~/.bashrc source ~/.bashrc nvcc -V 第五：nvidia-smi.加tensorflow代码测试。 &#160;]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p>参考教程一：<a href="https://blog.csdn.net/qq_42121640/article/details/80635071" rel="nofollow" data-token="9698b420642b46bcd12eb937e01e49b4">https://blog.csdn.net/qq_42121640/article/details/80635071</a></p>
<p>参考教程二：<a href="https://blog.csdn.net/zr459927180/article/details/51627910" rel="nofollow" data-token="00940465e78f7ca877737fed87f98265">https://blog.csdn.net/zr459927180/article/details/51627910</a></p>
<p>参考教程三：<a href="https://blog.csdn.net/qq_35976351/article/details/89178917" rel="nofollow" data-token="95b8870e80a5c90bf2d416b0ba31d201">https://blog.csdn.net/qq_35976351/article/details/89178917</a></p>
<p>&nbsp;</p>
<h3>1、首先暗影精灵4Plus:</h3>
<p>（1）F10:设置Bios选项讲legacy模型启用，传统模式启用：Ubuntu的安装选择非UEFI的情况。</p>
<p>（2）将secure boot关闭。</p>
<p>（3）F9:来选择安装启动盘。</p>
<h3>2、UltraISO中，将镜像刻盘时：选择：</h3>
<p>win10：直接刻</p>
<p>Ubuntu16.04：一定要点击“便捷启动”&#8211;“写入新的驱动器引导扇区”-“Syslinux”</p>
<h3>3、先装win10，然后装Ubuntu。</h3>
<p>通过EasyBCD选择“添加新条目”，选择Linux/BSD操作系统，在“驱动器”栏目选择/boot的分区。可以通过大小来识别：</p>
<p>&nbsp;</p>
<h1>本文重点强调以下几个坑：</h1>
<p>第一：此处强调一点：不要像参考教程二中建议的/boot只留200M,不够的，建议1G左右，因为只要有更新不及时清理就会满，到时候安装其他东西都是导致失败。所以建议1G或2G。</p>
<p>第二：暗影精灵4Plus可以直接装cuda10，所以没必要担心16.04。直接按照参考三，直接装。</p>
<p>第三：补充安装细节：</p>
<p>将系统安装在固态盘上，此处电脑固态256G。所以平分两份：128Gwin10,128GUbuntu.</p>
<ul>
<li>win10的C盘，新建时会多出来一个500M的预留，导致一个盘只能分成4个主分区，win10占据两个。</li>
<li>Ubuntu新建分区时，按照前两个参考：先建/boot 1到2个G。然后建立swap分区。剩余本人全分给了/。在1T的机械硬盘上新建了一个300G的home。</li>
</ul>
<p>第四：按照参考三：补充配置环境变量：</p>
<blockquote>
<p><strong>vi ~/.bashrc</strong></p>
<p><strong>source ~/.bashrc</strong></p>
<p><strong>nvcc -V</strong></p>
</blockquote>
<p>第五：nvidia-smi.加tensorflow代码测试。</p>
<p>&nbsp;</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>企业威胁情报平台建设之暗网监控</title>
		<link>https://uzzz.org/article/1816.html</link>
				<pubDate>Wed, 26 Jun 2019 05:02:08 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[信息安全]]></category>
		<category><![CDATA[网络安全]]></category>
		<category><![CDATA[运维]]></category>
		<category><![CDATA[暗网]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/1816.html</guid>
				<description><![CDATA[一、前言 相信大家对暗网这个概念并不陌生，众所周知，暗网藏着一个暗黑版的交易市场，违法工具、色情交易、毒品交易、枪械信息比比皆是，俨然一个网络犯罪分子聚集的“虎狼之穴”。我们使用Tor浏览器等可以轻松访问暗网中的浅层网，主要是黄赌毒和数据情报信息，如丝绸之路等。 对于企业而言，往往不免被黑客攻击而被获取大量的数据，而这些数据一般会优先在暗网售卖，如近年来的12306、各大互联网公司等的数据泄露事件。为了及时响应突发的数据泄露事件，企业需要一款实时监控暗网数据泄露的威胁情报平台，用来监控敏感数据泄露、薅羊毛、业务安全风险等事件。 二、代理服务器搭建 由于国内网络环境的原因，为了顺利访问暗网，我们需要一台海外服务器，系统版本是ubuntu 18.04(当然其他系统也可以，只是本文会把这个版本的系统作为例子)，同时需要在这台服务器上安装Tor与Privoxy用作访问代理服务器。 本文的系统版本： root@536ef99cab94:/# cat /etc/issue.net Ubuntu 18.04.2 LTS 2.1 整体架构 从图上可以看到，Privoxy作为一个中转代理，主要是把http协议转socks5协议，而Tor则负责把socks5转Tor协议。所以整个代理访问过程为： 1.用户输入后缀为onion的地址，由Privoxy暴露的8118端口访问http协议； 2.Privoxy把http协议转发给Tor，Tor获取该网站公钥进行加密，通过Tor通信链路发送信息给Tor节点，由该节点转发请求到.onion网站。 2.2 安装Tor 可能很多人一开始会直接执行这条命令：sudo apt-get install tor，从这个命令安装的Tor是v2版本的，不支持较新的加密算法，所以导致访问不到某些使用最新加密算法的暗网网址。 Tor v2到Tor v3的转变主要表现为如下几点： 1.签名算法从SHA1/DH/RSA1024升级到SHA3/ed25519/curve25519； 2.改进的Tor directory protocol，安全性更高； 3.更好的洋葱地址，换成sha3，可以提高枚举生成一样地址的难度； 4.可拓展的交换协议。 参考官网的安装方法，安装最新版（v3版本）的Tor步骤如下： 1.在/etc/apt/sources.list添加如下源： deb https://deb.torproject.org/torproject.org bionic main deb-src https://deb.torproject.org/torproject.org bionic main 2.添加gpg密钥，执行如下命令： curl https://deb.torproject.org/torproject.org/A3C4F0F979CAA22CDBA8F512EE8CBC9E886DDD89.asc &#124; gpg --import gpg --export A3C4F0F979CAA22CDBA8F512EE8CBC9E886DDD89 &#124; apt-key add - 3.安装Tor： apt update apt install tor deb.torproject.org-keyring 4.查看安装好Tor的版本，可知本文安装的Tor版本为0.3.5.8： root@536ef99cab94:/# tor -v Jun 18 14:30:43.530 [notice] Tor 0.3.5.8 running on Linux with Libevent 2.1.8-stable, OpenSSL 1.1.1, Zlib 1.2.11, Liblzma 5.2.2, and Libzstd 1.3.3. Jun 18 14:30:43.531 [notice] Tor can't help you if you use it wrong! Learn how to be safe at https://www.torproject.org/download/download#warning Jun 18 14:30:43.531 [warn] Command-line option '-v' with no value. Failing. Jun 18 14:30:43.531 [err] Reading config failed--see warnings above. 2.3 配置Tor Tor配置文件位于/etc/tor/torrc与/etc/tor/torsocks.conf： /etc/tor/torsocks.conf定义了让socks协议转Tor协议的端口与地址； /etc/tor/torrc是Tor的用户配置，在这个文件里我们修改http代理（polipo、privoxy）、即时通信（pidgin、lrssi）、TorDNS等。 为了支持Torv3版本，需要在/etc/tor/torrc文件中加上： HiddenServiceDir /var/lib/tor/other_hidden_service/ HiddenServicePort 80 127.0.0.1:80 HiddenServiceVersion 3 修改完成后，在命令行输入service tor start或tor即可启动Tor。 2.4 安装与配置Privoxy 这里暂时没有什么版本要求，所以可以直接执行apt-get install privoxy。 安装好后，为了让Privoxy把http协议转发到Tor，需要编辑/etc/privoxy/config加上： forward-socks5 / 127.0.0.1:9050 . listen-address 0.0.0.0:8118 修改后，重启服务service privoxy restart。 2.5 验证代理器是否可用 Tor浏览器虽然可以使用meek-azure来访问暗网网站，但是访问速度较慢。为了验证我们搭好的代理服务器是否可用，我们可以修改Tor浏览器的网络设置（假设我们的代理服务器ip为：11.11.11.11）： 设置完成后访问一个暗网网站，如果能访问成功的话即说明我们的代理服务器可用，同时访问速度也比meek-azure快得多。 当然，我们也可以更快捷地输入下面的命令进行测试： ➜ ~ curl -x 11.11.11.11:8118 https://httpbin.org/ip { "origin": "178.175.132.225, 178.175.132.225" } 可以查询到178.175.132.225的所在地为国外的摩尔多瓦，为Tor节点的出口地址。 三、开发实时监控程序 在上一章节我们搭好了代理服务器，相当于拥有了访问暗网的钥匙，虽然可以用Tor浏览器+代理更快访问暗网网址，但是人工并不能做到24小时监控而及时发现数据泄露事件，因此我们需要开发一个爬虫程序实时监控暗网网站。 3.1 暗网网站的特点]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div id="content_views" class="markdown_views prism-dracula">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>一、前言</p>
<blockquote>
<p>相信大家对暗网这个概念并不陌生，众所周知，暗网藏着一个暗黑版的交易市场，违法工具、色情交易、毒品交易、枪械信息比比皆是，俨然一个网络犯罪分子聚集的“虎狼之穴”。我们使用Tor浏览器等可以轻松访问暗网中的浅层网，主要是黄赌毒和数据情报信息，如丝绸之路等。</p>
<p>对于企业而言，往往不免被黑客攻击而被获取大量的数据，而这些数据一般会优先在暗网售卖，如近年来的12306、各大互联网公司等的数据泄露事件。为了及时响应突发的数据泄露事件，企业需要一款实时监控暗网数据泄露的威胁情报平台，用来监控敏感数据泄露、薅羊毛、业务安全风险等事件。</p>
</blockquote>
<p>二、代理服务器搭建</p>
<p>由于国内网络环境的原因，为了顺利访问暗网，我们需要一台海外服务器，系统版本是ubuntu 18.04(当然其他系统也可以，只是本文会把这个版本的系统作为例子)，同时需要在这台服务器上安装Tor与Privoxy用作访问代理服务器。</p>
<p>本文的系统版本：</p>
<pre><code>root@536ef99cab94:/# cat /etc/issue.net
Ubuntu 18.04.2 LTS
</code></pre>
<p>2.1 整体架构<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190626130208745.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tjbGF4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br /> 从图上可以看到，Privoxy作为一个中转代理，主要是把http协议转socks5协议，而Tor则负责把socks5转Tor协议。所以整个代理访问过程为：</p>
<pre><code>1.用户输入后缀为onion的地址，由Privoxy暴露的8118端口访问http协议； 

2.Privoxy把http协议转发给Tor，Tor获取该网站公钥进行加密，通过Tor通信链路发送信息给Tor节点，由该节点转发请求到.onion网站。
</code></pre>
<p>2.2 安装Tor</p>
<p>可能很多人一开始会直接执行这条命令：sudo apt-get install tor，从这个命令安装的Tor是v2版本的，不支持较新的加密算法，所以导致访问不到某些使用最新加密算法的暗网网址。</p>
<p>Tor v2到Tor v3的转变主要表现为如下几点：</p>
<pre><code>1.签名算法从SHA1/DH/RSA1024升级到SHA3/ed25519/curve25519；

2.改进的Tor directory protocol，安全性更高；

3.更好的洋葱地址，换成sha3，可以提高枚举生成一样地址的难度；

4.可拓展的交换协议。

</code></pre>
<p>参考官网的安装方法，安装最新版（v3版本）的Tor步骤如下：</p>
<p>1.在/etc/apt/sources.list添加如下源：</p>
<pre><code>deb https://deb.torproject.org/torproject.org bionic main
deb-src https://deb.torproject.org/torproject.org bionic main
</code></pre>
<p>2.添加gpg密钥，执行如下命令：</p>
<pre><code>curl https://deb.torproject.org/torproject.org/A3C4F0F979CAA22CDBA8F512EE8CBC9E886DDD89.asc | gpg --import
gpg --export A3C4F0F979CAA22CDBA8F512EE8CBC9E886DDD89 | apt-key add -
</code></pre>
<p>3.安装Tor：</p>
<pre><code>apt update
apt install tor deb.torproject.org-keyring
</code></pre>
<p>4.查看安装好Tor的版本，可知本文安装的Tor版本为0.3.5.8：</p>
<pre><code>root@536ef99cab94:/# tor -v
Jun 18 14:30:43.530 [notice] Tor 0.3.5.8 running on Linux with Libevent 2.1.8-stable, OpenSSL 1.1.1, Zlib 1.2.11, Liblzma 5.2.2, and Libzstd 1.3.3.
Jun 18 14:30:43.531 [notice] Tor can't help you if you use it wrong! Learn how to be safe at https://www.torproject.org/download/download#warning
Jun 18 14:30:43.531 [warn] Command-line option '-v' with no value. Failing.
Jun 18 14:30:43.531 [err] Reading config failed--see warnings above.
</code></pre>
<p>2.3 配置Tor</p>
<p>Tor配置文件位于/etc/tor/torrc与/etc/tor/torsocks.conf：</p>
<p>/etc/tor/torsocks.conf定义了让socks协议转Tor协议的端口与地址；</p>
<p>/etc/tor/torrc是Tor的用户配置，在这个文件里我们修改http代理（polipo、privoxy）、即时通信（pidgin、lrssi）、TorDNS等。</p>
<p>为了支持Torv3版本，需要在/etc/tor/torrc文件中加上：</p>
<pre><code>HiddenServiceDir /var/lib/tor/other_hidden_service/
HiddenServicePort 80 127.0.0.1:80
HiddenServiceVersion 3
</code></pre>
<p>修改完成后，在命令行输入service tor start或tor即可启动Tor。</p>
<p>2.4 安装与配置Privoxy</p>
<p>这里暂时没有什么版本要求，所以可以直接执行apt-get install privoxy。</p>
<p>安装好后，为了让Privoxy把http协议转发到Tor，需要编辑/etc/privoxy/config加上：</p>
<pre><code>forward-socks5 / 127.0.0.1:9050 .
listen-address 0.0.0.0:8118
</code></pre>
<p>修改后，重启服务service privoxy restart。</p>
<p>2.5 验证代理器是否可用</p>
<p>Tor浏览器虽然可以使用meek-azure来访问暗网网站，但是访问速度较慢。为了验证我们搭好的代理服务器是否可用，我们可以修改Tor浏览器的网络设置（假设我们的代理服务器ip为：11.11.11.11）：<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190626130410167.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tjbGF4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br /> 设置完成后访问一个暗网网站，如果能访问成功的话即说明我们的代理服务器可用，同时访问速度也比meek-azure快得多。</p>
<p>当然，我们也可以更快捷地输入下面的命令进行测试：</p>
<pre><code>➜  ~ curl -x 11.11.11.11:8118 https://httpbin.org/ip
{
  "origin": "178.175.132.225, 178.175.132.225"
}

</code></pre>
<p>可以查询到178.175.132.225的所在地为国外的摩尔多瓦，为Tor节点的出口地址。</p>
<p>三、开发实时监控程序</p>
<p>在上一章节我们搭好了代理服务器，相当于拥有了访问暗网的钥匙，虽然可以用Tor浏览器+代理更快访问暗网网址，但是人工并不能做到24小时监控而及时发现数据泄露事件，因此我们需要开发一个爬虫程序实时监控暗网网站。</p>
<p>3.1 暗网网站的特点</p>
<p>暗网网站不同于表层网网站，没有太多花里胡哨的动态js与强大的反爬策略，因此对暗网网站爬虫也相对简单。在总结了几个常见的暗网网站后，发现暗网网站的反爬策略一般是如下几种情况：</p>
<pre><code>1.Referer；

2.针对Cookie的请求频率限制；

3.User-Agent；

4.验证码；

5.对网站代码进行更新，修改html标签名字或位置。
</code></pre>
<p>3.2 暗网网站的反反爬虫</p>
<p>针对3.1的反爬虫策略我们可以设法绕过，由于本文的主旨并不在探究反爬虫策略，故简单地说下绕过方法：</p>
<pre><code>1.指定请求头的referer为访问暗网网站的域名；

2.建立多账号Cookie池，同时使用Redis对url去重实现增量爬取减少请求量；

3.指定User-Agent为FireFox浏览器：{‘User-Agent’: ‘Mozilla/5.0 (Windows NT 6.1; rv:60.0) Gecko/20100101 Firefox/60.0’}；

4.暗网网站的验证码一般比较简单，可以简单使用ocr技术识别，如tesseract；

5.需要及时更新爬虫代码，有针对地修改反反爬虫代码。
</code></pre>
<p>3.3 暗网监控的爬虫架构</p>
<p>Scrapy是用Python实现的一个为了爬取网站数据、提取结构性数据而编写的应用框架。Scrapy常应用在包括数据挖掘，信息处理或存储历史数据等一系列的程序中。通常我们可以很简单的通过Scrapy框架实现一个爬虫，抓取指定网站的内容。</p>
<p>本文在Scrapy基础上结合3.2小节的反爬虫绕过方法实现了一个实时监控程序，其架构如下：<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190626130511713.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tjbGF4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br /> 3.4 监控程序的具体实现</p>
<p>本文的监控程序是同时监控几个常见的暗网网站，由于篇幅有限，故只拿某暗网网站作为例子。</p>
<p>Scrapy代理设置：</p>
<pre><code>class DarkwebSpiderDownloaderMiddleware(object):

    def process_request(self, request, spider):
        request.meta['proxy'] = 'http://11.11.11.11:8118'
</code></pre>
<p>多账号登录核心代码：</p>
<pre><code>for accounts in Accounts:
    count = 0
    try:
        logging.info('Account %s is logining ......' % accounts)
        cookie, sid = get_CookieSid(accounts, 'Testtest')
        __i__ = {'cookie': cookie, 'sid': sid}
        # print(__i__)
        logging.info('Account %s finish login !' % accounts)
        __value__.append(__i__)
    except Exception as e:
        logging.error('[*] 超时，忽略一个账户!')
        count += 1
        if(count &gt; 7):
            logging.error('[*] 用户登录个数过少~')
            return
        continue
</code></pre>
<p>去重组件，主要用来减少请求量：</p>
<pre><code>class DuplicateRequestMiddleware(object):

    #初始化redis
    def __init__(self):
        self.RedisQuery = RedisOpera('query')

    #根据redis去重url
    def process_request(self, request, spider):
        spider.logger.info('duplicating &gt;&gt;&gt;&gt;&gt;&gt; %s' % request.url)
        u = request.url
        import hashlib
        if 'vpic' in request.url:
            b = u.index('=') + 1
            MD5 = hashlib.md5()
            MD5.update(bytes(str(b), 'utf-8'))
            if self.RedisQuery.query(MD5.hexdigest()):
                spider.logger.info('duplicate &gt;&gt;&gt;&gt;&gt;&gt; %s' % request.url)
                raise IgnoreRequest("IgnoreRequest : %s" % request.url)
        else:
            spider.logger.info('ignore duplicate &gt;&gt;&gt;&gt;&gt;&gt; %s' % request.url)
            return None
</code></pre>
<p>指定请求头的referer及User-Agent：</p>
<pre><code>LOGIN_HEADERS = {
    'Host': '%s' %load()['domain'].split(',')[index],
    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
    'Accept-Encoding': 'gzip, deflate',
    'Referer': 'http://%s/index.php' %load()['domain'].split(',')[index],
    'Content-Type': 'application/x-www-form-urlencoded',
    'Connection': 'keep-alive',
    'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; rv:60.0) Gecko/20100101 Firefox/60.0'
}
</code></pre>
<p>解析网页，主要是取出内容存入数据库：</p>
<pre><code>def parse(self, response):
    item = DarkwebSpiderItem()
    soup = BeautifulSoup(response.text, 'lxml')
    # 交易价格
    table = soup.find_all(name = 'table', attrs = {'class':'v_table_1'})
    tr_list = table[0].find_all('tr')
    td_list_price = tr_list[4].find_all('td')
    price_list = re.findall(r'\d+\.?\d*', td_list_price[3].get_text())
    price = price_list[0]
    # 成交数量
    td_list_volume = tr_list[6].find_all('td')
    volume_list = re.findall(r'\d+', td_list_volume[3].get_text())
    volume = volume_list[0]
    # 帖子内容
    content_list = soup.find_all(name='div', attrs={'class': 'content'})
    if len(content_list):
        content = content_list[0].get_text()
    else:
        content = ''
    # 图片url
    img_list = soup.find_all(name = 'img', attrs = {'class':'postimage'})
    item['image_urls'] = []
    if len(img_list) &gt; 0 :
        url_list = []
        for img_url in img_list:
            if img_url['src'].find(self.image_domain) &gt; 0:
                download_url = img_url['src']
            else:
                download_url = self.target_url + img_url['src'].replace('./', '')
            url_list.append(download_url)
        item['image_urls'] = url_list
    # 发布时间
    p_author = soup.find_all('p', attrs={'class': 'author'})
    origin_publish_time = p_author[0].contents[4].strip()
    if len(origin_publish_time):
        # origin_publish_time = pt_str
        ptr_list = [x for x in filter(str.isdigit, str(origin_publish_time))]
        pt_str = "".join(ptr_list)
        y = pt_str[:4]
        d = pt_str[-6:-4]
        h = pt_str[-4:-2]
        min = pt_str[-2:]
        if len(pt_str) == 12:
            m = pt_str[4:6]
        else:
            m = '0' + pt_str[4]
        publish_time = y + '-' + m + '-' + d + " " + h + ":" + min + ":00"
    else:
        publish_time = ''
    dt = datetime.datetime.strptime(publish_time, "%Y-%m-%d %H:%M:%S")
    publish_time = dt.astimezone(pytz.timezone('UTC')).strftime('%Y-%m-%d %H:%M:%S')

    b = response.meta['content_url'].index('=') + 1
    item['title_id'] = (response.meta['content_url'])[b:]
    item['title'] = response.meta['title']
    item['url'] = response.meta['content_url']
    item['content'] = content
    item['price'] = price
    item['volume'] = volume
    item['visits'] = response.meta['visits']
    item['publish_time'] = publish_time
    yield item
</code></pre>
<p>当发现监控的关键字新增记录时，通过邮件通知：</p>
<pre><code>def send_html_email(title, html, content, mailto, cc=None):
html_content = render_to_string(html, content)
send_mail = settings.EMAIL_TO.split(',') if mailto == '' else settings.EMAIL_TO

msg = EmailMultiAlternatives(title, html_content,
                             settings.EMAIL_LUCKY_NAME +    '&lt;' + settings.EMAIL_HOST_USER + '&gt;', send_mail, cc=cc)
msg.attach_alternative(html_content, "text/html")
msg.send()
</code></pre>
<p>四、可视化爬虫数据</p>
<p>Grafana是一个跨平台的开源的度量分析和可视化监控工具，可以通过将采集的数据查询然后可视化的展示，并及时通知，4.3以后的版本已支持MySQL数据源，因此读者可以使用Grafana来可视化同时配置邮件告警，具体操作方法还请自行查阅。</p>
<p>但是本文的暗网实时监控程序接入了安全管理平台，故采用自研的管理页面，可以更方便地搜索与查看暗网爬虫数据，大致效果如下:<br /> <img src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190626130646847.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tjbGF4,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br /> 五、总结</p>
<p>暗网监控对于大多数人是一个神秘的存在，本文一步一步地带领读者揭开这层神秘的面纱，从搭建代理服务器开始，在解释常见的反爬策略后，讲解了如何从零开发一个暗网网站监控程序，最后介绍了Grafana可视化监控工具，可以结合监控程序使用。</p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-526ced5128.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>SAP WebIDE编辑器的主题设置</title>
		<link>https://uzzz.org/article/1346.html</link>
				<pubDate>Tue, 25 Jun 2019 06:53:07 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[产品设计]]></category>
		<category><![CDATA[运维]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/1346.html</guid>
				<description><![CDATA[我的本地Eclipse和sublime Text等编辑器，为了保护视力都设置的是黑色或者豆沙绿的背景，而SAP WebIDE JavaScript编辑器默认的背景色还是纯白色，看久了眼睛很累： 这个背景色其实也是可以更换的：WebIDE里选择Preferences 把theme改成Tommorow Night Blue(dark)即可： 要获取更多Jerry的原创文章，请关注公众号&#8221;汪子熙&#8221;:]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>我的本地Eclipse和sublime Text等编辑器，为了保护视力都设置的是黑色或者豆沙绿的背景，而SAP WebIDE JavaScript编辑器默认的背景色还是纯白色，看久了眼睛很累：</p>
<p><img src="https://user-images.githubusercontent.com/5669954/59996165-2e6d1780-968c-11e9-9daf-d07f55dc7f2d.png" alt="clipboard1,1"></p>
<p>这个背景色其实也是可以更换的：WebIDE里选择Preferences</p>
<p><img src="https://user-images.githubusercontent.com/5669954/59996166-2f05ae00-968c-11e9-9566-e67669cc9242.png" alt="clipboard2,2"></p>
<p>把theme改成Tommorow Night Blue(dark)即可：</p>
<p><img src="https://user-images.githubusercontent.com/5669954/59996168-2f9e4480-968c-11e9-9d7a-426c360c5a09.png" alt="clipboard3,3"></p>
<p>要获取更多Jerry的原创文章，请关注公众号&#8221;汪子熙&#8221;:<br /> <img src="https://upload-images.jianshu.io/upload_images/2085791-c4f58b9813a954cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-e9f16cbbc2.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>Python PIL库处理图片常用操作，图像识别数据增强的方法</title>
		<link>https://uzzz.org/article/2984.html</link>
				<pubDate>Sat, 11 May 2019 05:58:30 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[DeepLearning]]></category>
		<category><![CDATA[Python]]></category>
		<category><![CDATA[运维]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2984.html</guid>
				<description><![CDATA[在博客AlexNet原理及tensorflow实现训练神经网络的时候，做了数据增强，对图片的处理采用的是PIL(Python Image Library), PIL是Python常用的图像处理库. 下面对PIL中常用到的操作进行整理： 1. 改变图片的大小 from PIL import Image, ImageFont, ImageDraw def image_resize(image, save, size=(100, 100)): """ :param image: 原图片 :param save: 保存地址 :param size: 大小 :return: """ image = Image.open(image) # 读取图片 image.convert("RGB") re_sized = image.resize(size, Image.BILINEAR) # 双线性法 re_sized.save(save) # 保存图片 return re_sized 2. 对图片进行旋转： from PIL import Image, ImageFont, ImageDraw import matplotlib.pyplot as plt def image_rotate(image_path, save_path, angle): """ 对图像进行一定角度的旋转 :param image_path: 图像路径 :param save_path: 保存路径 :param angle: 旋转角度 :return: """ image = Image.open(image_path) image_rotated = image.rotate(angle, Image.BICUBIC) image_rotated.save(save_path) return image_rotated 3. 对图片进行左右反转： from PIL import Image, ImageFont, ImageDraw import matplotlib.pyplot as plt def image_flip(image_path, save_path): """ 图图象进行左右反转 :param image_path: :param save_path: :return: """ image = Image.open(image_path) image_transpose = image.transpose(Image.FLIP_LEFT_RIGHT) # Image.FLIP_TOP_BOTTOM 上下反转 image_transpose.save(save_path) return image_transpose 4. 对图像进行裁剪： from PIL import Image, ImageFont, ImageDraw import matplotlib.pyplot as plt def image_crop(image_path, save_path, crop_region): """ 对图像进行裁剪 :param image_path: :param save_path: :param crop_region: 裁剪的区域 crop_window=(x_min, y_min, x_max, y_max) :return: """ image = Image.open(image_path) image_crop = image.crop(crop_region) # (width_min, height_min, width_max, height_max) 图像的原点是在左上角 image_crop.save(save_path) return image_crop 5. 在图片上添加文字 from PIL import Image, ImageFont, ImageDraw import matplotlib.pyplot as plt def]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p>在博客<a href="https://blog.csdn.net/zj1131190425/article/details/89881603" rel="nofollow" data-token="e9cc1739d5adf05a016598285947e602">AlexNet原理及tensorflow实现</a>训练神经网络的时候，做了数据增强，对图片的处理采用的是PIL(Python Image Library), PIL是Python常用的图像处理库.</p>
<p>下面对PIL中常用到的操作进行整理：<br /> 1. 改变图片的大小</p>
<pre class="has">
<code class="language-python">from PIL import Image, ImageFont, ImageDraw


def image_resize(image, save, size=(100, 100)):
    """
    :param image:  原图片 
    :param save:   保存地址
    :param size:    大小
    :return: 
    """
    image = Image.open(image)   # 读取图片
    image.convert("RGB")
    re_sized = image.resize(size, Image.BILINEAR)  # 双线性法
    re_sized.save(save)   # 保存图片
    return re_sized</code></pre>
<p>2. 对图片进行旋转：</p>
<pre class="has">
<code class="language-python">from PIL import Image, ImageFont, ImageDraw
import matplotlib.pyplot as plt


def image_rotate(image_path, save_path, angle):
    """
    对图像进行一定角度的旋转
    :param image_path:  图像路径
    :param save_path:   保存路径
    :param angle:       旋转角度
    :return:
    """
    image = Image.open(image_path)
    image_rotated = image.rotate(angle, Image.BICUBIC)
    image_rotated.save(save_path)
    return image_rotated
</code></pre>
<p><img alt="" class="has" height="250" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511105911187.jpg" width="250"><img alt="" class="has" height="245" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511105945368.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pqMTEzMTE5MDQyNQ==,size_16,color_FFFFFF,t_70" width="293"></p>
<p>3. 对图片进行左右反转：</p>
<pre class="has">
<code class="language-python">from PIL import Image, ImageFont, ImageDraw
import matplotlib.pyplot as plt


def image_flip(image_path, save_path):
    """
    图图象进行左右反转
    :param image_path:
    :param save_path:
    :return:
    """
    image = Image.open(image_path)
    image_transpose = image.transpose(Image.FLIP_LEFT_RIGHT)   # Image.FLIP_TOP_BOTTOM 上下反转
    image_transpose.save(save_path)
    return image_transpose</code></pre>
<p><img alt="" class="has" height="250" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511110852837.jpg" width="250"><img alt="" class="has" height="243" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511110936872.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pqMTEzMTE5MDQyNQ==,size_16,color_FFFFFF,t_70" width="266"></p>
<p>4. 对图像进行裁剪：</p>
<pre class="has">
<code class="language-python">from PIL import Image, ImageFont, ImageDraw
import matplotlib.pyplot as plt


def image_crop(image_path, save_path, crop_region):
    """
    对图像进行裁剪
    :param image_path:
    :param save_path:
    :param crop_region:  裁剪的区域  crop_window=(x_min, y_min, x_max, y_max)
    :return:
    """
    image = Image.open(image_path)
    image_crop = image.crop(crop_region)  # (width_min, height_min, width_max, height_max) 图像的原点是在左上角
    image_crop.save(save_path)
    return image_crop</code></pre>
<p><img alt="" class="has" height="250" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511111858399.jpg" width="250"><img alt="" class="has" height="251" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511111926592.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pqMTEzMTE5MDQyNQ==,size_16,color_FFFFFF,t_70" width="276"></p>
<p>5. 在图片上添加文字</p>
<pre class="has">
<code class="language-python">from PIL import Image, ImageFont, ImageDraw
import matplotlib.pyplot as plt


def image_title(image_path, save_path, font_pos, font_size, text):
    """
     对图像添加文字
    :param image_path:
    :param save_path:
    :param font_pos:   文字位置(x, y)
    :param font_size:  文字大小
    :param text:        文字内容
    :return:
    """
    image = Image.open(image_path)
    font = ImageFont.truetype(font=r"C:\Windows\Fonts\Times New Roman\times.ttf", size=font_size)
    draw = ImageDraw.Draw(image)
    draw.text(xy=font_pos, text=text, fill=(255, 0, 0), font=font)
    image.save(save_path)
    return image
</code></pre>
<p><img alt="" class="has" height="250" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511131129400.jpg" width="250"><img alt="" class="has" height="241" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511131158375.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pqMTEzMTE5MDQyNQ==,size_16,color_FFFFFF,t_70" width="270"></p>
<p>除以上之外，数据增强的方法还有对图像颜色进行抖动，和对图像进行高斯噪声处理</p>
<p>1. 颜色抖动：</p>
<pre class="has">
<code class="language-python">from PIL import Image, ImageFont, ImageDraw, ImageEnhance
import matplotlib.pyplot as plt
import numpy as np


def image_color(image_path, save_path):
    """
    对图像进行颜色抖动
    :param image_path:
    :param save_path:
    :return:
    """
    image = Image.open(image_path)
    print(type(image))
    random_factor = np.random.randint(low=0, high=31) / 10.0        # 随机的扰动因子
    color_image = ImageEnhance.Color(image).enhance(random_factor)    # 调整图像的饱和度
    random_factor = np.random.randint(low=10, high=21) / 10.0
    bright_image = ImageEnhance.Brightness(color_image).enhance(random_factor)   # 调整图像的亮度
    random_factor = np.random.randint(low=10, high=21) / 10.0
    contrast_image = ImageEnhance.Contrast(bright_image).enhance(random_factor)  # 调整图像的对比度
    random_factor = np.random.randint(low=0, high=31) / 10.0
    sharp_image = ImageEnhance.Sharpness(contrast_image).enhance(random_factor)  # 调整图像的锐度
    sharp_image.save(save_path)
    return sharp_image
</code></pre>
<p><img alt="" class="has" height="250" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511133338996.jpg" width="250"><img alt="" class="has" height="242" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511133357290.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pqMTEzMTE5MDQyNQ==,size_16,color_FFFFFF,t_70" width="264"></p>
<p>2.高斯噪声处理：</p>
<pre class="has">
<code class="language-python">from PIL import Image, ImageFont, ImageDraw, ImageEnhance
import matplotlib.pyplot as plt
import numpy as np
import random


def image_gauss(image_path, save_path, mean, stddev):
    """
    对图像进行颜色抖动
    :param image_path:
    :param save_path:
    :return:
    """
    def gaussNoisy(pixel_array, mean, stddev):
        """
        对图像的单个通道进行高斯噪声处理
        :param pixel_array:
        :param mean:  均值
        :param stddev:  方差
        :return:
        """
        for x in pixel_array:
            x += random.gauss(mean, stddev)
        return pixel_array

    # 对图像进行数据转换
    image = Image.open(image_path)
    image.convert("RGB")
    img = np.asarray(image)   # 将PIL中的数据格式转化为array
    img.flags.writeable = True    # 将数组改为读写模式
    width, height = img.shape[: 2]
    img_r = img[:, :, 0].flatten()
    img_g = img[:, :, 1].flatten()
    img_b = img[:, :, 2].flatten()
    img_r_new = gaussNoisy(pixel_array=img_r, mean=mean, stddev=stddev)
    img_g_new = gaussNoisy(pixel_array=img_g, mean=mean, stddev=stddev)
    img_b_new = gaussNoisy(pixel_array=img_b, mean=mean, stddev=stddev)
    img[:, :, 0] = img_r_new.reshape([width, height])
    img[:, :, 1] = img_g_new.reshape([width, height])
    img[:, :, 2] = img_b_new.reshape([width, height])
    image_new = Image.fromarray(np.uint8(img))    # 将array中的数据格式转化为PIL中的数据格式
    image_new.save(save_path)    
    return image_new

</code></pre>
<p><img alt="" class="has" height="250" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511135546863.jpg" width="250"><img alt="" class="has" height="247" src="https://uzshare.com/_p?https://img-blog.csdnimg.cn/20190511140320456.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pqMTEzMTE5MDQyNQ==,size_16,color_FFFFFF,t_70" width="279"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>服务器响应时间缓慢的解决方法</title>
		<link>https://uzzz.org/article/3241.html</link>
				<pubDate>Tue, 02 Apr 2019 03:02:29 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[运维]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/3241.html</guid>
				<description><![CDATA[用户在使用服务器一段时间后会发现网站打开速度变慢，如果遇到这种问题，我们可以从服务器的硬件和软件方面来进行升级优化，以提升服务器的性能跟它的整体利用率。下面一起来从这几个方面了解下吧~ 　　一、使用服务器的Gzip压缩功能 　　一般比较大中型的网站内容页面比价多，会造成占用较大的内存，当客户端访问的时候，加载的速度也会受到影响，如果是这类网站，用户可以用服务器的Gzip页面压缩功能，将一个比较大的页面尽量小一些，这样可以减少网络传输的数量，起到客户端访问速度。正常情况下的电脑是可以使用Gzip压缩功能的，而且还可以能够针对JS文件、CSS文件和Html进行压缩，多方面去进行优化网站访问速度。 　　二、尽量减少http请求数 　　一般情况下从访客访问一个页面到页面完全展现出来，这过程是要耗费一些时间加载各种Scripts、CSS样式表、Flash以及图片的，这过程中只要加载，就会请求一次http，所以这样的次数越多，时间耗费得越多，这样一来，页面的打开时间就越长，那如果是这样的情况，用户可以把CSS跟JS写到页面上，尽量避免外部调用，或者也可以把CSS文件和JS文件分来，在后台再进行合并，这样客户端浏览器相当于一次请求。所以尽量减少http的请求，减少外部各类文件的数量调用次数达到提升访问速度的目的。 　　三、升级服务器 　　在进行服务器升级工作之前，尽量多方面去考虑，是要升级现有的服务器还是要置换新的服务器设备。随着业务的不断增长，一直在使用的服务器遇到的问题比较多也是正常的。所以针对一些配置进行升级，比如增加硬件设备等，来满足不断在扩大的业务需求。 　　至于说要置换的新的服务器，主要是因为可能在建站初期，选择硬件配置相对比较差的，使用到现在已经不能满足网站的发展，那只能选择购置新的服务器。对于硬件优化的部分服务器租用完全可以信赖服务商的工作。选择一家靠谱的服务商对于服务器使用过程中出现的问题进行及时有效的处理是互联网公司的明智选择。对于被攻击目标来说，需要面对不同协议、不同资源的分布式的攻击，分析、响应和处理的成本就会大大增加。对于一般的小型企业来说，通过自己来做到全面的防护不太实际且成本巨大。但是通过服务商部署的全面防护系统、单机硬防和集群防御软硬件给企业带来不一样安全体验。 　　希望这些介绍能对您有所帮助]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<p>用户在使用服务器一段时间后会发现网站打开速度变慢，如果遇到这种问题，我们可以从服务器的硬件和软件方面来进行升级优化，以提升服务器的性能跟它的整体利用率。下面一起来从这几个方面了解下吧~<br /> 　　一、使用服务器的Gzip压缩功能<br /> 　　一般比较大中型的网站内容页面比价多，会造成占用较大的内存，当客户端访问的时候，加载的速度也会受到影响，如果是这类网站，用户可以用服务器的Gzip页面压缩功能，将一个比较大的页面尽量小一些，这样可以减少网络传输的数量，起到客户端访问速度。正常情况下的电脑是可以使用Gzip压缩功能的，而且还可以能够针对JS文件、CSS文件和Html进行压缩，多方面去进行优化网站访问速度。<br /> 　　二、尽量减少http请求数<br /> 　　一般情况下从访客访问一个页面到页面完全展现出来，这过程是要耗费一些时间加载各种Scripts、CSS样式表、Flash以及图片的，这过程中只要加载，就会请求一次http，所以这样的次数越多，时间耗费得越多，这样一来，页面的打开时间就越长，那如果是这样的情况，用户可以把CSS跟JS写到页面上，尽量避免外部调用，或者也可以把CSS文件和JS文件分来，在后台再进行合并，这样客户端浏览器相当于一次请求。所以尽量减少http的请求，减少外部各类文件的数量调用次数达到提升访问速度的目的。<br /> 　　三、升级服务器<br /> 　　在进行服务器升级工作之前，尽量多方面去考虑，是要升级现有的服务器还是要置换新的服务器设备。随着业务的不断增长，一直在使用的服务器遇到的问题比较多也是正常的。所以针对一些配置进行升级，比如增加硬件设备等，来满足不断在扩大的业务需求。<br /> 　　至于说要置换的新的服务器，主要是因为可能在建站初期，选择硬件配置相对比较差的，使用到现在已经不能满足网站的发展，那只能选择购置新的服务器。对于硬件优化的部分服务器租用完全可以信赖服务商的工作。选择一家靠谱的服务商对于服务器使用过程中出现的问题进行及时有效的处理是互联网公司的明智选择。对于被攻击目标来说，需要面对不同协议、不同资源的分布式的攻击，分析、响应和处理的成本就会大大增加。对于一般的小型企业来说，通过自己来做到全面的防护不太实际且成本巨大。但是通过服务商部署的全面防护系统、单机硬防和集群防御软硬件给企业带来不一样安全体验。<br /> 　　希望这些介绍能对您有所帮助</p>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-526ced5128.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>牛客网 2018校招真题 招商银行信用卡 小招喵跑步</title>
		<link>https://uzzz.org/article/2755.html</link>
				<pubDate>Thu, 24 Jan 2019 05:05:22 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[运维]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2755.html</guid>
				<description><![CDATA[Description 牛客网 2018校招真题 小招喵跑步 Solving Ideas 逆向思维，计算从终点到原点需要的最少步数 当x为偶数时，则x /= 2 当x为奇数时，如果(x + 1) / 2为偶数，则x++；如果(x &#8211; 1) / 2为偶数，则x–； 特别地，如x &#60;= 3，则x– 对于任意的x，x属于整数，(x + 1) / 2为偶数 和 (x - 1) / 2为偶数 有且只有一个会成立。 Time complexity : O ( l o g x ) O(logx) O(logx) Space complexity : O ( 1 ) O(1) O(1) Solution import java.io.BufferedReader; import java.io.IOException; import java.io.InputStreamReader; /** * @author wylu */ public class Main { public static void main(String[] args) throws IOException { BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); int x = Math.abs(Integer.parseInt(br.readLine())); int res = 0; while (x != 0) { if (x % 2 == 0) x &#62;&#62;= 1; else x += ((x + 1) / 2 % 2 == 0 &#38;&#38; x &#62; 3) ? 1 : -1; res++; } System.out.println(res); } }]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div id="content_views" class="markdown_views prism-atom-one-dark">
  <!-- flowchart 箭头图标 勿删 --><br />
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
   <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
  </svg> </p>
<h4><a id="Description_0"></a>Description</h4>
<p>牛客网 2018校招真题 <a href="https://www.nowcoder.com/practice/1177e9bd1b5e4e00bd39ca4ea9e4e216?tpId=90&amp;tqId=30903&amp;tPage=7&amp;rp=7&amp;ru=/ta/2018test&amp;qru=/ta/2018test/question-ranking" rel="nofollow" data-token="38912862760a873f7b34854acc5da427">小招喵跑步</a></p>
<h4><a id="Solving_Ideas_3"></a>Solving Ideas</h4>
<p>逆向思维，计算从终点到原点需要的最少步数</p>
<p>当x为偶数时，则x /= 2<br /> 当x为奇数时，如果(x + 1) / 2为偶数，则x++；如果(x &#8211; 1) / 2为偶数，则x–；<br /> 特别地，如x &lt;= 3，则x–</p>
<p>对于任意的x，x属于整数，<code>(x + 1) / 2为偶数</code> 和 <code>(x - 1) / 2为偶数</code> 有且只有一个会成立。</p>
<p>Time complexity : <span class="katex--inline"><span class="katex"><span class="katex-mathml"></p>
<math>
       <semantics><br />
        <mrow><br />
         <mi><br />
          O<br />
         </mi><br />
         <mo><br />
          (<br />
         </mo><br />
         <mi><br />
          l<br />
         </mi><br />
         <mi><br />
          o<br />
         </mi><br />
         <mi><br />
          g<br />
         </mi><br />
         <mi><br />
          x<br />
         </mi><br />
         <mo><br />
          )<br />
         </mo><br />
        </mrow><br />
        <annotation encoding="application/x-tex"><br />
         O(logx)<br />
        </annotation><br />
       </semantics><br />
      </math>
<p></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span class="mord mathit" style="margin-right: 0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right: 0.03588em;">g</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span></span><br /> Space complexity : <span class="katex--inline"><span class="katex"><span class="katex-mathml"></p>
<math>
       <semantics><br />
        <mrow><br />
         <mi><br />
          O<br />
         </mi><br />
         <mo><br />
          (<br />
         </mo><br />
         <mn><br />
          1<br />
         </mn><br />
         <mo><br />
          )<br />
         </mo><br />
        </mrow><br />
        <annotation encoding="application/x-tex"><br />
         O(1)<br />
        </annotation><br />
       </semantics><br />
      </math>
<p></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathit" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></p>
<h4><a id="Solution_15"></a>Solution</h4>
<pre><code class="prism language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>BufferedReader<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>InputStreamReader<span class="token punctuation">;</span>

<span class="token comment">/** * @author wylu */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>
        BufferedReader br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> x <span class="token operator">&gt;&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span> x <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            res<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</p></div>
<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-526ced5128.css" rel="stylesheet">
</div>
]]></content:encoded>
										</item>
		<item>
		<title>100% 搭建你自己的匿名网站(暗网网站)</title>
		<link>https://uzzz.org/article/743.html</link>
				<pubDate>Wed, 12 Sep 2018 08:02:15 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[运维]]></category>
		<category><![CDATA[tor]]></category>

		<guid isPermaLink="false">http://wp.uzzz.org/article/743.html</guid>
				<description><![CDATA[序言 &#160;前几年一则朋友圈把暗网炒火了&#8230; 其实暗网没那么神秘,就是一种特定的方式的部署与请求而已 请求方需要使用 tor browser 响应方 需要使用 tor 的hidden_service 话不多少,进入搭建阶段 环境 &#160;系统：一台三十块一个月的香港vps 自带centos7 所需：Nginx+tor 更新yum源 rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm &#160;关闭防火墙 &#38; 禁用 //临时关闭 systemctl stop firewalld //禁止开机启动 systemctl disable firewalld Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service. Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service. 安装 Nginx yum -y install nginx 安装 Tor yum -y install tor 配置 Nginx vi /etc/nginx/nginx.conf server{ listen 80 default_server; ... } 启动 Nginx service nginx restart 配置 tor vi /etc/tor/torrc 添加一下两行 HiddenServiceDir /var/lib/tor/hidden_service/ HiddenServicePort 80 服务器IP:8080 启动 tor service tor start 查看hostname cd /var/lib/tor/hidden_service/ cat hostname &#160;最后使用tor浏览器访问一下]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-3019150162.css">
<div class="htmledit_views" id="content_views">
<blockquote>
<p>序言</p>
</blockquote>
<p>&nbsp;前几年一则朋友圈把暗网炒火了&#8230;</p>
<p>其实暗网没那么神秘,就是一种特定的方式的部署与请求而已</p>
<p>请求方需要使用 tor browser</p>
<p>响应方 需要使用 tor 的hidden_service</p>
<p>话不多少,进入搭建阶段</p>
<blockquote>
<p>环境</p>
</blockquote>
<p>&nbsp;系统：一台三十块一个月的香港vps 自带centos7</p>
<p>所需：Nginx+tor</p>
<blockquote>
<p>更新yum源</p>
</blockquote>
<pre class="has">
<code>rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</code></pre>
<blockquote>
<p>&nbsp;关闭防火墙 &amp; 禁用</p>
</blockquote>
<pre class="has">
<code>//临时关闭
systemctl stop firewalld
//禁止开机启动
systemctl disable firewalld
Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.
Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.</code></pre>
<blockquote>
<p>安装 Nginx</p>
</blockquote>
<pre class="has">
<code>yum -y install nginx</code></pre>
<blockquote>
<p>安装 Tor</p>
</blockquote>
<pre class="has">
<code>yum -y install tor</code></pre>
<blockquote>
<p>配置 Nginx</p>
</blockquote>
<pre class="has">
<code>vi /etc/nginx/nginx.conf</code></pre>
<pre class="has">
<code> server{
        listen       80 default_server;
        ...
}</code></pre>
<blockquote>
<p>启动 Nginx</p>
</blockquote>
<pre class="has">
<code>service nginx restart</code></pre>
<blockquote>
<p>配置 tor</p>
</blockquote>
<pre class="has">
<code>vi /etc/tor/torrc</code></pre>
<pre class="has">
<code>添加一下两行
HiddenServiceDir /var/lib/tor/hidden_service/
HiddenServicePort 80 服务器IP:8080</code></pre>
<blockquote>
<p>启动 tor</p>
</blockquote>
<pre class="has">
<code> service tor start</code></pre>
<blockquote>
<p>查看hostname</p>
</blockquote>
<pre class="has">
<code>cd /var/lib/tor/hidden_service/
cat hostname</code></pre>
<p>&nbsp;最后使用tor浏览器访问一下</p>
<p><img alt="" class="has" src="https://uzshare.com/_p?https://img-blog.csdn.net/20180912160141900?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2tFbm5wb25O/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></p>
</p></div>
</div>
]]></content:encoded>
										</item>
		<item>
		<title>一次有意思的机房停电小事故</title>
		<link>https://uzzz.org/article/2876.html</link>
				<pubDate>Fri, 25 May 2018 00:29:17 +0000</pubDate>
		<dc:creator><![CDATA[fandyvon]]></dc:creator>
				<category><![CDATA[运维]]></category>

		<guid isPermaLink="false">https://uzzz.org/article/2876.html</guid>
				<description><![CDATA[今天遇到了一次机房断电的事故，幸亏预备措施比较到位加上组织大批人员救急，安然度过了停电的两个小时。 上午10点多，正在会议室开会，突然窗外嗵的一声响，感觉像是什么爆了，然后会议室灯和大屏幕都暗了下来。这时领导已经意识到可能是全楼断电了，赶紧出门去看，不得不说领导的敏感性那是杠杠的。我们的会议室就在机房外面，不一会儿很多人就出现到机房这边了。 领导让一方面派人去楼顶几层公司高层领导那里巡查，向他们解释整楼断电我们正在采取措施。另一方面，开始检查机房机器是否都运行正常，并且开始联系发电车。 整个办公楼都黑漆漆一篇，只有机房里绿灯闪烁。大家打开手机手电筒，小心翼翼的进机房查看。两台UPS，一台剩余392分钟，一台剩余120分钟，听起来很不打错啊。只是几分钟没过，机房的温度开始升了起来，此时机房温度26~28度。服务器有UPS可是机房空调没有UPS呀。大概十几分钟后，处于角落位置的温度已经到了30度。领导开始组织人员联系买冰块，同时打开机房两个大门让空气对流。还有人找来了一大一小两台风扇开始从门口往机房吹。 大概11点半左右，两车冰块才陆续运抵，艰难的冰桶挑战开始了。各式各样的容器纷纷登场亮相，有从厨房借来的汤桶，又从保洁阿姨借来的垃圾桶和水桶。大家走楼梯把冰桶搬到7楼机房里，放置在温度相对较高的地方。为了防止冰块融化的水不小心流到地上，还在冰桶下面防止了垫子。 就是这样，在11点40左右，机房有的区域温度已经到了40度，有些机器已经过热重启了。 待续]]></description>
								<content:encoded><![CDATA[<div id="article_content" class="article_content clearfix">
 <!--一个博主专栏付费入口--><br />
 <!--一个博主专栏付费入口结束-->
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
 <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-d284373521.css">
<div class="htmledit_views" id="content_views">
<p>今天遇到了一次机房断电的事故，幸亏预备措施比较到位加上组织大批人员救急，安然度过了停电的两个小时。</p>
<p>上午10点多，正在会议室开会，突然窗外嗵的一声响，感觉像是什么爆了，然后会议室灯和大屏幕都暗了下来。这时领导已经意识到可能是全楼断电了，赶紧出门去看，不得不说领导的敏感性那是杠杠的。我们的会议室就在机房外面，不一会儿很多人就出现到机房这边了。</p>
<p>领导让一方面派人去楼顶几层公司高层领导那里巡查，向他们解释整楼断电我们正在采取措施。另一方面，开始检查机房机器是否都运行正常，并且开始联系发电车。</p>
<p>整个办公楼都黑漆漆一篇，只有机房里绿灯闪烁。大家打开手机手电筒，小心翼翼的进机房查看。两台UPS，一台剩余392分钟，一台剩余120分钟，听起来很不打错啊。只是几分钟没过，机房的温度开始升了起来，此时机房温度26~28度。服务器有UPS可是机房空调没有UPS呀。大概十几分钟后，处于角落位置的温度已经到了30度。领导开始组织人员联系买冰块，同时打开机房两个大门让空气对流。还有人找来了一大一小两台风扇开始从门口往机房吹。</p>
<p>大概11点半左右，两车冰块才陆续运抵，艰难的冰桶挑战开始了。各式各样的容器纷纷登场亮相，有从厨房借来的汤桶，又从保洁阿姨借来的垃圾桶和水桶。大家走楼梯把冰桶搬到7楼机房里，放置在温度相对较高的地方。为了防止冰块融化的水不小心流到地上，还在冰桶下面防止了垫子。</p>
<p>就是这样，在11点40左右，机房有的区域温度已经到了40度，有些机器已经过热重启了。</p>
<p></p>
<p>待续</p>
<p></p>
<p></p>
</p></div>
</div>
]]></content:encoded>
										</item>
	</channel>
</rss>
